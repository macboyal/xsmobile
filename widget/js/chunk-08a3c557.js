(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08a3c557"],{"0e1e":function(t,e,a){},3188:function(t,e,a){"use strict";var s=a("0e1e"),i=a.n(s);i.a},aa96:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("basePage",{ref:"basePage",attrs:{numberCol:t.numberCol,buttons:t.buttons,draggable:!0,footerText:t.footerText,btnMethod:t.btnMethod,selectItems:t.selectItems,fixedQueryConditions:t.fixedQueryConditions,cascadeItems:t.cascadeItems,title:t.$t("pretreatment.taskTitle"),contitle:t.$t("pretreatment.contitle"),checkallable:!1,extIcon:t.extIcon,rightIcon:"",pcmoduleid:"storage_5002",moduleid:"nest_00011"},on:{buttonsClick:t.buttonsClick,aftercheck:t.aftercheck,afterquery:t.afterquery,cardsort:t.cardsort,extClick:t.extClick},scopedSlots:t._u([{key:"over",fn:function(){return[a("van-row",{staticStyle:{"text-align":"center","vertical-align":"middle","align-items":"center","justify-content":"center",display:"flex"}},[a("van-col",{attrs:{span:"4"}},[a("span",{staticClass:"smallfont"},[t._v(t._s(t.$t("rawMaterialStorage.store")))])]),a("van-col",{attrs:{span:"14"}},[a("menuselect",{staticStyle:{width:"100%"},attrs:{options:t.options,showFirstItem:""},model:{value:t.storeId,callback:function(e){t.storeId=e},expression:"storeId"}})],1),a("van-col",{attrs:{span:"6"}},[a("span",{staticClass:"smallfont",staticStyle:{float:"right","margin-right":"10px"}},[t._v(t._s(t.$t("rawMaterialStorage.total")+":"+t.total))])])],1)]},proxy:!0}])})],1)},i=[],n=(a("ac6a"),a("386d"),a("c5f6"),a("02df")),r={name:"storage0001",data:function(){return{numberCol:{},buttons:[{key:"finish",name:this.$t("pretreatment.finish")}],selectobjs:[],storeId:"",total:0,options:[],footerText:[{key:"quantity",display:this.$t("rawMaterialStorage.quantity"),value:0},{key:"weight",display:this.$t("rawMaterialStorage.weight"),value:0}],btnMethod:{querymethod:"/wms/wmspretreatmenttask/autopage"},selectItems:{oboBusscode:[{id:"0",name:this.$t("pretreatment.plateCutting")}]},cascadeItems:{},boindnum:0,unboindnum:0,addcon:[],fixedQueryConditions:[{key:"ptmtFinishStatus",exp:"=",value:"0"}],extIcon:"wap-nav"}},created:function(){this.initselect()},activated:function(){},methods:{cardsort:function(t){var e=this,a=this;this.$toast.loading({forbidClick:!0,duration:0});var s=Number(t.oldIndex),i=Number(t.newIndex),n={stackId:this.$refs.basePage.datas[0].ptmtOutStockid,oriId:this.$refs.basePage.datas[s].id,afterId:this.$refs.basePage.datas[i].id};this.$ajax("/wms/wmspretreatmenttask/dropupdate","",n,(function(t){e.$toast.success(a.$t("pretreatment.updateSuccess")),a.$refs.basePage.search()}))},buttonsClick:function(t){if("finish"===t){var e=this.$refs.basePage.ischeckall();if(e);else{var a=this.$refs.basePage.getselected();a&&a.length>0?this.finish():this.$toast.fail(this.$t("base.noselect"))}}},extClick:function(){this.$router.push({path:"/pretreatment"})},finish:function(){var t=this,e=this;this.$toast.loading({forbidClick:!0,duration:0});var a=this.$refs.basePage.getselected(),s=a.map((function(t){return{id:t.id}}));this.$ajax("/wms/wmspretreatmenttask/complete","",s,(function(a){t.$toast.success(e.$t("pretreatment.finishSuccess")),e.$refs.basePage.search()}))},aftercheck:function(t){if(!1===this.$refs.basePage.checkAll){var e=this.$refs.basePage.getselected(),a=0,s=0;e.forEach((function(t){a+=Number(t.matAuxQuantity),s+=Number(t.matBasicQuantity)})),this.footerText[0].value=s,this.footerText[1].value=a}},aftercheckall:function(){!0===this.$refs.basePage.checkAll&&this.$refs.basePage.extRecords?(this.footerText[0].value=this.$refs.basePage.extRecords.MAT_BASIC_QUANTITY,this.footerText[1].value=this.$refs.basePage.extRecords.MAT_AUX_QUANTITY):(this.footerText[0].value=0,this.footerText[1].value=0)},afterquery:function(t){var e=this;this.total=t.total;var a=this.$refs.basePage.checkAll;this.$nextTick((function(){a?e.aftercheckall():e.aftercheck()}))},cascadehandler:function(t){var e=this,a=[];return t.forEach((function(t){var s={checkable:t.check,id:t.matCatSyspath,code:t.matCatSyscode,name:t.matCatName};s.children=e.cascadehandler(t.children),a.push(s)})),a},initselect:function(){var t=this;this.$ajax("/wms/wmsstore/list","",{storeType:5},(function(e){var a=[];e.data.data.forEach((function(t){var e={text:t.storeName,value:t.id};a.push(e)})),t.options=a}));var e=this;this.$ajax("/wms/wmsstore/list","",{storeType:7,storeClassify:"ORI"},(function(t){e.selectItems.ptmtInStoreid=t.data.data.map((function(t){return{id:t.id,name:t.storeName}}))})),this.$ajax("/wms/wmsstack/list","",{},(function(e){var a=[];e.data.data.forEach((function(t){var e={name:t.stackName,id:t.id};a.push(e)})),t.selectItems.ptmtInStockid=a})),this.$ajax("/auth/dep/listdep","",{},(function(e){var a=[];e.data.data.forEach((function(t){var e={id:t.id,name:t.depName};a.push(e)})),t.selectItems.oboDepId=a})),this.$ajax("/common/comteam/list","",{},(function(e){var a=[];e.data.data.forEach((function(t){var e={id:t.id,name:t.teamName};a.push(e)})),t.selectItems.oboTeamId=a})),this.$ajax("/wms/wmsmatcat/list","",{},(function(e){var a=[];e.data.data.forEach((function(t){var e={id:t.id,name:t.matCatName};a.push(e)})),t.selectItems.matMatCatId=a})),this.selectItems.matSheetType=n["a"].getDict("SHEET_TYPE"),this.selectItems.ptmtIsTransfer=n["a"].getDict("PTMT_TASK_TRANSFER"),this.selectItems.ptmtFinishStatus=n["a"].getDict("PTMT_TASK_STATUS"),this.selectItems.oboBusscode=n["a"].getDict("ODB_BUSS_CODE")}}},o=r,c=(a("3188"),a("2877")),l=Object(c["a"])(o,s,i,!1,null,"264432ee",null);e["default"]=l.exports}}]);