(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18c86c19"],{"0149":function(t,e,a){"use strict";var i=a("c719"),s=a.n(i);s.a},"07ba":function(t,e,a){},"0b82":function(t,e,a){},"0d61":function(t,e,a){"use strict";var i=a("07ba"),s=a.n(i);s.a},"1d04":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAABACAYAAACwVZFQAAAAAXNSR0IArs4c6QAABhxJREFUeF7tnG2oFFUYx5//nS73khkaWGZFkIRvXwIhxAqKyN4+9CL2ISnohUzpxW7lC/ec6bTPrIVcCovI3iyi+mBSIUURRldMLbWi0CQp/KBC9qFCTC9xZ544tivburM7Z3Z39m7NwGHZ3ed5zv/57ZlzZuacs6D8cCIAJ+s2GPu+f42IzAIwXUSmAZggIhOIqFxGiOhfBcCJ9yJiSz+APiLqJ6KTrxWfHyair4joWxHZHQTBB82k0TFgxpgpYRgOEtGSZhJI4fs1AF0oFD5O4UsdAeb7/gIReYqIpqYR3QKfn5j54jRxMgdWgrU+jdhW+jBzqtxTOaUVPlZg2T6NmeekySMzYMaY00ZHR3cCuCSN0Fb6RFF0RbFY/CJNzMyAaa0fIqI1aUQ26fM7EZXLISJazcxb08bMBNiyZcvG9/f37xCR6XFCAdxWKBTeTZtIVn6ZAFNKLQfwdLfDsvrbDswYc3YYhjuI6MJawAAUC4WCyqqFNFtP24EppQyAJ2KEfsLM1zebRJb+bQWmlJoBwLauM2olFYbh7FWrVn2TZcLN1tVWYFrrl4jovhiRQ8z8eLMJZO3fNmC+718tIpviEvI87wJjzMGsE262vnYC2yoic2sJFJEngyAwzYrvhH9bgGmt7yeiF+u0rj5jzF+dSLjZOlMDGxwcnAtgXoUAKV2mCIDH4jp627qaFZ3EH4BX0mAHnJNFRA4DsM/IfvQ8b9gY80OSeGWbVMBKN9Hr4qC4COi0rYiYIAgS/4ipgGmtdxPRrE4n26r6Pc+bZozZlySeMzBjzMwwDPckCd4tNiIyPwiC92rpXbly5aS+vr5J5VPXGZjW+gEier5bYCTUuZyZV1faGmMmR1H0voiUn5vtEZEBZ2ANbnUS6htzZm8w811W1YoVKyb29vZeREQBEV1XpfRADszxt8uBpQGmtV4KYG9PT892Y8yRejH+o6dkYmxQSj0H4MGSxx9EtFlEbNlSLBZ3VUf63wPTWtsr9JqHnSm2AAFsE5HtQRDsz4HVAVZF8RgRbRGRL+s8EEzctLvVEFprexPc260JZK3bAvuFiM7JuuJurc8Cs3frM7o1gax1W2B2BviyrCvu1vossM+J6MpuTSBr3TkwR+I5sH+ADduL9Up2pYv5s6p55sBKwJj5qko4vu8vFJG3qoC9kwOLAWY/Vkrdaluavc8WkV3MvC4HVgdYre4tB5YDcxz2cmA5sFQEHJ2Gq0fJOP+8D8tPSce2lQPLgaUi4OjU1X3YPgB2Fvo3IpoiIpcS0Z0uAETELl9/FcBkETkPwMIGa0GcgNmZodkugtpou5iZ11bH11pbfafMYFXbWVAAnmXm7ZXfGWPOHB0dHagzF+EE7GcislPjHT0abWzQWt9ORG/XEbmRmW+ql4TW+hUiureGjRMw2/QndpQW0TpmvqeRBq31ASI6P8bu8kZbYuqsPHICFjsvWaPJHwdgn9De0Cg5l++TrnlVSq0HsKBW7KTb+WLWtjkBa7Q47qCIfAZg2C5xjKJoiYi0dLm4A7DYTRIOwPYSUfWeJydgp6ylF5HvAWyyoEZGRjYPDQ39Wf5VlVJrASxyaUEJbNcy8+JGdvVm3ZMCU0odATC+qq7kwJRSNwN42AYAsFFEtjGz3VRe81BKvQngjkbJOX5/1PO8c40xR+P87EgXhuG2uMsDEVkaBEHd7YV1Bo7kwBwTI631BiKa7+qXwL7mJUVFy663Z8ma7fc8b44x5te4urTWHxLRjTX65k+DILg2gUb33Wxa649a3elXCF3EzC9XC0+6AMaeHQAGqs8Qu07V87wX4gYMItrAzDUHk2otzgvq2j2PaQeAnp6ew1EUHQJgLyFsIk7zplUxZhLRABFNimtBIvJ6EAR3t6WF+b4/JCKPJgneLTYA1hQKhaVJ9KZpYfaXeC1J8C6yCZhZJ9GbBlii+7oklY8VGxG5JelfzDgDs0kqpZ4B8MhYSbhJHTs9z5tnjLHLVRseqYDZqHa/URRFtkOeCsBOqdtiN0HZlYonCoBjInK89D5sqKY1Bp6IjANwOhGNI6Lyq/0zo/Jh4djlAd+5bkNMDaw1uXVflL8BIemmjKim+jMAAAAASUVORK5CYII="},2112:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAYVJREFUSEvF1z8vhEEQx/HvvQWJXk1EgVYoqPypaHRKChIvwHkHJOgUWkJCqOkpUVNqFEqV/GQn2dvscrvPc9mtb+dzOzs7N9eh0upUconBi8AcMAIMNfxin8AbcA/c+rFCuAvsNcRS2/cBxf9dPjwFPA4ItbDTwFMIHwDbA4YPgZ0QvgaWG8AvLmOKkaqNG2AlhFUAs4XwCbDl9o4C58BYJNaDK9yeOy6Fe4rmH7w1+AJYBVK4oGHv5K3AQtdcWlP4MbDZJmyoxdSdCtc71elt6elMtgUbqupcd6dWbMMt7afARlBgxak2dAHYBZaAby+4j8c6YBFs6AxwBkwAX5EnY3jsZWbDhqrlXQFqrx+ZqD6eBRs6DlwC88B7AZoF+9WrO7uzJh/Af6XX/2hfJzZULVDrNdFO+0X7PrE9i2cHqlmEeA6aDdsPx5F7s4bnotmwNgj34RK0CPavtxRNwuEg4Pdcg1Vo6smlKzoIVBt9qg17Sl+V8dburcpAX1o02fuq/Xf6Abe0dR9DM6YZAAAAAElFTkSuQmCC"},2769:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("baseNavigation",{attrs:{rightIcon:"",title:"扫码配置"},on:{onClickLeft:t.onClickLeft}}),i("van-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[i("van-cell-group",[i("van-cell",{attrs:{title:"摄像头扫码",clickable:""},on:{click:function(e){return t.click("camera")}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[i("van-radio",{attrs:{"checked-color":"#61408c",name:"camera"}})]},proxy:!0}])}),i("van-cell",{attrs:{title:"红外扫码",clickable:""},on:{click:function(e){return t.click("infrared")}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[i("van-radio",{attrs:{"checked-color":"#61408c",name:"infrared"}})]},proxy:!0}])})],1)],1),i("van-image",{staticClass:"img",attrs:{src:a("cf05")}})],1)},s=[],n={name:"scran",data:function(){return{scranType:"camera",radio:""}},methods:{click:function(t){this.radio=t,localStorage.setItem("scranType",t),this.$emit("close","scran")},onClickLeft:function(t){t.flag=!1,this.$emit("close","scran")}},created:function(){var t=localStorage.getItem("scranType");t?this.radio=t:(this.radio=this.scranType,localStorage.setItem("scranType",this.scranType))}},o=n,r=(a("fc43"),a("2877")),c=Object(r["a"])(o,i,s,!1,null,"0c507cc0",null);e["a"]=c.exports},"2b54":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAelJREFUSEvt1s2rTWEUx/HPzR+glExkIGXAgIi8FSYSAyVxzRiQgQEDMULJ24CSATMThYGRTCTq5qUQKYoRMZDMpMxoXc+u7WmfvZ99bqc7uatO5+xzfmt911p7nfXsMdNkY9PENQMu6fwOLMVyrMYsvMFbfMDr9GqN1afVi3Admzuy+4XzONOmKwUfxpWSdtQ0z7FmkE8JeD0mekIr+UcsbvLtAi/A5yGhldse3M5jdIHvYdsUwT+xBF/qcdrAU2lxnutlHC0FH8e5AdXuw43020Y86ujKC6wqBbe1ud6pEnAw5+F7Bc9bPQdbsQ57MXtAJcOAd+JuE3g/TmN+wTDFsLzv0eqQnkiLZdKtynwX7hQAK8kmPE4XK/CywHcct+oVR++/FThWoNjLRzJ9JD239l3c99xW4lUdfKkhUO50DYcKkgtJTHgT+L95iounbTs1wX5jOx52wC/g2ADNp3SCXcSTAP8prCT27hZEgCbbXb+HHTE3BDgGIwakxGJpxPLIbSEeIN5LbLLiOGMPlKiTJv5ypzJ9TGtUXGo/Arw2el7qkXTh8yx9jiRO9vT/Wk3aMM4H04lzvyc05FfrIx5PGPGkMWp7F2s539UxZDG5scmWjSCDmzgb67brQWAE7H8hZ8Aja20e+C+WjkydwZqb9AAAAABJRU5ErkJggg=="},3601:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAVFJREFUOE/VVK9Pw2AQfdeSBUWmMCgkqEmm+jWEEP4AMJhWYFhCyNoNQ8IMgv0iIUEhvhoUBocgZF/V9MwsCoVDkYX2yJZ1axsCadjEzt3l8u7Xu0eYsdGM8TABtERDaNC3GNidFuF3qZyDyLfEdV5DeMGgQqyRHiN49FRFDWMTQFu07gjYCBGex7uOEqeg9QJA+cgn1i5B6EvlHKUA2x1G4HuqUsuyBks0agTdkKpsLhigZTR3aAlv8sXtZxnZ3m5u8hfWPN99ToycBeS33NGVh1UQaLf/AtXD0nC6OA/H19UYCFOE/ymWLB+xY36fYpvNKof06vnOQ5bRLaO1Txqvy45bXzAe2mLWr2e0rkCoAjRSjbH1pCqfxnca/W5MkQQYdek7Z4kdHu7drOQ+B0VmLqbUJiEWltk+BgerE7Uh6g6Wc937p5OP+X1KFpr8lfsNKe+lFe3PHB8AAAAASUVORK5CYII="},"5cac":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card",style:{"background-color":t.data.color}},[i("van-row",{staticClass:"header",style:{borderBottom:t.data.color?"1px dashed #f7f7f7":"1px dashed #DCDCDC"}},[i("van-checkbox",{ref:"checkbox",staticStyle:{overflow:"auto",float:"bottom","font-size":"0.8rem"},attrs:{"checked-color":"rgb(251, 205, 5)","icon-size":"0.8rem"},on:{click:function(e){return t.checkboxclick(t.checked)}},scopedSlots:t._u([{key:"default",fn:function(){return[i("span",{staticClass:"fixed1"},[t._v("\n          程序名称\n        ")]),i("span",{staticClass:"fixed1text"},[t._v("\n         "+t._s(t.data["proName"])+"\n        ")]),i("span",{staticClass:"fixed2"},[t._v("\n            利用率: "+t._s(t.data["proUsedraterem"].toFixed(2))+"%\n        ")])]},proxy:!0}]),model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}})],1),i("div",{staticClass:"body"},[i("van-row",{staticStyle:{"vertical-align":"middle","align-items":"center",display:"flex"}},[i("van-col",{attrs:{span:"18"}},t._l(t.cardField,(function(e){return i("van-row",{key:e.key,attrs:{align:"center"}},[i("van-col",{attrs:{span:"9"}},[i("span",{staticClass:"cardtitle"},[t._v(t._s(e.name))])]),i("van-col",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis"},attrs:{span:"15"}},["input"===e.type?i("span",{staticClass:"cardtext"},[t._v(" "+t._s(t.data[e.key]))]):"number"===e.type?i("span",{staticClass:"cardtext"},[t._v(" "+t._s(t.fomatFloat(e.key,t.data[e.key])))]):"cascader"===e.type?i("span",{staticClass:"cardtext"},[t._v("  "+t._s(t.tableKV[e.key]?t.tableKV[e.key][t.data[e.key]]:t.data[e.key]))]):"select"!==e.type||t.tableKC[e.key][t.data[e.key]]?"select"===e.type&&t.tableKC[e.key][t.data[e.key]]?[i("van-tag",{staticClass:"cardtext",attrs:{color:t.tableKC[e.key][t.data[e.key]]}},[t._v(" "+t._s(t.tableKV[e.key]?t.tableKV[e.key][t.data[e.key]]:t.data[e.key])+"\n              ")])]:i("span",{staticClass:"cardtext"},[t._v(" "+t._s(t.data[e.key]))]):[i("span",{staticClass:"cardtext"},[t._v("\n                "+t._s(t.tableKV[e.key]?t.tableKV[e.key][t.data[e.key]]:t.data[e.key])+"\n              ")])]],2)],1)})),1),i("van-col",{attrs:{span:"2"}},[i("span",{staticStyle:{"font-size":"25px"}},[t._v(t._s(t.data.woOrder))])]),i("van-col",{attrs:{span:"4"}},[i("van-row",[i("van-button",{staticStyle:{width:"100%"},attrs:{color:"#fbce08",size:"mini"},on:{click:function(e){return t.buttonClick("image")}}},[t._v("套料图")])],1),i("van-row",[i("van-button",{staticStyle:{width:"100%"},attrs:{color:"#fbce08",size:"mini"},on:{click:function(e){return t.buttonClick("NC")}}},[t._v("NC")])],1),i("van-row",[i("van-button",{staticStyle:{width:"100%"},attrs:{color:"#fbce08",size:"mini"},on:{click:function(e){return t.buttonClick("detail")}}},[t._v("明细")])],1)],1)],1)],1),i("div",{staticClass:"foot",staticStyle:{"border-top":"1px solid  #ebebeb"}},[i("van-row",[i("van-col",{staticStyle:{"white-space":"nowrap"},attrs:{span:"4"}},[i("div",{staticClass:"fixed3"},[t._v("\n          计划完工时间:"+t._s(t.data["selEndtime"])+"\n        ")])]),i("van-col",{attrs:{span:"20"}},[i("van-button",{staticClass:"detailbutton",attrs:{size:"small",plain:""},on:{click:t.openDetail}},[t._v("\n          查看详情 >\n        ")]),i("van-icon",{staticStyle:{float:"right","margin-right":"20px"},attrs:{name:a("61c4"),size:"18"},on:{click:t.toTop}})],1)],1)],1)],1)},s=[],n=(a("7f7f"),a("456d"),a("ac6a"),a("7618")),o=a("02df"),r={name:"taskCard",props:{baseUrl:{type:String,default:function(){return""}},numberCol:{type:Object,default:function(){return{}}},primaryKeyValue:{type:String,default:function(){return""}},selectItems:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{}}},cardField:{type:Array,default:function(){return[]}}},data:function(){return{checked:!1}},methods:{buttonClick:function(t){this.$emit("buttonClick",t,this.data)},fomatFloat:function(t,e){if(void 0!==e&&""!==e&&null!==e){var a=2;return a=this.numberCol[t]?this.numberCol[t]:o["a"].getAccuracy("4"),"string"==typeof a?o["a"].formTime(a,e):Math.round(e*Math.pow(10,a))/Math.pow(10,a)}},footIconClick:function(){this.$emit("footIconClick",this.data)},getPrimaryKeyValue:function(){return this.primaryKeyValue},btnclick:function(t){this.$emit("cardbtnclick",t,this.data)},openDetail:function(){this.$emit("openDetail",this.data)},checkboxclick:function(t){this.$emit("checkboxclick",t,this.primaryKeyValue,this.data)},click:function(){this.$emit("click")},toTop:function(){this.$emit("toTop",this.data)}},computed:{tableKV:function(){var t=this,e={};return Object.keys(this.selectItems).forEach((function(a){if(t.selectItems[a]&&"object"==Object(n["a"])(t.selectItems[a])){var i={};t.selectItems[a].forEach((function(t){i[t.id]=t.name})),e[a]=i}})),e},tableKC:function(){var t=this,e={};return Object.keys(this.selectItems).forEach((function(a){if(t.selectItems[a]&&"object"==Object(n["a"])(t.selectItems[a])){var i={};t.selectItems[a].forEach((function(t){t.color&&(i[t.id]=t.color)})),e[a]=i}})),console.log(e),e}},created:function(){var t=this.data.checked;t&&(this.checked=!0)}},c=r,l=(a("af7f"),a("2877")),u=Object(l["a"])(c,i,s,!1,null,"7bf6d4ce",null);e["a"]=u.exports},"61c4":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAALFJREFUOE/t1KENwkAYBtBXyypIPDNgwBImQGEJOIZAgAWFRYJlALaBXHJHGmh7FQ2qNW3S3ruvX/+00PFRdOypAk+YttzojFn52b8krAoXEg9wzCVvkzBgoYYndjk0ByZsG5MtsG5Cm8CEhdKHEbzgihUOVa9fB87jggkCsomLw3mEG5bYf6N14Atj3EtQuExwQB/8jl2uwxSgnLDxQ/dgbT19h/WT03Zscj+Zz/3OwTf1fh4V5TmbXgAAAABJRU5ErkJggg=="},"69e8":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("blankPage",{ref:"blankPage",attrs:{title:"切割机床面板"},on:{onClickLeft:t.chooseEquipment,afterMounted:t.afterMountedMain},scopedSlots:t._u([{key:"body",fn:function(){return[t.showChoiceEquipment?t._e():i("equipmentCard",{ref:"equipmentCard",attrs:{data:t.curEquipmentData,chooseable:!1},on:{openDetail:function(e){return t.openEquipmentCardDetail(t.curEquipmentData)},jump:t.jump}}),i("van-row",{ref:"info",staticClass:"title",staticStyle:{background:"#FFFFFF"}},[i("van-col",{staticClass:"title1",attrs:{span:"12"}},[t._v("当前切割程序")]),i("van-col",{staticClass:"title2",attrs:{span:"12"}},[i("span",[t._v("数量："+t._s(t.totalNum))]),i("span",[t._v("   ")]),i("span",[t._v(" 时长："+t._s(t.cutTime))])])],1),i("div",{staticStyle:{overflow:"auto",padding:"5px"},style:{height:t.listHeight-t.cardHeight+"px"}},t._l(t.datas,(function(e){return i("taskCardFixed",{key:e.id,ref:"taskCardFixed",refInFor:!0,attrs:{data:e,showTop:!1},on:{buttonClick:t.taskCardButtonClick,openDetail:function(a){return t.openTaskCardDetail(e)}}})})),1),i("van-row",{ref:"buttons",staticClass:"buttons",attrs:{type:"flex",justify:"space-around"}},[i("van-col",[i("div",{staticStyle:{padding:"5px"}},[i("van-row",{staticClass:"bottomIcon"},[i("van-icon",{attrs:{name:a("8ad5"),size:"25"},on:{click:function(e){return t.buttonClick("scan")}}})],1),i("van-row",{staticClass:"bottomTitle"},[t._v("扫码")])],1)]),i("van-col",[i("div",{staticStyle:{padding:"5px"}},[i("van-row",{staticClass:"bottomIcon"},[i("van-icon",{attrs:{name:a("2b54"),size:"25"},on:{click:function(e){return t.buttonClick("download")}}})],1),i("van-row",{staticClass:"bottomTitle"},[t._v("下载")])],1)]),i("van-col",{directives:[{name:"show",rawName:"v-show",value:0===t.equipmentStatus||10===t.equipmentStatus,expression:"equipmentStatus===0||equipmentStatus===10"}]},[i("div",{staticStyle:{padding:"5px"}},[i("van-row",{staticClass:"bottomIcon"},[i("van-icon",{attrs:{name:a("ac5f"),size:"25"},on:{click:function(e){return t.buttonClick("start")}}})],1),i("van-row",{staticClass:"bottomTitle"},[t._v("开始")])],1)]),i("van-col",{directives:[{name:"show",rawName:"v-show",value:20===t.equipmentStatus,expression:"equipmentStatus===20"}]},[i("div",{staticStyle:{padding:"5px"}},[i("van-row",{staticClass:"bottomIcon"},[i("van-icon",{attrs:{name:a("d5e2"),size:"25"},on:{click:function(e){return t.buttonClick("start")}}})],1),i("van-row",{staticClass:"bottomTitle"},[t._v("暂停")])],1)]),i("van-col",{directives:[{name:"show",rawName:"v-show",value:30===t.equipmentStatus,expression:"equipmentStatus===30"}]},[i("div",{staticStyle:{padding:"5px"}},[i("van-row",{staticClass:"bottomIcon"},[i("van-icon",{attrs:{name:a("df40"),size:"25"},on:{click:function(e){return t.buttonClick("start")}}})],1),i("van-row",{staticClass:"bottomTitle"},[t._v("继续")])],1)]),i("van-col",[i("div",{staticStyle:{padding:"5px"}},[i("van-row",{staticClass:"bottomIcon"},[i("van-icon",{attrs:{name:a("a7de"),size:"25"},on:{click:function(e){return t.buttonClick("finish")}}})],1),i("van-row",{staticClass:"bottomTitle"},[t._v("完工")])],1)]),i("van-col",[i("div",{staticStyle:{padding:"5px"}},[i("van-row",{staticClass:"bottomIcon"},[i("van-icon",{attrs:{name:a("2112"),color:"#FFF",size:"25"},on:{click:function(e){return t.buttonClick("report")}}})],1),i("van-row",{staticClass:"bottomTitle"},[t._v("报工")])],1)])],1)]},proxy:!0}])}),i("van-popup",{staticClass:"baseDetail",style:{width:"100%",height:"100%",backgroundColor:"#F7F7F7"},attrs:{position:"right",transition:"van-fade",duration:"0.3"},model:{value:t.showNC,callback:function(e){t.showNC=e},expression:"showNC"}},[i("blankPage",{ref:"nestNCPage",attrs:{title:"查看NC"},on:{onClickLeft:t.closePopup},scopedSlots:t._u([{key:"body",fn:function(){return[i("div",[i("van-swipe",{style:{backgroundColor:"#F7F7F7"}},t._l(t.nestNCList,(function(e,a){return i("van-swipe-item",{key:a},[i("p",{staticStyle:{"white-space":"pre-wrap",overflow:"auto",padding:"0 10px"},style:{height:t.NCHeight+"px"}},[t._v(t._s(e))])])})),1)],1)]},proxy:!0}])})],1),i("van-popup",{staticClass:"baseDetail",style:{width:"100%",height:"100%",backgroundColor:"#F7F7F7"},attrs:{position:"right",transition:"van-fade",duration:"0.3"},model:{value:t.showNestDetail,callback:function(e){t.showNestDetail=e},expression:"showNestDetail"}},[t.showNestDetail?i("blankPage",{ref:"detailPage",attrs:{title:"查看明细"},on:{onClickLeft:t.closePopup,afterMounted:t.afterMounted},scopedSlots:t._u([{key:"body",fn:function(){return[i("div",{staticClass:"tablePage",staticStyle:{height:"100%"}},[i("van-tabs",{attrs:{"title-active-color":"rgb(97,64,141)"}},t._l(t.detailTags,(function(e){return i("van-tab",{key:e.key,attrs:{title:e.title}},[i("div",{staticStyle:{padding:"10px"}},[i("baseTable",{ref:"baseTable",refInFor:!0,attrs:{columns:t.tableHeader[e.key],data:t.tableData[e.key],height:t.tableHeight}})],1)])})),1)],1)]},proxy:!0}],null,!1,784278871)}):t._e()],1),i("van-popup",{staticClass:"baseDetail",style:{width:"100%",height:"100%",backgroundColor:"#F7F7F7"},attrs:{position:"right",transition:"van-fade",duration:"0.3"},model:{value:t.showChoiceEquipment,callback:function(e){t.showChoiceEquipment=e},expression:"showChoiceEquipment"}},[t.showChoiceEquipment?i("choiceEquipmentSingle",{attrs:{chooseable:!0,showFooter:!0},on:{sure:t.sure}}):t._e()],1),i("van-popup",{staticClass:"baseDetail",style:{width:"100%",height:"100%",backgroundColor:"#F7F7F7"},attrs:{position:"right",transition:"van-fade",duration:"0.3"},model:{value:t.showTaskToBeCut,callback:function(e){t.showTaskToBeCut=e},expression:"showTaskToBeCut"}},[t.showTaskToBeCut?i("taskToBeCut",{attrs:{equipmentId:t.curEquipmentId,equipmentName:t.equipmentName},on:{onClickLeft:t.closeTaskToBeCut,finish:t.finish}}):t._e()],1),t.showDetail?i("baseDetail",{attrs:{baseUrl:t.baseUrl,show:t.showDetail,mdid:t.pcmoduleid,data:t.detaildata,detailtitle:t.detailtitle,selectItems:t.selectItems,xsView:t.detailView},on:{close:t.closeDetail}}):t._e()],1)},s=[],n=(a("5df3"),a("386d"),a("c5f6"),a("ac6a"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("basePage",{ref:"basePage",attrs:{title:"选择设备",rightIcon:"",pcmoduleid:"equipment_2001",onePage:"",buttons:t.buttons,order:{equipmentName:"asc"},selectItems:t.selectItems,btnMethod:t.btnMethod,defualtConditions:t.defualtConditions,checkallable:!1},on:{buttonsClick:t.buttonsClick,onClickLeft:t.onClickLeft,afterquery:t.afterquery},scopedSlots:t._u([{key:"card",fn:function(e){var a=e.slotProps;return[i("equipmentCard",{attrs:{data:a.data,chooseable:!0},on:{openDetail:a.openDetail,checkboxclick:t.checkboxclick,jump:t.jump}})]}},{key:"over",fn:function(){return[i("van-row",{staticStyle:{background:"white",height:"100%"},attrs:{type:"flex"}},[i("van-col",{attrs:{span:"16"}},[i("van-search",{staticStyle:{"font-size":"12px"},attrs:{shape:"round",placeholder:"请输入设备名称"},on:{search:t.searchEquipmentName},scopedSlots:t._u([{key:"right-icon",fn:function(){return[i("van-icon",{attrs:{name:a("3601"),size:"20"},on:{click:t.scan}})]},proxy:!0}]),model:{value:t.equipmentNameSearch,callback:function(e){t.equipmentNameSearch=e},expression:"equipmentNameSearch"}})],1),i("van-col",{staticStyle:{"text-align":"right",height:"100%",display:"flex","justify-content":"flex-end",margin:"auto","font-size":"16px",color:"#666666","padding-right":"5px"},attrs:{span:"8"}},[t._v("\n          设备数： "+t._s(t.totalNum)+"\n        ")])],1)]},proxy:!0}])}),i("van-popup",{staticClass:"baseDetail",style:{width:"100%",height:"100%",backgroundColor:"#F7F7F7"},attrs:{position:"right",transition:"van-fade",duration:"0.3"},model:{value:t.showTaskToBeCut,callback:function(e){t.showTaskToBeCut=e},expression:"showTaskToBeCut"}},[t.showTaskToBeCut?i("taskToBeCut",{attrs:{equipmentId:t.equipmentId,equipmentName:t.equipmentName},on:{onClickLeft:t.closePopup,finish:t.finish}}):t._e()],1)],1)}),o=[],r=a("02df"),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card"},[i("van-row",{staticClass:"header",style:{borderBottom:"1px dashed #DCDCDC"}},[t.chooseable?i("van-checkbox",{ref:"checkbox",staticStyle:{overflow:"auto",float:"bottom","font-size":"0.8rem"},attrs:{"checked-color":"rgb(251, 205, 5)","icon-size":"0.8rem"},on:{click:function(e){return t.checkboxclick(t.checked)}},scopedSlots:t._u([{key:"default",fn:function(){return[i("span",{staticClass:"fixed1"},[t._v("\n          设备名称\n        ")]),i("span",{staticClass:"fixed1text"},[t._v("\n         "+t._s(t.data.equipmentName)+"\n        ")]),i("div",{staticClass:"fixed2"},[1==t.equipmentStatus?i("span",{staticStyle:{background:"#66cc66",padding:"0px 8px"}},[t._v("\n            运行\n          ")]):t._e(),2==t.equipmentStatus?i("span",{staticStyle:{background:"#fbcd05",padding:"0px 8px"}},[t._v("\n            空闲\n          ")]):t._e()])]},proxy:!0}],null,!1,2420624938),model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}}):i("div",{staticStyle:{"margin-left":"1.3rem"}},[i("span",{staticClass:"fixed1"},[t._v("\n          设备名称\n        ")]),i("span",{staticClass:"fixed1text"},[t._v("\n         "+t._s(t.data.equipmentName)+"\n        ")]),i("div",{staticClass:"fixed2"},[1==t.equipmentStatus?i("span",{staticStyle:{background:"#66cc66",padding:"4px 8px"}},[t._v("\n            运行\n        ")]):t._e(),2==t.equipmentStatus?i("span",{staticStyle:{background:"#fbcd05",padding:"4px 8px"}},[t._v("\n            空闲\n        ")]):t._e()])])],1),i("div",{staticClass:"body"},[i("van-row",{staticStyle:{"vertical-align":"middle","align-items":"center",display:"flex"}},[i("van-col",{attrs:{span:"18"}},[i("van-row",{attrs:{align:"center"}},[i("van-col",{attrs:{span:"9"}},[i("span",{staticClass:"cardtitle"},[t._v("待开工数量\n            ")])]),i("van-col",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis"},attrs:{span:"15"}},[i("span",{staticClass:"cardtext"},[t._v(" "+t._s(t.data.collectCutTask&&t.data.collectCutTask.taskNum?t.data.collectCutTask.taskNum:"0")+"\n                "),i("van-icon",{staticStyle:{"margin-left":"18px"},attrs:{name:"eye",size:18,color:"#63428e"},on:{click:t.jump}})],1)])],1),i("van-row",{attrs:{align:"center"}},[i("van-col",{attrs:{span:"9"}},[i("span",{staticClass:"cardtitle"},[t._v("待切割时长")])]),i("van-col",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis"},attrs:{span:"15"}},[i("span",{staticClass:"cardtext"},[t._v(" "+t._s(t.data.collectCutTask&&t.data.collectCutTask.taskTime?t.data.collectCutTask.taskTime:"0m"))])])],1),i("van-row",{attrs:{align:"center"}},[i("van-col",{attrs:{span:"9"}},[i("span",{staticClass:"cardtitle"},[t._v("当前任务")])]),i("van-col",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis"},attrs:{span:"15"}},[i("span",{staticClass:"cardtext"},[t._v(" "+t._s(t.data.collectCutTask&&t.data.collectCutTask.curTask?t.data.collectCutTask.curTask:"-"))])])],1),i("van-row",{attrs:{align:"center"}},[i("van-col",{attrs:{span:"9"}},[i("span",{staticClass:"cardtitle"},[t._v("预计完成时间")])]),i("van-col",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis"},attrs:{span:"15"}},[i("span",{staticClass:"cardtext"},[t._v(t._s(t.data.collectCutTask&&t.data.collectCutTask.predictOvertime?t.data.collectCutTask.predictOvertime:"-"))])])],1)],1),i("van-col",{directives:[{name:"show",rawName:"v-show",value:t.monitorId,expression:"monitorId"}],attrs:{span:"6"}},[i("van-icon",{attrs:{name:a("1d04"),size:"50"},on:{click:t.openMonitor}})],1)],1)],1),i("div",{staticClass:"foot",staticStyle:{"border-top":"1px solid  #ebebeb"}},[i("van-row",[i("van-col",{staticStyle:{"white-space":"nowrap"},attrs:{span:"4"}},[i("div",{staticClass:"fixed3"},[t._v("\n          割嘴数量:"+t._s(t.data.equipmentNozzle)+"\n        ")])]),i("van-col",{attrs:{span:"20"}},[i("van-button",{staticClass:"detailbutton",attrs:{size:"small",plain:""},on:{click:t.openDetail}},[t._v("查看详情 >\n        ")])],1)],1)],1),i("transition",{attrs:{name:"van-fade"}},[t.showMonitor?i("base-video",{ref:"video",attrs:{monitorId:t.monitorId,width:t.width},on:{close:t.closeMonitor}}):t._e()],1)],1)},l=[],u={name:"equipmentCard",props:{data:{type:Object,default:function(){return{}}},chooseable:{type:Boolean,default:function(){return!0}}},data:function(){return{width:0,monitorId:"",showMonitor:!1,checked:!1,equipmentStatus:0}},methods:{closeMonitor:function(){this.showMonitor=!1},openMonitor:function(){this.showMonitor=!0;var t=this;this.$nextTick((function(){t.$refs.video.load()}))},openDetail:function(){this.$emit("openDetail",this.data)},checkboxclick:function(t){this.$emit("checkboxclick",t,this.data)},click:function(){this.$emit("click")},jump:function(){this.$emit("jump",this.data.id,this.data.equipmentName)}},created:function(){var t=this;this.$ajax("/common/commonitor/findmonitor","",{equipmentCode:this.data.equipmentCode,monitorPosition:"下"},(function(e){var a=e.data.data;t.monitorId=a.id}))},mounted:function(){this.width=this.$el.clientWidth,this.$emit("onMounted",this.$el.offsetHeight)},watch:{"data.collectCutTask":{handler:function(t){t&&t.curTask?this.equipmentStatus=1:this.equipmentStatus=2},immediate:!0,deep:!0}}},d=u,p=(a("0149"),a("2877")),m=Object(p["a"])(d,c,l,!1,null,"1a1a1d4f",null),h=m.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("basePage",{ref:"basePage",attrs:{title:"待切割任务",moduleid:"nest_0006",pcmoduleid:"manufacture_4001",onePage:"",draggable:!0,cascadeItems:t.cascadeItems,buttons:t.buttons,footerText:t.footerText,immediateQuery:!1,selectItems:t.selectItems,btnMethod:t.btnMethod,defualtConditions:t.defualtConditions},on:{cardsort:t.cardsort,buttonsClick:t.buttonsClick,onClickLeft:t.onClickLeft,afterquery:t.afterquery,afterDataInit:t.afterDataInit,beforecheckall:t.beforecheckall},scopedSlots:t._u([{key:"card",fn:function(e){var i=e.slotProps;return[a("taskCard",{attrs:{data:i.data,"select-items":t.selectItems,cardField:i.cardField},on:{openDetail:i.openDetail,buttonClick:t.carButtonClick,checkboxclick:t.choice,toTop:t.toTop}})]}},{key:"over",fn:function(){return[a("van-row",{staticStyle:{background:"white",height:"100%"},attrs:{type:"flex"}},[a("van-col",{attrs:{span:"16"}},[a("div",{staticClass:"equipmentBox"},[a("span",{staticClass:"equipmentTitle"},[t._v("设备名称 : ")]),a("span",{staticClass:"equipmentName"},[t._v(t._s(t.localEquipmentName))])])]),a("van-col",{staticStyle:{"text-align":"right",height:"100%",display:"flex","justify-content":"flex-end",margin:"auto","font-size":"16px",color:"#666666","padding-right":"5px"},attrs:{span:"8"}},[t._v("\n          总数量： "+t._s(t.totalNum)+"\n        ")])],1)]},proxy:!0}])}),a("van-popup",{staticClass:"baseDetail",style:{width:"100%",height:"100%",backgroundColor:"#F7F7F7"},attrs:{position:"right",transition:"van-fade",duration:"0.3"},model:{value:t.showNC,callback:function(e){t.showNC=e},expression:"showNC"}},[a("blankPage",{ref:"nestNCPage",attrs:{title:"查看NC"},on:{onClickLeft:t.closePopup},scopedSlots:t._u([{key:"body",fn:function(){return[a("div",[a("van-swipe",{style:{backgroundColor:"#F7F7F7"}},t._l(t.nestNCList,(function(e,i){return a("van-swipe-item",{key:i},[a("p",{staticStyle:{"white-space":"pre-wrap",overflow:"auto",padding:"0 10px"},style:{height:t.NCHeight+"px"}},[t._v(t._s(e))])])})),1)],1)]},proxy:!0}])})],1),a("van-popup",{staticClass:"baseDetail",style:{width:"100%",height:"100%",backgroundColor:"#F7F7F7"},attrs:{position:"right",transition:"van-fade",duration:"0.3"},model:{value:t.showNestDetail,callback:function(e){t.showNestDetail=e},expression:"showNestDetail"}},[t.showNestDetail?a("blankPage",{ref:"detailPage",attrs:{title:"查看明细"},on:{onClickLeft:t.closePopup,afterMounted:t.afterMounted},scopedSlots:t._u([{key:"body",fn:function(){return[a("div",{staticClass:"tablePage",staticStyle:{height:"100%"}},[a("van-tabs",{attrs:{"title-active-color":"rgb(97,64,141)"}},t._l(t.detailTags,(function(e){return a("van-tab",{key:e.key,attrs:{title:e.title}},[a("div",{staticStyle:{padding:"10px"}},[a("baseTable",{ref:"baseTable",refInFor:!0,attrs:{columns:t.tableHeader[e.key],data:t.tableData[e.key],height:t.tableHeight}})],1)])})),1)],1)]},proxy:!0}],null,!1,784278871)}):t._e()],1)],1)},k=[],v=(a("7f7f"),a("75fc")),g=a("d399"),y=a("28a2"),A=a("5cac"),C={name:"taskToBeCut",components:{taskCard:A["a"]},props:{showFooter:{type:Boolean,default:function(){return!1}},equipmentId:{type:String,default:function(){return""}},equipmentName:{type:String,default:function(){return""}}},data:function(){return{outboundNeeded:"",localEquipmentName:"",NCHeight:0,detailTags:[{key:"nestingPlate",title:"套料板材"},{key:"nestedPartsSummary",title:"套料零件汇总"},{key:"nestingPartsDetails",title:"套料零件明细"},{key:"cutOffTheRemainder",title:"截取余料"}],tableQueryUrl:[{key:"nestingPlate",paramName:"proMatCode",url:"/nest/nestprogrammat/autopageNew"},{key:"nestedPartsSummary",paramName:"partProCode",url:"/nest/nestparts/autopage"},{key:"nestingPartsDetails",paramName:"partlistProCode",url:"/nest/nestpartlist/autopage"},{key:"cutOffTheRemainder",paramName:"remProCode",url:"/nest/nestrem/autopage"}],tableData:{nestingPlate:[],nestedPartsSummary:[],nestingPartsDetails:[],cutOffTheRemainder:[]},tableHeader:{nestingPlate:[{key:"proMatName",title:"套料钢板名"},{key:"proMatSheettype",title:"材料类型"},{key:"remStatus",title:"余料状态"},{key:"proMatMaterial",title:"材质"},{key:"proMatThickness",title:"厚度"},{key:"proMatLength",title:"长度"},{key:"proMatWidth",title:"宽度"},{key:"proMatArea",title:"面积"},{key:"proMatWeight",title:"重量"},{key:"proMatField1",title:"数据1"},{key:"proMatField2",title:"数据2"},{key:"proMatField3",title:"数据3"},{key:"proMatField4",title:"数据4"}],nestedPartsSummary:[{key:"partField1",title:"项目号"},{key:"partGroupId",title:"套料序号"},{key:"partMbomCode",title:"物料编码"},{key:"partDrawcode",title:"图号"},{key:"partNestedsum",title:"套料数量"},{key:"partArea",title:"净面积"},{key:"partWeight",title:"净重量"},{key:"partPiercessum",title:"穿孔数"},{key:"partCutlength",title:"切割长度"},{key:"partCuttime",title:"切割时间"},{key:"partLength",title:"零件长度"},{key:"partWidth",title:"零件宽度"}],nestingPartsDetails:[{key:"partField1",title:"项目号"},{key:"nestedPartId",title:"套料序号"},{key:"partMbomCode",title:"物料编码"},{key:"partDrawcode",title:"图号"},{key:"partlistRowcode",title:"唯一码"},{key:"partlistCutrowid",title:"切割时序"},{key:"partlistNestedsum",title:"套料数量"},{key:"partArea",title:"净面积"},{key:"partWeight",title:"净重量"},{key:"partPiercessum",title:"穿孔数"},{key:"partCutlength",title:"切割长度"},{key:"partlistLength",title:"零件长度"},{key:"partlistWidth",title:"零件宽度"}],cutOffTheRemainder:[{key:"remName",title:"余料名称"},{key:"remMaterial",title:"材质"},{key:"remThickness",title:"厚度"},{key:"remLength",title:"长度"},{key:"remWidth",title:"宽度"},{key:"remArea",title:"面积"},{key:"remWeight",title:"重量"},{key:"remField1",title:"数据1"},{key:"remField2",title:"数据2"},{key:"remField3",title:"数据3"},{key:"remField4",title:"数据4"}]},tableHeight:0,showNC:!1,showNestDetail:!1,buttons:[{key:"start",name:"进入切割"},{key:"rollback",name:"撤回切割"}],footerText:[{key:"num",display:"数量",value:0}],totalNum:0,teamOptions:[],selectItems:{woDownloadStatus:[{id:"0",name:"未下载",color:"#ff0000"},{id:"10",name:"已下载",color:"#009900"}],woStatus:[{id:"0",name:"未切割",color:"#666666"},{id:"10",name:"待切割",color:"#ffcc00"},{id:"20",name:"切割中",color:"#009900"},{id:"30",name:"暂停中",color:"#6666cc"},{id:"40",name:"已切割",color:"#ff0000"},{id:"50",name:"已挂起",color:"#61408c"}],woTeamId:[],woEquipmentId:[],isPreparation:[{id:0,name:"未配送"},{id:1,name:"部分配送"},{id:2,name:"已配送"}],overdueFlag:[{id:1,name:"未超期"},{id:0,name:"超期"}],proMattype:[],woPreStatus:[{id:0,name:"未备料",color:"#ff0000"},{id:1,name:"部分备料",color:"#ffcc00"},{id:2,name:"已备料",color:"#009900"}]},cascadeItems:{woTeamId:[]},btnMethod:{querymethod:"/nest/cutworkorder/tobecutautopage"},defualtConditions:[{key:"woEquipmentId",value:"",exp:"="}]}},methods:{afterMounted:function(){var t=this.$refs.detailPage.bodyheight,e=document.getElementsByClassName("van-tabs__nav")[0].offsetHeight;this.tableHeight=t-e-15},onClickLeft:function(t){this.$emit("onClickLeft",t)},afterquery:function(t,e){this.totalNum=t.total,e.value.woEquipmentId&&(this.localEquipmentName=this.selectItems.woEquipmentId.filter((function(t){return t.id===e.value.woEquipmentId}))[0].name),t.records.forEach((function(t){return t["zhzd"]=t.proThickness+"*"+t.proUsedwidth+"*"+t.proUsedlength}))},afterDataInit:function(t){var e=t.records;this.$refs.basePage.ischeckall()?this.footerText=[{key:"num",display:"数量",value:e.length}]:this.footerText=[{key:"num",display:"数量",value:0}]},initSelect:function(){var t=this;this.$ajax("/common/comteam/treelistgroupbydep","",{teamType:0},(function(e){var a,i=[],s={id:"N/A",name:"未派发",checkable:!0};i.push(s),i.push.apply(i,Object(v["a"])(t.cascadehandler(e.data.data))),(a=t.cascadeItems.woTeamId).push.apply(a,i)})),this.selectItems.proMattype=r["a"].getDict("WMS_MAT_TYPE"),this.$ajax("/common/comequipment/getequipmentbycuruser","",{},(function(e){var a=[],i={id:"N/A",name:"未派发"};a.push(i);var s=e.data.data;s.forEach((function(t){var e={id:t.id,name:t.equipmentName};a.push(e)})),t.selectItems.woEquipmentId=a})),this.$ajax("/common/comteam/getteambytype","",{teamType:0},(function(e){var a=[],i={id:"N/A",name:"未派发"};a.push(i);var s=e.data.data;s.forEach((function(t){var e={id:t.id,name:t.teamName};a.push(e)})),t.selectItems.woTeamId=a}))},cascadehandler:function(t){var e=this,a=[];return t.forEach((function(t){var i={checkable:!0,id:t.value,name:t.label};t.children&&(i.children=e.cascadehandler(t.children)),a.push(i)})),a},buttonsClick:function(t){var e=this,a=this.$refs.basePage.$refs.baseList.$refs.list.$children[0].$children,i=[];if(i=a.filter((function(t){return t.$refs.checkbox.checked})).map((function(t){return t.data})),0!==i.length){if("start"===t){g["a"].loading({forbidClick:!0,duration:0});var s=[],n="",o="",r=!1;if(i.forEach((function(t,a){0!==a&&o!==t["proGroupId"]&&(r=!0),n=t["woProCode"],o=t["proGroupId"];var i={matId:t["matId"],id:t["id"],proGroupId:t["proGroupId"],woCode:t["woCode"],woEquipmentId:e.equipmentId,woProCode:n};s.push(i)})),r)return g["a"].fail("请加入程序名称一致的程序"),!1;if(!1===this.outboundNeeded){for(var c=!0,l=0;l<i.length;l++){var u=i[l];if(2!=u.woPreStatus){c=!1;break}}if(0==c)return g["a"].fail("钢板还未完成出库，请先完成出库备料"),!1}this.$ajax("/nest/cutworkorder/joincut","",s,(function(t){g["a"].success("成功"),e.$emit("finish",e.equipmentId)}))}else if("rollback"===t&&i.length){var d=[];i.forEach((function(t){var e={id:t["id"],woCutIds:t["matId"]};d.push(e)})),this.$ajax("/nest/cutworkorder/dobackcut","",d,(function(){g["a"].success("成功"),e.$refs.basePage.search()}))}}else g["a"].fail("未选中数据!")},cardsort:function(t){var e=this;console.log(t);var a=t.newIndex,i=t.oldIndex;if(a-i===0)return!1;var s={oriId:this.$refs.basePage.datas[i].id,afterId:this.$refs.basePage.datas[a].id,equipmentId:this.equipmentId};this.$ajax("/nest/cutworkorder/dropupdate","",s,(function(){return e.$refs.basePage.search()}))},carButtonClick:function(t,e){var a=this;"image"===t?this.$ajax("/nest/nestpicfile/getpicfileargs","",{picFileBussid:e.woProCode,picFileBusstype:"NESTFILE"},(function(t){var e=t.data.data,i=[];e.forEach((function(t){var e=a.getBaseUrl()+t.picFileUrl;i.push(e)})),Object(y["a"])(i)})):"NC"===t?this.getNC(e.woProCode):"detail"===t&&(this.tableQueryUrl.forEach((function(t){var i={};i[t.paramName]=e.woProCode;var s={};s[t.paramName]="=",a.$ajax(t.url,"",{current:1,rows:100,value:i,exp:s,order:{}},(function(e){var i=e.data.data.records;i.forEach((function(t){for(var e in a.numberCol)if(t.hasOwnProperty(e)){var i=a.numberCol[e];t[e]=Math.round(t[e]*Math.pow(10,i))/Math.pow(10,i)}})),a.tableData[t.key]=i}))})),this.showNestDetail=!0)},getNC:function(t){var e=this;this.$ajax("/nest/nestpicfile/getpicfileargs","",{picFileBussid:t,picFileBusstype:"NCFILE",picFileLast:1},(function(t){var a=t.data.data,i=[];a.forEach((function(t){var a=t.picFileUrl;i.push(e.$getRequest(a))})),Promise.all(i).then((function(t){var a=[];t.forEach((function(t){var e=t.data;a.push(e)})),e.nestNCList=a,e.nestNCList.length>0&&(e.showNC=!0)}))}))},choice:function(t){!t&&this.$refs.basePage.ischeckall()&&(this.$refs.basePage.checkAll=!1);var e=this.$refs.basePage.$refs.baseList.$refs.list.$children[0].$children;e=e.filter((function(t){return!0===t.checked})),this.footerText=[{key:"num",display:"数量",value:e.length}]},toTop:function(t){var e=this;this.$ajax("/nest/cutworkorder/toporder","",{oriId:t.id,equipmentId:this.equipmentId},(function(){return e.$refs.basePage.search()}))},beforecheckall:function(t){t.flag=!1;var e=this.$refs.basePage.$refs.baseList.$refs.list.$children[0].$children;this.$refs.basePage.ischeckall()?(e.forEach((function(t){t.checked=!0})),this.footerText=[{key:"num",display:"数量",value:this.$refs.basePage.total}]):(e.forEach((function(t){t.checked=!1})),this.footerText=[{key:"num",display:"数量",value:0}])},closePopup:function(t){t.flag=!1,this.showNC=!1,this.showNestDetail=!1,this.$refs.basePage.search()}},created:function(){var t=this;this.initSelect();var e={configType:"needOutbound",configModule:"SYSTEM",configKey:"SET"};this.$ajax("/auth/sysconfig/get","",e,(function(e){e&&e.data&&(t.outboundNeeded="1"===e.data.data.configValue)}))},mounted:function(){this.equipmentId&&(this.localEquipmentName=this.equipmentName,this.$set(this.defualtConditions[0],"value",this.equipmentId),this.$refs.basePage.search()),this.NCHeight=window.innerHeight-this.$refs.basePage.baseNavigationh,Object(g["a"])("可以通过拖动进行排序切割顺序优先级")}},b=C,w=(a("6b60"),Object(p["a"])(b,f,k,!1,null,"55058b4f",null)),x=w.exports,S={name:"choiceEquipmentSingle",components:{equipmentCard:h,taskToBeCut:x},props:{},data:function(){return{equipmentId:"",equipmentName:"",equipmentNameSearch:"",showTaskToBeCut:!1,buttons:[{key:"sure",name:"确定"}],totalNum:0,selectItems:{equipmentType:[],equipmentEnable:[{id:0,name:"停用"},{id:1,name:"启用"}],equipmentStoreid:[],equipmentProcessedStoreid:[],equipmentPerson:[],equipmentStackid:[],equipmentProcessedStackid:[],equipmentTeam:[]},btnMethod:{querymethod:"/common/comequipment/cutWorkEquipmentAutoPage"},defualtConditions:[{key:"equipmentName",value:"",exp:"like"},{key:"xs_module",value:"manufacture_4002",exp:"="},{key:"xs_view",value:"view1",exp:"="}]}},methods:{finish:function(t){var e=this.$refs.basePage.$refs.baseList.$refs.list.$children[0].$children;e=e.filter((function(e){return e.data.id===t})),this.showTaskToBeCut=!1,this.$emit("sure",e[0].data)},scan:function(){var t=localStorage.getItem("equipmentType");t&&"XUESI2"==t?sc.scanUTStart(this.scanning):sc.scanStart(this.scanning)},scanning:function(t){var e=localStorage.getItem("equipmentType");e&&"XUESI2"==e?sc.initUTScan(void 0):sc.initScan(void 0),this.equipmentNameSearch=t.data,t.data?this.searchEquipmentName():this.$toast.fail("还未扫码")},onClickLeft:function(t){this.$emit("onClickLeft",t)},afterquery:function(t){this.totalNum=t.total},initSelect:function(){var t=this;this.$ajax("/common/comteam/list","",{},(function(e){if(1e7==e.data.errorCode){var a=e.data.data;a.reverse(),t.selectItems.equipmentTeam=e.data.data.map((function(t){return{name:t.teamName,id:t.id}}))}})),this.selectItems.equipmentType=r["a"].getDict("EQUIPMENT_TYPE"),this.$ajax("/wms/wmsstore/list","",{},(function(e){var a=[];e.data.data.forEach((function(t){var e={id:t.id,name:t.storeName};a.push(e)})),t.selectItems.equipmentStoreid=a,t.selectItems.equipmentProcessedStoreid=a})),this.$ajax("/auth/user/listuser","",{},(function(e){var a=[];e.data.data.forEach((function(t){var e={id:t.id,name:t.userRealname};a.push(e)})),t.selectItems.equipmentPerson=a})),this.$ajax("/wms/wmsstack/list","",{},(function(e){var a=[];e.data.data.forEach((function(t){var e={id:t.id,name:t.stackName};a.push(e)})),t.selectItems.equipmentStackid=a,t.selectItems.equipmentProcessedStackid=a}))},buttonsClick:function(t){if("sure"===t){var e=this.$refs.basePage.$refs.baseList.$refs.list.$children[0].$children;e=e.filter((function(t){return!0===t.checked})),this.$emit("sure",e[0].data)}},jump:function(t,e){this.equipmentId=t,this.equipmentName=e,this.showTaskToBeCut=!0},checkboxclick:function(t,e){if(t){var a=this.$refs.basePage.$refs.baseList.$refs.list.$children[0].$children;a.forEach((function(t){t.data.id!=e.id&&(t.checked=!1)}))}},closePopup:function(t){t.flag=!1,this.showTaskToBeCut=!1,this.$refs.basePage.search()},searchEquipmentName:function(){this.$set(this.defualtConditions[0],"value",this.equipmentNameSearch),this.$refs.basePage.search()}},created:function(){this.initSelect()}},E=S,T=(a("c9ce"),Object(p["a"])(E,n,o,!1,null,"916cb2dc",null)),q=T.exports,N=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card",style:{"background-color":t.data.color}},[i("van-row",{staticClass:"header",style:{borderBottom:t.data.color?"1px dashed #f7f7f7":"1px dashed #DCDCDC"}},[i("div",{staticStyle:{"margin-left":"1.3rem"}},[i("span",{staticClass:"fixed1"},[t._v("\n          程序名称\n      ")]),i("span",{staticClass:"fixed1text"},[t._v("\n         "+t._s(t.data["proName"])+"\n      ")]),i("span",{staticClass:"fixed2"},[t._v("\n            利用率: "+t._s(t.data["proUsedraterem"].toFixed(2))+"%\n      ")])])]),i("div",{staticClass:"body"},[i("van-row",{staticStyle:{"vertical-align":"middle","align-items":"center",display:"flex"}},[i("van-col",{attrs:{span:"19"}},[i("van-row",{attrs:{align:"center"}},[i("van-col",{attrs:{span:"9"}},[i("span",{staticClass:"cardtitle"},[t._v("材质\n            ")])]),i("van-col",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis"},attrs:{span:"15"}},[i("span",{staticClass:"cardtext"},[t._v(" "+t._s(t.data.proMaterial)+"\n            ")])])],1),i("van-row",{attrs:{align:"center"}},[i("van-col",{attrs:{span:"9"}},[i("span",{staticClass:"cardtitle"},[t._v("规格")])]),i("van-col",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis"},attrs:{span:"15"}},[i("span",{staticClass:"cardtext"},[t._v(" "+t._s(t.data.proThickness)+"*"+t._s(t.data.proUsedwidth)+"*"+t._s(t.data.proUsedlength))])])],1),i("van-row",{attrs:{align:"center"}},[i("van-col",{attrs:{span:"9"}},[i("span",{staticClass:"cardtitle"},[t._v("工单状态")])]),i("van-col",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis"},attrs:{span:"15"}},["0"===t.data.woStatus?i("van-tag",{staticClass:"cardtext",attrs:{color:"#666666"}},[t._v("未切割")]):t._e(),"10"===t.data.woStatus?i("van-tag",{staticClass:"cardtext",attrs:{color:"#ffcc00"}},[t._v("待切割")]):t._e(),"20"===t.data.woStatus?i("van-tag",{staticClass:"cardtext",attrs:{color:"#009900"}},[t._v("切割中")]):t._e(),"30"===t.data.woStatus?i("van-tag",{staticClass:"cardtext",attrs:{color:"#6666cc"}},[t._v("暂停中")]):t._e(),"40"===t.data.woStatus?i("van-tag",{staticClass:"cardtext",attrs:{color:"#ff0000"}},[t._v("已切割")]):t._e(),"50"===t.data.woStatus?i("van-tag",{staticClass:"cardtext",attrs:{color:"#61408c"}},[t._v("已挂起")]):t._e()],1)],1),i("van-row",{attrs:{align:"center"}},[i("van-col",{attrs:{span:"9"}},[i("span",{staticClass:"cardtitle"},[t._v("下载状态")])]),i("van-col",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis"},attrs:{span:"15"}},["0"===t.data.woDownloadStatus?i("van-tag",{staticClass:"cardtext",attrs:{color:"#ff0000"}},[t._v("未下载")]):t._e(),"1"===t.data.woDownloadStatus?i("van-tag",{staticClass:"cardtext",attrs:{color:"#009900"}},[t._v("已下载")]):t._e()],1)],1)],1),i("van-col",{attrs:{span:"5"}},[i("van-row",[i("van-button",{staticStyle:{width:"100%"},attrs:{color:"#fbce08",size:"mini"},on:{click:function(e){return t.buttonClick("image")}}},[t._v("套料图")])],1),i("van-row",[i("van-button",{staticStyle:{width:"100%"},attrs:{color:"#fbce08",size:"mini"},on:{click:function(e){return t.buttonClick("NC")}}},[t._v("NC")])],1),i("van-row",[i("van-button",{staticStyle:{width:"100%"},attrs:{color:"#fbce08",size:"mini"},on:{click:function(e){return t.buttonClick("detail")}}},[t._v("明细")])],1)],1)],1)],1),i("div",{staticClass:"foot",staticStyle:{"border-top":"1px solid  #ebebeb"}},[i("van-row",[i("van-col",{staticStyle:{"white-space":"nowrap"},attrs:{span:"4"}},[i("div",{staticClass:"fixed3"},[t._v("\n          计划完工时间:"+t._s(t.data["selEndtime"])+"\n        ")])]),i("van-col",{attrs:{span:"20"}},[i("van-button",{staticClass:"detailbutton",attrs:{size:"small",plain:""},on:{click:t.openDetail}},[t._v("查看详情 >\n        ")]),t.showTop?i("van-icon",{staticStyle:{float:"right","margin-right":"20px"},attrs:{name:a("61c4"),size:"18"},on:{click:t.toTop}}):t._e()],1)],1)],1)],1)},I=[],F={name:"taskCardFixed",props:{showTop:{type:Boolean,default:function(){return!0}},baseUrl:{type:String,default:function(){return""}},numberCol:{type:Object,default:function(){return{}}},primaryKeyValue:{type:String,default:function(){return""}},selectItems:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{}}}},data:function(){return{checked:!1}},methods:{buttonClick:function(t){this.$emit("buttonClick",t,this.data)},fomatFloat:function(t,e){if(void 0!==e&&""!==e&&null!==e){var a=2;return a=this.numberCol[t]?this.numberCol[t]:r["a"].getAccuracy("4"),"string"==typeof a?r["a"].formTime(a,e):Math.round(e*Math.pow(10,a))/Math.pow(10,a)}},footIconClick:function(){this.$emit("footIconClick",this.data)},getPrimaryKeyValue:function(){return this.primaryKeyValue},btnclick:function(t){this.$emit("cardbtnclick",t,this.data)},openDetail:function(){this.$emit("openDetail",this.data)},checkboxclick:function(t){this.$emit("checkboxclick",t,this.primaryKeyValue,this.data)},click:function(){this.$emit("click")},toTop:function(){this.$emit("toTop",this.data)}},created:function(){var t=this.data.checked;t&&(this.checked=!0)}},P=F,M=(a("0d61"),Object(p["a"])(P,N,I,!1,null,"15b1986b",null)),D=M.exports,B=(a("2769"),{name:"cuttingPanel",components:{choiceEquipmentSingle:q,equipmentCard:h,taskCardFixed:D,taskToBeCut:x},data:function(){return{cardHeight:0,showDetail:!1,baseUrl:"",pcmoduleid:"",detaildata:{},detailtitle:"",detailView:"",listHeight:0,tableHeight:0,curEquipmentData:{},curEquipmentId:"",datas:[],showChoiceEquipment:!0,numberCol:{ovdThickness:r["a"].getAccuracy("2"),partCuttime:r["a"].getAccuracy("4"),proMatWeight:r["a"].getAccuracy("4"),partArea:r["a"].getAccuracy("4"),partWeight:r["a"].getAccuracy("4"),partCutlength:r["a"].getAccuracy("4"),partlistLength:r["a"].getAccuracy("4"),partlistWidth:r["a"].getAccuracy("4"),remThickness:r["a"].getAccuracy("2"),remLength:r["a"].getAccuracy("4"),remWidth:r["a"].getAccuracy("4"),remArea:r["a"].getAccuracy("4"),remWeight:r["a"].getAccuracy("4")},showNC:!1,showNestDetail:!1,NCHeight:0,nestNCList:[],detailTags:[{key:"nestingPlate",title:"套料板材"},{key:"nestedPartsSummary",title:"套料零件汇总"},{key:"nestingPartsDetails",title:"套料零件明细"},{key:"cutOffTheRemainder",title:"截取余料"}],tableQueryUrl:[{key:"nestingPlate",paramName:"proMatCode",url:"/nest/nestprogrammat/autopageNew"},{key:"nestedPartsSummary",paramName:"partProCode",url:"/nest/nestparts/autopage"},{key:"nestingPartsDetails",paramName:"partlistProCode",url:"/nest/nestpartlist/autopage"},{key:"cutOffTheRemainder",paramName:"remProCode",url:"/nest/nestrem/autopage"}],tableData:{nestingPlate:[],nestedPartsSummary:[],nestingPartsDetails:[],cutOffTheRemainder:[]},tableHeader:{nestingPlate:[{key:"proMatName",title:"套料钢板名"},{key:"proMatSheettype",title:"材料类型"},{key:"remStatus",title:"余料状态"},{key:"proMatMaterial",title:"材质"},{key:"proMatThickness",title:"厚度"},{key:"proMatLength",title:"长度"},{key:"proMatWidth",title:"宽度"},{key:"proMatArea",title:"面积"},{key:"proMatWeight",title:"重量"},{key:"proMatField1",title:"数据1"},{key:"proMatField2",title:"数据2"},{key:"proMatField3",title:"数据3"},{key:"proMatField4",title:"数据4"}],nestedPartsSummary:[{key:"partField1",title:"项目号"},{key:"partGroupId",title:"套料序号"},{key:"partMbomCode",title:"物料编码"},{key:"partDrawcode",title:"图号"},{key:"partNestedsum",title:"套料数量"},{key:"partArea",title:"净面积"},{key:"partWeight",title:"净重量"},{key:"partPiercessum",title:"穿孔数"},{key:"partCutlength",title:"切割长度"},{key:"partCuttime",title:"切割时间"},{key:"partLength",title:"零件长度"},{key:"partWidth",title:"零件宽度"}],nestingPartsDetails:[{key:"partField1",title:"项目号"},{key:"nestedPartId",title:"套料序号"},{key:"partMbomCode",title:"物料编码"},{key:"partDrawcode",title:"图号"},{key:"partlistRowcode",title:"唯一码"},{key:"partlistCutrowid",title:"切割时序"},{key:"partlistNestedsum",title:"套料数量"},{key:"partArea",title:"净面积"},{key:"partWeight",title:"净重量"},{key:"partPiercessum",title:"穿孔数"},{key:"partCutlength",title:"切割长度"},{key:"partlistLength",title:"零件长度"},{key:"partlistWidth",title:"零件宽度"}],cutOffTheRemainder:[{key:"remName",title:"余料名称"},{key:"remMaterial",title:"材质"},{key:"remThickness",title:"厚度"},{key:"remLength",title:"长度"},{key:"remWidth",title:"宽度"},{key:"remArea",title:"面积"},{key:"remWeight",title:"重量"},{key:"remField1",title:"数据1"},{key:"remField2",title:"数据2"},{key:"remField3",title:"数据3"},{key:"remField4",title:"数据4"}]},selectItems:{equipmentStackid:[],equipmentProcessedStackid:[],equipmentTeam:[],equipmentType:[],equipmentEnable:[{id:0,name:"停用"},{id:1,name:"启用"}],equipmentStoreid:[],equipmentProcessedStoreid:[],equipmentPerson:[],woTeamId:[],isPreparation:[{id:0,name:"未配送"},{id:1,name:"部分配送"},{id:2,name:"已配送"}],overdueFlag:[{id:1,name:"未超期"},{id:0,name:"超期"}],proMattype:[],woDownloadStatus:[{id:"0",name:"未下载"},{id:"1",name:"已下载"}],woEquipmentId:[],woLoadStatus:[{id:"0",name:"未上料"},{id:"1",name:"已上料"}],woPreStatus:[{id:0,name:"未备料"},{id:1,name:"部分备料"},{id:2,name:"已备料"}],woReportStatus:[{id:0,name:"未报工"},{id:10,name:"部分报工"},{id:20,name:"全部报工"},{id:30,name:"已报工"}],woStatus:[]},btnMethod:{querymethod:"/nest/cutworkorder/autopage"},totalNum:0,cutTime:"0m",equipmentName:"",showTaskToBeCut:!1,equipmentStatus:0}},methods:{search:function(){var t=this,e={rows:99999,current:1,exp:{woEquipmentId:"=",woStatus:"in"},value:{woEquipmentId:this.curEquipmentId,woStatus:"10,20,30"},slaves:{},order:{}};this.$ajax("/nest/cutworkorder/tobecutautopage","",e,(function(e){var a=e.data.data.records;t.datas=a,t.totalNum=a.length;var i=0;a.forEach((function(t){i+=t.proCuttime})),t.equipmentStatus=0,a&&a.length>0&&(t.equipmentStatus=Number(a[0].woStatus)),t.cutTime=r["a"].formTime("Hm",i)}))},buttonClick:function(t){var e=this;if("scan"===t){var a=localStorage.getItem("scranType");if(a||(a="camera",localStorage.setItem("scranType",a)),"camera"===a){if(!confirmPer("camera"))return;var i="html/fnscanner_frm.html";api.openWin({name:"fnscanner_frm",url:i,slidBackEnabled:!1})}else{var s=localStorage.getItem("equipmentType");sc.scanStart(this.scanning),s&&"XUESI2"==s?sc.scanUTStart(this.scanning):sc.scanStart(this.scanning)}}else if("download"===t){if(!this.datas||0===this.datas.length)return;var n=[];this.datas.forEach((function(t){var e={id:t.id,name:t.proName,field1:t.woEquipmentId,field2:t.woProCode};n.push(e)})),this.$ajax("/nest/cutworkorder/downloadnc","",n,(function(){g["a"].success("下载程序成功"),e.$ajax("/nest/cutworkorder/collectcuttask","",{id:e.curEquipmentId},(function(t){var a=t.data.data;e.curEquipmentData.collectCutTask=a,e.search()}))}))}else if("start"===t){if(!this.datas||0===this.datas.length)return;var o=[],r=this.datas.filter((function(t){return 40!=t.woStatus}));r.forEach((function(t){var e={id:t.id};o.push(e)})),0===this.equipmentStatus||10===this.equipmentStatus?this.$ajax("/nest/cutworkorder/startcut","",o,(function(){e.$ajax("/nest/cutworkorder/collectcuttask","",{id:e.curEquipmentId},(function(t){var a=t.data.data;e.curEquipmentData.collectCutTask=a,e.search()}))})):20===this.equipmentStatus?this.$ajax("/nest/cutworkorder/pausecut","",o,(function(){e.$ajax("/nest/cutworkorder/collectcuttask","",{id:e.curEquipmentId},(function(t){var a=t.data.data;e.curEquipmentData.collectCutTask=a,e.search()}))})):30===this.equipmentStatus&&this.$ajax("/nest/cutworkorder/gooncut","",o,(function(){e.$ajax("/nest/cutworkorder/collectcuttask","",{id:e.curEquipmentId},(function(t){var a=t.data.data;e.curEquipmentData.collectCutTask=a,e.search()}))}))}else if("finish"===t){if(!this.datas||0===this.datas.length)return;var c=[];this.datas.filter((function(t){return 40!=t.woStatus})).forEach((function(t){var e={id:t.id,proCode:t.woProCode,proName:t.proName,matId:t.matId,field1:t.woEquipmentId};c.push(e)})),g["a"].loading({forbidClick:!0,duration:0}),this.$ajax("/nest/cutworkorder/finishcut","",c,(function(){g["a"].clear(),e.$ajax("/nest/cutworkorder/collectcuttask","",{id:e.curEquipmentId},(function(t){var a=t.data.data;e.curEquipmentData.collectCutTask=a,e.search()}))}),(function(t){}))}else if("report"===t){if(!this.datas||0===this.datas.length)return;var l={equipmentId:this.curEquipmentId};this.$router.push({name:"cuttingReport",query:l})}},scanning:function(t){var e=this,a=localStorage.getItem("equipmentType");if(a&&"XUESI2"==a?sc.initUTScan(void 0):sc.initScan(void 0),t.data){var i=[{id:this.curEquipmentId,name:t.data}];this.$ajax("/nest/cutworkorder/scanbarcode","",i,(function(){e.$ajax("/nest/cutworkorder/collectcuttask","",{id:e.curEquipmentId},(function(t){var a=t.data.data;e.curEquipmentData.collectCutTask=a,e.search()}))}))}else g["a"].fail("还未扫码")},closeDetail:function(){this.showDetail=!1},initSelect:function(){var t=this;this.$ajax("/wms/wmsstack/list","",{},(function(e){var a=[];e.data.data.forEach((function(t){var e={id:t.id,name:t.stackName};a.push(e)})),t.selectItems.equipmentStackid=a,t.selectItems.equipmentProcessedStackid=a})),this.$ajax("/common/comteam/list","",{},(function(e){if(1e7==e.data.errorCode){var a=e.data.data;a.reverse(),t.selectItems.equipmentTeam=e.data.data.map((function(t){return{name:t.teamName,id:t.id}})),t.selectItems.woTeamId=t.selectItems.equipmentTeam}})),this.selectItems.equipmentType=r["a"].getDict("EQUIPMENT_TYPE"),this.$ajax("/wms/wmsstore/list","",{},(function(e){var a=[];e.data.data.forEach((function(t){var e={id:t.id,name:t.storeName};a.push(e)})),t.selectItems.equipmentStoreid=a,t.selectItems.equipmentProcessedStoreid=a})),this.$ajax("/auth/user/list","",{},(function(e){var a=[];e.data.data.forEach((function(t){var e={id:t.id,name:t.userRealname};a.push(e)})),t.selectItems.equipmentPerson=a})),this.selectItems.proMattype=r["a"].getDict("WMS_MAT_TYPE"),this.$ajax("/common/comequipment/list","",{},(function(e){var a=[],i={id:"N/A",name:"未派发"};a.push(i);var s=e.data.data;s.forEach((function(t){var e={id:t.id,name:t.equipmentName};a.push(e)})),t.selectItems.woEquipmentId=a})),this.selectItems.woStatus=r["a"].getDict("CUT_STATUS")},carButtonClick:function(t,e){var a=this;"image"===t?this.$ajax("/nest/nestpicfile/getpicfileargs","",{picFileBussid:e.proCode,picFileBusstype:"NESTFILE"},(function(t){var e=t.data.data,i=[];e.forEach((function(t){if("PDF"!==t.picFileType.toUpperCase()){var e=a.getBaseUrl()+t.picFileUrl;i.push(e)}})),Object(y["a"])(i)})):"NC"===t?this.getNC(e.proCode):"detail"===t&&(this.tableQueryUrl.forEach((function(t){var i={};i[t.paramName]=e.proCode;var s={};s[t.paramName]="=",a.$ajax(t.url,"",{current:1,rows:100,value:i,exp:s,order:{}},(function(e){var i=e.data.data.records;i.forEach((function(t){for(var e in a.numberCol)if(t.hasOwnProperty(e)){var i=a.numberCol[e];t[e]=Math.round(t[e]*Math.pow(10,i))/Math.pow(10,i)}})),a.tableData[t.key]=i}))})),this.showNestDetail=!0)},afterMounted:function(){var t=this.$refs.detailPage.bodyheight,e=document.getElementsByClassName("van-tabs__nav")[0].offsetHeight;this.tableHeight=t-e-15},afterMountedMain:function(){this.listHeight=this.$refs.blankPage.bodyheight-this.$refs.info.$el.offsetHeight-this.$refs.buttons.$el.offsetHeight-15},getNC:function(t){var e=this;this.$ajax("/nest/nestpicfile/getpicfileargs","",{picFileBussid:t,picFileBusstype:"NCFILE",picFileLast:1},(function(t){var a=t.data.data,i=[];a.forEach((function(t){var a=t.picFileUrl;i.push(e.$getRequest(a))})),Promise.all(i).then((function(t){var a=[];t.forEach((function(t){var e=t.data;a.push(e)})),e.nestNCList=a,e.nestNCList.length>0&&(e.showNC=!0)}))}))},chooseEquipment:function(t){t.flag=!1,this.showChoiceEquipment=!0},closePopup:function(t){var e=this;t.flag=!1,this.showNC=!1,this.showNestDetail=!1,this.showChoiceEquipmentSingle=!1,this.$ajax("/nest/cutworkorder/collectcuttask","",{id:this.curEquipmentId},(function(t){var a=t.data.data;e.curEquipmentData.collectCutTask=a,e.search()}))},closeTaskToBeCut:function(t){var e=this;t.flag=!1,this.showTaskToBeCut=!1,this.$ajax("/nest/cutworkorder/collectcuttask","",{id:this.curEquipmentId},(function(t){var a=t.data.data;e.showChoiceEquipment=!1,e.curEquipmentData.collectCutTask=a,e.search()}))},finish:function(t){var e=this;this.$ajax("/nest/cutworkorder/collectcuttask","",{id:t},(function(t){var a=t.data.data;e.showTaskToBeCut=!1,e.curEquipmentData.collectCutTask=a,e.search()}))},sure:function(t){var e=this;this.$ajax("/nest/cutworkorder/collectcuttask","",{id:t.id},(function(a){var i=a.data.data;t.collectCutTask=i,e.showChoiceEquipment=!1,e.curEquipmentData=t,e.curEquipmentId=t.id,e.search();var s=e;e.$nextTick((function(){s.cardHeight=s.$refs.equipmentCard.$el.offsetHeight}))}))},taskCardButtonClick:function(t,e){var a=this;"image"===t?this.$ajax("/nest/nestpicfile/getpicfileargs","",{picFileBussid:e.woProCode,picFileBusstype:"NESTFILE"},(function(t){var e=t.data.data,i=[];e.forEach((function(t){var e=a.getBaseUrl()+t.picFileUrl;i.push(e)})),Object(y["a"])(i)})):"NC"===t?this.getNC(e.woProCode):"detail"===t&&(this.tableQueryUrl.forEach((function(t){var i={};i[t.paramName]=e.woProCode;var s={};s[t.paramName]="=",a.$ajax(t.url,"",{current:1,rows:100,value:i,exp:s,order:{}},(function(e){var i=e.data.data.records;i.forEach((function(t){for(var e in a.numberCol)if(t.hasOwnProperty(e)){var i=a.numberCol[e];t[e]=Math.round(t[e]*Math.pow(10,i))/Math.pow(10,i)}})),a.tableData[t.key]=i}))})),this.showNestDetail=!0)},openEquipmentCardDetail:function(t){this.pcmoduleid="equipment_2001",this.detaildata=t,this.detailtitle="设备详细信息",this.detailView="",this.showDetail=!0},openTaskCardDetail:function(t){this.pcmoduleid="manufacture_4002",this.detaildata=t,this.detailtitle="程序详细信息",this.detailView="view",this.showDetail=!0},jump:function(t,e){this.equipmentName=e,this.showTaskToBeCut=!0}},created:function(){this.initSelect(),this.baseUrl=this.getBaseUrl()},mounted:function(){this.NCHeight=window.innerHeight-this.$refs.blankPage.baseNavigationh}}),_=B,j=(a("b1c0"),Object(p["a"])(_,i,s,!1,null,"3d82c488",null));e["default"]=j.exports},"6b60":function(t,e,a){"use strict";var i=a("df23"),s=a.n(i);s.a},7634:function(t,e,a){},"8ad5":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAS5JREFUSEvt1jFKBEEQBdC3h1AQFASNjAQNTAQNDfQGgpFmgsaGXsJNTDyBgqkGJoJipJmRgaCXkFp2l7GdXoOdoTfYgkmmZ/6v39W/ujoKRacQrxzxMuaTpL7wNiLRFcxm1u/T93XEt9jJAKzjuWZtDU8jkrrGKd4H36TEFzjEK74ToFB7js8agjmcIVTXxRausF9HHFv70VcUypqMF6wiSthTXVUcWd0h6rHdJGsfN/ADt1fvKXGRrR5Y4gZ7Ddc47LSLoR1TO4UdwkaplcbNYwbxDBvQxLXMcRX++39VcbS8qHOb8YiN1MfFiNtU+gd7Yg5XETsVayDT26nJUx6Xz/Q+/rWjlzhoadjr4ig3ZS7iBMcNj7cP2Kxi5jrXApYS8tYH+iZPcxarWK/+AfidVx9DPm6BAAAAAElFTkSuQmCC"},a7de:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAQJJREFUSEvt1z8SwUAUx/FvDuEUFG6AO6BhFIZWr6LUa43CjAZ3wAk0nMIhmGfyZnaQTTZ/ViGpN++z+8vuZl7Aj54gdOdAA2gWPI8TcAbmCl+BasGolr8BNYUfnlBlghL2lXgZdW5J74ENsAYqX6oWErWg3RC7AHUfsInKbTiLyDDXFSdFZS65wS5oLHwHhsAA6Fi2nSsaC78u8xDcReBp0FhYBmyBfgSeFk0Ey6AVMH7Ds6CJYRm4BCYGrufUdmRst5HTrl4AU6NaWtRpxerJN5foR0AvwwXrtOIMzserJZxnmtZafxz10UMXodlLN9EyW5i2h25CfjwHs4XxtqsUegKRzUMffRBXBwAAAABJRU5ErkJggg=="},ac5f:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAfhJREFUSEvF1z+sDUEUx/HPS4SaAomGqCgoJIIgFCQKQvISyQulyr/Ev0SFQiWR+FfpNKJQ0IinIF4QiYaCkopEQU1Dzs3uzWZy9+7MvvvyJpli955zvufsPfObmSmLNKZ6cJdiVTX/4Tt+lMbJBa/EMRzBzhbIM8R8hJ9dieSAzyLmuq5g1e9fcauarS7jwFHlfRzKBKZmT3Girfo28B687AlM3eKveZO+HAWeJDR4f7E2bcAUHN0a2a2fULV1mCc43IyZgi/gxoShdbgZPKwfUvBHbFog8HtsGwXehdcd0Gt4jnOY7pHgbsyFX7Piq7iSAQ67GEerBLYWJBCJD/yb4LfYXgCuTaP6i1idkcA77EjBoTjR9uPGMOPEaAmu41KH/7daAZsV/0FsAH3Atc+aSu0OtASJNb0srfgXli8w+DdWpODP2NATnPupv2BjCg5tDrks/dQlzfUKe1PwSdwtAPdZTqdwLwWHYoVydVU8HwHZjE8pOJ4j6P6M9djH5HFT7VKtPo4HfaJm+AzlclTF8S5ODgczApWY3MT5pkPbCeQDtpREHmM77OQccNjcxul5wu/gzKgYXafMnB2rLbc2XR/Yd4HDJnT3MmK/zhnRvXG8Hey7bSMHXPvGMttXbWvNm0TcIuI28QKziP7oHCXgzmAlBosG/g9jnVUflGPkBAAAAABJRU5ErkJggg=="},af7f:function(t,e,a){"use strict";var i=a("c63c"),s=a.n(i);s.a},b1c0:function(t,e,a){"use strict";var i=a("efcc"),s=a.n(i);s.a},c63c:function(t,e,a){},c719:function(t,e,a){},c9ce:function(t,e,a){"use strict";var i=a("0b82"),s=a.n(i);s.a},d5e2:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAARtJREFUSEu91r0uBUEYxvHfuRcqQqESH6GRcA9OQ0uiUKOWkNDScA8kGuKzUhAq7oWMmGQz2dkjzs5OMsXsvPP8d/J+Tc/gMYV0PiOdWaVeA2MC+1ga/B+usI3XOtscZBVnfxBPTfo4Tz/WQe4x8w9APPKA2er5FPKBkSEA8egnRuOiCjnCRguAKHGMzbCIkGVctAiIUiu4jJBbzGUgIVRDCOdG0/4d5gMkhOpLRuEd4zjBWo3NKdbxhrGMxmSANIXrDRaxi50akb3fvWssZCD9ADnAVsagDchhgDxiuiDkKUC+Gpzaxk1+QriTm3Tik06iq5M8CX4vnvEB0kntCqDiVTimSvF+EkHFO2MEFe/xEVT8tVItZ0O/u74Bcs5c1yYVoa4AAAAASUVORK5CYII="},df23:function(t,e,a){},df40:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAALZJREFUSEtjZKADYKSDHQwDbokIAwPDG2r4FJ9P9jMwMExmYGBYR6lFhCxxYGBgWMTAwFDOwMDwglzLiLEEZPYHqEWzyLGIWEtgZm+FWnaVFMtItQRmdjUDA0MbsRaRawnI/JNQXx0kZBkllsDM7oNa9geXZdSwBGT2HahFWJM7tSyBeQKU3OPRfUQtS2juE5rGCc1TF03zCU1zPM3LLpqXwjSvT+hSMxIq94iWH/CGBNEuJaQQABxwMBruAftQAAAAAElFTkSuQmCC"},efcc:function(t,e,a){},fc43:function(t,e,a){"use strict";var i=a("7634"),s=a.n(i);s.a}}]);