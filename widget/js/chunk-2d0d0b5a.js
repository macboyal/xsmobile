(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d0b5a"],{"68ac":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("stackBlock",{ref:"stackBlock",attrs:{storeType:t.storeType,title:t.title,api:t.api,getStackSumByConApi:t.getStackSumByConApi,btnmenus:t.btnmenus,bottomButtons:t.bottomButtons,detailParamKey:t.detailParamKey,defualtConditions:t.defualtConditions,selectItems:t.selectItems,serialnoStr:t.serialnoStr},on:{sure:t.sure,aftersearch:t.aftersearch,afterDetailSearch:t.afterDetailSearch,btnmenusEvent:t.btnmenusEvent,bottomButtonsClick:t.bottomButtonsClick,beforesearchSelect:t.beforesearchSelect}})],1)},a=[],n=(i("ac6a"),i("02df")),r={props:{},components:{},data:function(){return{defualtConditions:[{key:"ptmtStatus",value:"4",exp:"<>"}],title:this.$t("lineSideLibrary.title"),storeType:7,api:"/wms/wmspretreatmenttask/getlinesidestock",getStackSumByConApi:"/wms/wmspretreatmenttask/getstacksumbycon",btnmenus:[{key:"signFor",name:this.$t("lineSideLibrary.signFor"),icon:"sign"},{key:"transfer",name:this.$t("lineSideLibrary.transfer"),icon:"exchange"},{key:"delivery",name:this.$t("lineSideLibrary.delivery"),icon:"logistics"}],bottomButtons:[],detailParamKey:"ptmtInStockid",selectItems:{ptmtSignStatus:[{id:"0",name:this.$t("lineSideLibrary.unsigned")},{id:"1",name:this.$t("lineSideLibrary.signed")}],overdueFlag:[{id:"0",name:this.$t("lineSideLibrary.notOverdue")},{id:"1",name:this.$t("lineSideLibrary.overdue")}],overdue:[{id:"0",name:this.$t("lineSideLibrary.notOverdue")},{id:"1",name:this.$t("lineSideLibrary.overdue")}]},serialnoStr:"ptmtInSerialno"}},methods:{initSelect:function(){var t=this;this.$ajax("/common/comteam/list","",{},(function(e){var i=[];e.data.data.forEach((function(t){var e={id:t.id,name:t.teamName};i.push(e)})),t.selectItems.woTeamId=i,t.selectItems.oboTeamId=i})),this.$ajax("/auth/dep/listdep","",{},(function(e){var i=[];e.data.data.forEach((function(t){var e={id:t.id,name:t.depName};i.push(e)})),t.selectItems.oboDepId=i})),this.$ajax("/common/comequipment/list","",{},(function(e){var i=[];e.data.data.forEach((function(t){var e={id:t.id,name:t.equipmentName};i.push(e)})),t.selectItems.woEquipmentId=i})),this.$ajax("/wms/wmsstack/list","",{},(function(e){var i=[];e.data.data.forEach((function(t){var e={name:t.stackName,id:t.id};i.push(e)})),t.selectItems.targetStockid=i,t.selectItems.ptmtInStockid=i,t.selectItems.woEquipmentStackid=i})),this.$ajax("/wms/wmsstore/list","",{storeType:7,storeClassify:"ORI"},(function(e){var i=[];e.data.data.forEach((function(t){var e={id:t.id,name:t.storeName};i.push(e)})),t.selectItems.ptmtInStoreid=i,t.selectItems.targetStoreid=i})),this.$ajax("/wms/wmsmatcat/list","",{},(function(e){var i=[];e.data.data.forEach((function(t){var e={id:t.id,name:t.matCatName};i.push(e)})),t.selectItems.matMatCatId=i})),this.selectItems.ptmtStatus=n["a"].getDict("PTMT_TASK_STATUS"),this.selectItems.oboBusscode=n["a"].getDict("ODB_BUSS_CODE"),this.selectItems.matSheetType=n["a"].getDict("NEST_MAT_TYPE")},sure:function(){},btnmenusEvent:function(t){this.bottomButtons=[],"signFor"===t?this.bottomButtons.some((function(t){return"signFor"===t.key}))||this.bottomButtons.push({key:"signFor",name:this.$t("lineSideLibrary.signFor")}):"transfer"===t?this.bottomButtons.some((function(t){return"transfer"===t.key}))||this.bottomButtons.push({key:"transfer",name:this.$t("lineSideLibrary.transfer")}):"delivery"===t&&(this.bottomButtons.some((function(t){return"delivery"===t.key}))||this.bottomButtons.push({key:"delivery",name:this.$t("lineSideLibrary.delivery")}))},beforesearchSelect:function(t){t.slaves=this.slaves},aftersearch:function(){},afterDetailSearch:function(t){var e=t.records;e.forEach((function(t){t.lenAndWid=t.matLength+"*"+t.matWidth}))},bottomButtonsClick:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"transfer"===t?this.collapse(e,i):"signFor"===t?this.signFor(e):"delivery"===t&&this.delivery(e)},collapse:function(t,e){var i=this,s=this;this.$toast.loading({forbidClick:!0,duration:0});var a=[];t.forEach((function(t){var i={id:t.id,ptmtInSerialno:t.ptmtInSerialno,targetStoreid:e.storeId,targetStockid:e.stackId,ptmtInStockid:t.ptmtInStockid,ptmtInStoreid:t.ptmtInStoreid};a.push(i)})),this.$ajax("/wms/wmspretreatmenttask/changeLineSideStore","",a,(function(t){i.$toast.success(s.$t("lineSideLibrary.transferSuccess")),s.$refs.stackBlock.detailSearch()}))},signFor:function(t){var e=this,i=this,s=t.map((function(t){return{id:t.id}}));s&&0!==s.length?this.$ajax("/wms/wmspretreatmenttask/signfor","",s,(function(t){e.$toast.success(i.$t("lineSideLibrary.signSuccess")),i.$refs.stackBlock.detailSearch()})):this.$toast.fail(this.$t("base.noselect"))},delivery:function(t){var e=this,i=this,s=t.map((function(t){return{id:t.id,woCode:t.woCode,odbOtheroutId:t.odbOtheroutId}}));this.$ajax("/wms/wmspretreatmenttask/delivery","",s,(function(t){e.$toast.success(i.$t("lineSideLibrary.deliverySuccess")),i.$refs.stackBlock.detailSearch()}))}},created:function(){this.initSelect()}},o=r,c=i("2877"),d=Object(c["a"])(o,s,a,!1,null,null,null);e["default"]=d.exports}}]);