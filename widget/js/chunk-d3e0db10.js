(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d3e0db10"],{"0eec":function(t,a,e){},"325d":function(t,a,e){"use strict";var s=e("d4dc"),r=e.n(s);r.a},"374e":function(t,a,e){"use strict";var s=e("6571"),r=e.n(s);r.a},"4eeb":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("baseNavigation",{ref:"baseNavigation",attrs:{title:t.title,extIcon:""}}),s("div",{staticClass:"searchBox"},[s("van-search",{staticClass:"van-search-xs",attrs:{placeholder:t.$t("cuttingReport.placeholder")},on:{blur:t.onBlur},model:{value:t.equipmentName,callback:function(a){t.equipmentName=a},expression:"equipmentName"}}),s("span",{staticClass:"topInfo"},[t._v(" "+t._s(t.$t("cuttingReport.equipmentNum"))+"："+t._s(t.equipmentNum))])],1),s("div",{staticClass:"body"},[s("van-grid",{attrs:{clickable:"","column-num":1,center:!0}},t._l(t.rowDatas,(function(a){return s("van-grid-item",{key:a.id,on:{click:function(e){return t.openView(a)}}},[s("van-row",{staticClass:"gridRow",attrs:{slot:"default"},slot:"default"},[s("van-col",{staticClass:"rowLeft",attrs:{span:"8"}},[s("van-icon",{attrs:{name:e("5c5e"),size:"50"}})],1),s("van-col",{attrs:{span:"16"}},[s("van-row",{staticClass:"rowItem"},[s("van-col",{staticClass:"titleCol",attrs:{span:"8"}},[t._v(t._s(t.$t("cuttingReport.equipmentName")))]),s("van-col",{attrs:{span:"16"}},[t._v(t._s(a.equipmentName))])],1),s("van-row",{staticClass:"rowItem"},[s("van-col",{staticClass:"titleCol",attrs:{span:"8"}},[t._v(t._s(t.$t("cuttingReport.reportProNum")))]),s("van-col",{attrs:{span:"16"}},[t._v(t._s(a.reportableNum))])],1)],1)],1)],1)})),1)],1),t.showSelectPro?s("selectProgram",{attrs:{equipmentInfo:t.curEquipment},on:{close:t.closePopup}}):t._e()],1)},r=[],i=(e("386d"),e("ac6a"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("van-popup",{style:{width:"100%",height:"100%",backgroundColor:"#F7F7F7"},attrs:{position:"right"},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[e("blankPage",{attrs:{title:t.title},on:{onClickLeft:t.close},scopedSlots:t._u([{key:"body",fn:function(){return[e("div",{staticStyle:{height:"100%"}},[e("div",{staticClass:"searchBox"},[e("div",{staticClass:"topLeft"},[e("span",{staticClass:"topSpan firstSpan"},[t._v(" "+t._s(t.$t("cuttingReport.equipmentName"))+" ")]),e("span",{staticClass:"topSpan"},[t._v(" ："+t._s(t.equipmentInfo.equipmentName)+" ")])]),e("span",{staticClass:"topRight"},[t._v(" "+t._s(t.$t("cuttingReport.quantity"))+"："+t._s(t.proNum)+" ")])]),e("div",t._l(t.gridDetails,(function(a){return e("div",{key:a.id,staticClass:"cellGroup"},[e("div",{staticClass:"cellHead"},[e("van-row",[e("van-col",{staticClass:"labelCol",attrs:{span:"6"}},[t._v(" "+t._s(t.$t("cuttingReport.proName"))+" ")]),e("van-col",{attrs:{span:"10"}},[e("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(a.proName))])]),e("van-col",{staticClass:"rateCol",attrs:{span:"8"}},[e("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(t.$t("cuttingReport.useRate"))+"："+t._s(t.rateMap[a.id])+"%")])])],1)],1),e("div",[e("van-row",{staticClass:"cellBody"},[e("van-col",{attrs:{span:"12"}},[e("van-row",{staticClass:"bodyRow"},[e("van-col",{staticClass:"labelCol",attrs:{span:"12"}},[t._v(t._s(t.$t("cuttingReport.orderStatus")))]),e("van-col",{attrs:{span:"12"}},["10"==a.woStatus?e("span",{staticClass:"iconSpan",staticStyle:{"background-color":"#0099CC"}},[t._v(t._s(t.$t("cuttingReport.orderStatus10")))]):"20"==a.woStatus?e("span",{staticClass:"iconSpan",staticStyle:{"background-color":"#009900"}},[t._v(t._s(t.$t("cuttingReport.orderStatus20")))]):"30"==a.woStatus?e("span",{staticClass:"iconSpan",staticStyle:{"background-color":"#BCBCBC"}},[t._v(t._s(t.$t("cuttingReport.orderStatus30")))]):e("span",{staticClass:"iconSpan",staticStyle:{"background-color":"#FFCC00"}},[t._v(t._s(t.$t("cuttingReport.orderStatus40")))])])],1),e("van-row",{staticClass:"bodyRow"},[e("van-col",{staticClass:"labelCol",attrs:{span:"12"}},[t._v(t._s(t.$t("cuttingReport.reportStatus")))]),e("van-col",{attrs:{span:"12"}},[0==a.woReportStatus?e("span",{staticClass:"iconSpan",staticStyle:{"background-color":"#BCBCBC"}},[t._v(t._s(t.$t("cuttingReport.reprotStatus0")))]):10==a.woReportStatus?e("span",{staticClass:"iconSpan",staticStyle:{"background-color":"#FFCC00"}},[t._v(t._s(t.$t("cuttingReport.reprotStatus10")))]):e("span",{staticClass:"iconSpan",staticStyle:{"background-color":"#009900"}},[t._v(t._s(t.$t("cuttingReport.reprotStatus20")))])])],1),e("van-row",{staticClass:"bodyRow"},[e("van-col",{staticClass:"labelCol",attrs:{span:"12"}},[t._v(t._s(t.$t("cuttingReport.reportProgess")))]),e("van-col",{attrs:{span:"12"}},[e("span",{staticStyle:{"margin-left":"10px"}},[t._v("\n                          "+t._s(null==a.partsReportReportNumber?0:a.partsReportReportNumber)+"\n                        ")]),t._v("\n                        /"+t._s(null==a.proPartsum?0:a.proPartsum)+"\n                      ")])],1)],1),e("van-col",{attrs:{span:"12"}},[e("div",{staticClass:"bodyIcon"},[e("van-row",[e("van-button",{staticClass:"reportBtn",on:{click:function(e){return t.report(a)}}})],1),e("van-row",{staticClass:"reportTxt"},[t._v(t._s(t.$t("cuttingReport.report")))])],1)])],1)],1),e("div",{staticClass:"cellFooter"},[e("van-row",[e("van-col",{attrs:{span:"8"}},[e("van-button",{staticClass:"showNCBtn",attrs:{size:"mini"},on:{click:function(e){return t.showNestJpgFun(a)}}},[t._v(t._s(t.$t("cuttingReport.ncBtn")))])],1),e("van-col",{attrs:{span:"16"}},[e("van-button",{staticClass:"showDetailBtn",attrs:{size:"mini"},on:{click:function(e){return t.showDetail(a)}}},[t._v(t._s(t.$t("base.showdetail"))+">")])],1)],1)],1)])})),0)])]},proxy:!0}])})],1),t.showPartReport?e("partReport",{attrs:{programInfo:t.curPro},on:{close:t.closePartPopup}}):t._e(),e("van-popup",{style:{height:"100%"},attrs:{closeable:"",position:"top"},model:{value:t.showNestJPG,callback:function(a){t.showNestJPG=a},expression:"showNestJPG"}},[e("van-image",{attrs:{width:"100%",height:"100%",fit:"contain",src:t.getBaseUrl()+t.jpgUrl}})],1),e("van-popup",{staticClass:"baseDetail",style:{width:"100%",height:"100%",backgroundColor:"#F7F7F7"},attrs:{position:"right",transition:"van-fade",duration:"0.3"},model:{value:t.showNestDetail,callback:function(a){t.showNestDetail=a},expression:"showNestDetail"}},[t.showNestDetail?e("blankPage",{ref:"detailPage",attrs:{title:"查看详情"},on:{onClickLeft:t.closePopup,afterMounted:t.afterMounted},scopedSlots:t._u([{key:"body",fn:function(){return[e("div",{staticClass:"tablePage",staticStyle:{height:"100%"}},[e("van-tabs",{attrs:{"title-active-color":"rgb(97,64,141)"}},t._l(t.detailTags,(function(a){return e("van-tab",{key:a.key,attrs:{title:a.title,"title-style":"font-size:14px"}},[e("div",{staticStyle:{padding:"10px"}},[e("baseTable",{ref:"baseTable",refInFor:!0,attrs:{columns:t.tableHeader[a.key],data:t.tableData[a.key],height:t.tableHeight}})],1)])})),1)],1)]},proxy:!0}],null,!1,3224213463)}):t._e()],1)],1)}),o=[],n=e("28a2"),l=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("van-popup",{style:{width:"100%",height:"100%",backgroundColor:"#F7F7F7"},attrs:{position:"left"},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[s("blankPage",{attrs:{title:t.title},on:{onClickLeft:t.close},scopedSlots:t._u([{key:"body",fn:function(){return[s("div",{staticStyle:{height:"100%"}},[s("div",{staticClass:"searchBox"},[s("van-search",{staticClass:"van-search-xs",attrs:{placeholder:t.$t("cuttingReport.placeholder2")},on:{blur:t.onBlur},model:{value:t.myDrawName,callback:function(a){t.myDrawName=a},expression:"myDrawName"}}),s("span",{staticClass:"topInfo"},[t._v(" "+t._s(t.$t("cuttingReport.quantity"))+"："+t._s(t.gridDetails.length))])],1),s("div",t._l(t.gridDetails,(function(a){return s("div",{key:a.id,staticClass:"cellGroup"},[s("div",{staticClass:"cellHead"},[s("van-row",[s("van-col",{staticClass:"labelCol",attrs:{span:"6"}},[t._v(" "+t._s(t.$t("partReport.drawName"))+" ")]),s("van-col",{attrs:{span:"10"}},[s("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(a.mbomCode))])]),s("van-col",{staticClass:"rateCol",attrs:{span:"8"}},[s("span",{staticClass:"topTxt"},[t._v(t._s(a.partsNestrowid))])])],1)],1),s("div",[s("van-row",{staticClass:"cellBody"},[s("van-col",{attrs:{span:"12"}},[s("van-row",{staticClass:"bodyRow"},[s("van-col",{staticClass:"labelCol",attrs:{span:"12"}},[t._v(t._s(t.$t("partReport.programName")))]),s("van-col",{attrs:{span:"12"}},[s("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(a.mbomField1))])])],1),s("van-row",{staticClass:"bodyRow"},[s("van-col",{staticClass:"labelCol",attrs:{span:"12"}},[t._v(t._s(t.$t("partReport.assemblyCode")))]),s("van-col",{attrs:{span:"12"}},[s("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(a.mbomField2))])])],1),s("van-row",{staticClass:"bodyRow"},[s("van-col",{staticClass:"labelCol",attrs:{span:"12"}},[t._v(t._s(t.$t("partReport.reportNum")))]),s("van-col",{attrs:{span:"12"}},[s("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(a.requiredQuantity))]),t._v("/"+t._s(a.partNestedsum)+"\n                      ")])],1)],1),s("van-col",{attrs:{span:"12"}},[s("van-image",{staticClass:"bodyIcon",attrs:{fit:"contain",src:t.getBaseUrl()+t.partImgUrlMap[a.id]}})],1)],1)],1),s("div",{staticClass:"cellFooter"},[s("van-row",[s("van-col",{staticClass:"labelCol",attrs:{span:"6"}},[t._v(" "+t._s(t.$t("partReport.todoNum"))+" ")]),s("van-col",{attrs:{span:"3"}},[s("span",{staticClass:"footerTxt"},[t._v(t._s(t.todoReportMap[a.id]))])]),s("van-col",{attrs:{span:"15"}},[s("div",{staticClass:"btnGroup"},[s("van-button",{staticClass:"partBtn",attrs:{disabled:0==a.requiredQuantity,size:"mini"},on:{click:function(e){return t.showSplit(a)}}},[s("van-icon",{staticClass:"btnIcon",attrs:{name:e("0b5e"),size:"20"}}),s("span",{staticClass:"btnTxt"},[t._v(t._s(t.$t("partReport.btnName1")))])],1),s("van-button",{staticClass:"showDetailBtn",attrs:{size:"mini"},on:{click:function(e){return t.showDetail(a)}}},[t._v(t._s(t.$t("partReport.btnName2"))+">")])],1)])],1)],1)])})),0)])]},proxy:!0}])}),s("van-tabbar",{ref:"footer",model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},[s("van-tabbar-item",{attrs:{icon:e("70d6")},on:{click:function(a){return t.tabbarClick(t.active)}}},[t._v("套料图")]),s("van-tabbar-item",{attrs:{icon:e("9e02")},on:{click:function(a){return t.tabbarClick(t.active)}}},[t._v("屏蔽0")]),s("van-tabbar-item",{attrs:{icon:e("f4ba")},on:{click:function(a){return t.tabbarClick(t.active)}}},[t._v("部分报工")]),s("van-tabbar-item",{attrs:{icon:e("6769")},on:{click:function(a){return t.tabbarClick(t.active)}}},[t._v("全部报工")])],1),s("van-overlay",{attrs:{show:t.loading}},[s("div",{staticClass:"wrapper",on:{click:function(t){t.stopPropagation()}}},[t.loading?s("van-loading",{attrs:{type:"spinner",color:"white"}}):t._e()],1)])],1),s("van-popup",{style:{height:"100%"},attrs:{closeable:"",position:"top"},model:{value:t.showNestJPG,callback:function(a){t.showNestJPG=a},expression:"showNestJPG"}},[s("van-image",{attrs:{width:"100%",height:"100%",fit:"contain",src:t.getBaseUrl()+t.jpgUrl}})],1),t.showSplitPopup?s("splitAndReport",{attrs:{partInfo:t.curPartInfo,partsReportPid:t.partsReportPid,euipmentId:t.euipmentId},on:{close:t.closeAndFresh}}):t._e(),t.showDetailView?s("reportDetail",{attrs:{programId:t.programId,curPartId:t.curPartId},on:{close:t.closeAndFresh}}):t._e()],1)},c=[],p=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("van-popup",{style:{width:"100%",height:"100%",backgroundColor:"#F7F7F7"},attrs:{position:"left"},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[e("blankPage",{attrs:{title:t.title},on:{onClickLeft:t.close},scopedSlots:t._u([{key:"body",fn:function(){return[e("div",{staticStyle:{height:"100%"}},[e("van-row",[e("van-col",{staticClass:"titleClass",attrs:{span:"8"}},[t._v(t._s(t.$t("partReport.drawName")))]),e("van-col",{staticClass:"valueClass",attrs:{span:"16"}},[e("span",{staticStyle:{"margin-left":"20px"}},[t._v(t._s(t.partInfo.partDrawcode))])])],1),e("van-row",[e("van-col",{staticClass:"titleClass",attrs:{span:"8"}},[t._v(t._s(t.$t("partReport.nestSort")))]),e("van-col",{staticClass:"valueClass",attrs:{span:"16"}},[e("span",{staticStyle:{"margin-left":"20px"}},[t._v(t._s(t.partInfo.partsNestrowid))])])],1),e("van-row",[e("van-col",{staticClass:"titleClass",attrs:{span:"8"}},[t._v(t._s(t.$t("partReport.reportNum")))]),e("van-col",{staticClass:"valueClass",attrs:{span:"16"}},[e("span",{staticStyle:{"margin-left":"20px"}},[t._v(t._s(t.partInfo.requiredQuantity)+"/"+t._s(t.partInfo.partNestedsum))])])],1),e("van-row",[e("van-col",{staticClass:"titleClass",attrs:{span:"8"}},[t._v(t._s(t.$t("partReport.checkType")))]),e("van-col",{staticClass:"valueClass",attrs:{span:"16"},on:{click:t.selectReportType}},[e("van-field",{attrs:{placeholder:"请输入检验类别",readonly:""},model:{value:t.reportTypeText,callback:function(a){t.reportTypeText=a},expression:"reportTypeText"}}),e("van-icon",{attrs:{name:"arrow",size:"24"}})],1)],1),e("van-row",[e("van-col",{staticClass:"titleClass",attrs:{span:"8"}},[t._v(t._s(t.$t("partReport.reportQuantity")))]),e("van-col",{staticClass:"valueClass",attrs:{span:"16"}},[e("van-field",{attrs:{type:"digit",placeholder:"请输入报工数量"},model:{value:t.reportNum,callback:function(a){t.reportNum=a},expression:"reportNum"}})],1)],1),e("van-row",[e("van-col",{staticClass:"titleClass",attrs:{span:"8"}},[t._v(t._s(t.$t("partReport.scrapQuantity")))]),e("van-col",{staticClass:"valueClass",attrs:{span:"16"}},[e("van-field",{attrs:{type:"digit",placeholder:"请输入报废数量"},model:{value:t.scrapNum,callback:function(a){t.scrapNum=a},expression:"scrapNum"}})],1)],1),e("van-row",[e("van-col",{staticClass:"titleClass",attrs:{span:"8"}},[t._v(t._s(t.$t("partReport.scrapReason")))]),e("van-col",{staticClass:"valueClass",attrs:{span:"16"},on:{click:t.showReasonBox}},[e("van-field",{attrs:{placeholder:"请输入报废原因",readonly:""},model:{value:t.scrapReason,callback:function(a){t.scrapReason=a},expression:"scrapReason"}}),e("van-icon",{attrs:{name:"arrow",size:"24"}})],1)],1)],1)]},proxy:!0}])}),e("van-tabbar",{ref:"footer",model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},[e("van-button",{staticClass:"submitBtn",on:{click:t.submit}},[t._v("确 定")])],1)],1),e("van-popup",{style:{height:"55%"},attrs:{position:"bottom"},model:{value:t.showSelectPopup,callback:function(a){t.showSelectPopup=a},expression:"showSelectPopup"}},[e("van-row",[e("span",{staticClass:"selectTitle"},[t._v("选择检验类别")])]),e("van-radio-group",{model:{value:t.reportType,callback:function(a){t.reportType=a},expression:"reportType"}},[e("van-cell-group",{attrs:{inset:""}},[e("van-cell",{attrs:{title:"首检",clickable:""},on:{click:function(a){t.reportType="1"}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[e("van-radio",{attrs:{name:"1"}})]},proxy:!0}])}),e("van-cell",{attrs:{title:"中检",clickable:""},on:{click:function(a){t.reportType="2"}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[e("van-radio",{attrs:{name:"2"}})]},proxy:!0}])}),e("van-cell",{attrs:{title:"末检",clickable:""},on:{click:function(a){t.reportType="3"}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[e("van-radio",{attrs:{name:"3"}})]},proxy:!0}])})],1)],1),e("van-button",{on:{click:function(a){t.showSelectPopup=!1}}},[t._v("确 定")])],1),e("van-popup",{style:{height:"70%"},attrs:{position:"bottom"},model:{value:t.showReasonPopup,callback:function(a){t.showReasonPopup=a},expression:"showReasonPopup"}},[e("span",{staticClass:"selectTitle"},[t._v("报废原因")]),e("van-cell-group",{attrs:{inset:""}},[e("van-field",{staticClass:"textArea",attrs:{rows:"10",autosize:"",type:"textarea",maxlength:"500",placeholder:"请输入报废原因","show-word-limit":""},model:{value:t.scrapReason,callback:function(a){t.scrapReason=a},expression:"scrapReason"}})],1),e("van-button",{on:{click:function(a){t.showReasonPopup=!1}}},[t._v("确 定")])],1)],1)},u=[],d={name:"splitAndReport",components:{},props:{partInfo:{type:Object,default:function(){return{}}},partsReportPid:{type:String,default:function(){return""}},euipmentId:{type:String,default:function(){return""}}},data:function(){return{title:"拆分报工",show:!0,gridDetails:[],active:1,requiredQuantity:0,reportType:0,reportTypeText:"",reportNum:null,scrapNum:null,scrapReason:"",showSelectPopup:!1,showReasonPopup:!1}},methods:{close:function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&(t.flag=!1),this.$emit("close",a)},submit:function(){var t=this,a=this.partInfo["partsReportPartId"],e=this.partInfo["partsReportWeight"],s=this.partInfo["mbomId"],r=this.reportType,i=this.partInfo["requiredQuantity"],o=this.reportNum,n=this.scrapNum;if(o||(o=0),n||(n=0),o<0||n<0)return this.$toast.fail(this.$t("partReport.numbersmall")),!1;if(String(o).indexOf(".")>-1||String(n).indexOf(".")>-1)return this.$toast.fail(this.$t("partReport.numberint")),!1;var l=this.scrapReason;if(i-o-n<0)return this.$toast.fail(this.$t("partReport.numberover")),!1;if(o+n-0===0)return this.$toast.fail(this.$t("partReport.number0")),!1;var c={partsReportPid:this.partsReportPid,partsReportPartId:a,partsReportWeight:e,partsReportMbomId:s,partsReportType:r,partsReportReportNumber:o,partsReportScrappedNumber:n,partsReportScrappedReason:l,partsReportEquipment:this.euipmentId};this.$ajax("/nest/nestpartsreport/insert","",c,(function(a){t.$emit("close",!0)}))},tabbarClick:function(t){0===t&&this.submit()},selectReportType:function(){this.showSelectPopup=!0},showReasonBox:function(){this.showReasonPopup=!0}},created:function(){this.requiredQuantity=this.partInfo.requiredQuantity},watch:{reportType:{handler:function(t){var a=t;"1"===a?this.reportTypeText="首检":"2"===a?this.reportTypeText="中检":"3"===a&&(this.reportTypeText="末检")},immediate:!0}}},h=d,v=(e("325d"),e("2877")),f=Object(v["a"])(h,p,u,!1,null,"4ecd1996",null),m=f.exports,g=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("van-popup",{style:{width:"100%",height:"100%",backgroundColor:"#F7F7F7"},attrs:{position:"right"},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[s("blankPage",{attrs:{title:t.title},on:{onClickLeft:t.close},scopedSlots:t._u([{key:"body",fn:function(){return[s("div",{staticStyle:{height:"100%"}},[s("div",{staticClass:"searchBox"},[s("div",{staticClass:"topLeft"},[s("span",{staticClass:"topSpan firstSpan"},[t._v(" "+t._s(t.$t("partReport.drawName"))+" ")]),s("span",{staticClass:"topSpan"},[t._v(" ："+t._s(t.partDrawCode)+" ")])]),s("span",{staticClass:"topRight"},[t._v(" "+t._s(t.$t("cuttingReport.quantity"))+"："+t._s(t.gridDetails.length)+" ")])]),s("div",t._l(t.gridDetails,(function(a){return s("div",{key:a.id,staticClass:"cellGroup"},[s("div",{staticClass:"cellBody"},[s("van-row",{staticStyle:{"padding-top":"5px"}},[s("van-col",{attrs:{span:"10",offset:"1"}},[s("span",{staticClass:"labelCol"},[t._v(t._s(t.$t("partReport.reportQuantity")))]),s("span",{staticClass:"valueCol"},[t._v(t._s(a.partsReportReportNumber))])]),s("van-col",{attrs:{span:"13"}},[s("span",{staticClass:"labelCol"},[t._v(t._s(t.$t("partReport.scrapQuantity")))]),s("span",{staticClass:"valueCol"},[t._v(t._s(a.partsReportScrappedNumber))])])],1),s("van-row",[s("van-col",{attrs:{span:"10",offset:"1"}},[s("span",{staticClass:"labelCol"},[t._v(t._s(t.$t("partReport.checkType")))]),s("span",{staticClass:"valueCol"},[t._v(t._s(t.getReportTypeText(a.partsReportType)))])]),s("van-col",{attrs:{span:"13"}},[s("span",{staticClass:"labelCol"},[t._v(t._s(t.$t("cuttingReport.reportStatus")))]),0===a.partsReportInvStatus?s("span",{staticClass:"grayCol"},[t._v("\n                      "+t._s(t.$t("cuttingReport.reprotStatus0"))+"\n                    ")]):1===a.partsReportInvStatus?s("span",{staticClass:"greenCol"},[t._v("\n                      "+t._s(t.$t("cuttingReport.reprotStatus1"))+"\n                    ")]):s("span",{staticClass:"valueCol"})])],1),s("van-row",[s("van-col",{attrs:{span:"23",offset:"1"}},[s("span",{staticClass:"labelCol",staticStyle:{display:"block",float:"left"}},[t._v(t._s(t.$t("partReport.scrapReason")))]),s("span",{staticClass:"reasonCol",style:{width:t.reasonColWidth+"px"},on:{click:function(e){return t.openReasonPopup(a.partsReportScrappedReason)}}},[t._v("\n                      "+t._s(null==a.partsReportScrappedReason?"-":a.partsReportScrappedReason)+"\n                    ")])])],1),s("van-row",{staticStyle:{"padding-bottom":"5px"}},[s("van-col",{attrs:{span:"10",offset:"1"}},[s("span",{staticClass:"labelCol"},[t._v(t._s(t.$t("WIPLinesideLibrary.partsReportUserId")))]),s("span",{staticClass:"valueCol"},[t._v(t._s(a.partsReportUserName))])]),s("van-col",{attrs:{span:"13"}},[s("span",{staticClass:"labelCol"},[t._v(t._s(t.$t("WIPLinesideLibrary.partsReportDate")))]),s("span",{staticClass:"valueCol"},[t._v("\n                      "+t._s(t.splitTimeString(a.partsReportTime))+"\n                    ")])])],1)],1),s("div",{staticClass:"cellFooter"},[s("div",{staticStyle:{float:"right"}},[s("div",{staticClass:"btnGroup",staticStyle:{float:"left"},on:{click:function(e){return t.recallClick(a)}}},[0===a.partsReportInvStatus?s("van-icon",{staticStyle:{"margin-top":"4px"},attrs:{name:e("72f1"),size:"18"}}):s("van-icon",{staticStyle:{"margin-top":"4px"},attrs:{name:e("9fc3"),size:"18"}}),s("span",{staticClass:"iconText"},[t._v(t._s(t.$t("partReport.recallBtn")))])],1),s("div",{staticClass:"btnGroup",staticStyle:{float:"right"},on:{click:function(e){return t.qrClick(a)}}},[s("van-icon",{attrs:{name:e("ed60"),size:"25"}}),s("span",{staticClass:"iconText"},[t._v(t._s(t.$t("partReport.UniqueBtn")))])],1)])])])})),0)])]},proxy:!0}])})],1),t.showUniqueCodePopup?s("showUniqueCode",{attrs:{partId:t.partDetailID},on:{close:t.closeAndRefresh}}):t._e(),s("van-popup",{style:{height:"70%"},attrs:{position:"bottom"},model:{value:t.showReasonPopup,callback:function(a){t.showReasonPopup=a},expression:"showReasonPopup"}},[s("span",{staticClass:"selectTitle"},[t._v("报废原因")]),s("van-cell-group",{attrs:{inset:""}},[s("van-field",{staticClass:"textArea",attrs:{rows:"10",autosize:"",type:"textarea",maxlength:"500","show-word-limit":"",readonly:""},model:{value:t.reasonText,callback:function(a){t.reasonText=a},expression:"reasonText"}})],1),s("van-button",{on:{click:function(a){t.showReasonPopup=!1}}},[t._v("确 定")])],1)],1)},y=[],w=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("van-popup",{style:{width:"100%",height:"100%",backgroundColor:"#F7F7F7"},attrs:{position:"left"},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[s("blankPage",{attrs:{title:t.title},on:{onClickLeft:t.close},scopedSlots:t._u([{key:"body",fn:function(){return[s("div",{staticStyle:{height:"100%","background-color":"#FFFFFF"}},[s("van-row",{staticClass:"topRow"},[s("van-col",{attrs:{span:"10"}},[s("van-row",{staticClass:"topRow"},[s("van-col",{attrs:{span:"11",offset:"2"}},[t._v(t._s(t.$t("cuttingReport.report"))+"："+t._s(t.reportedQuantity))]),s("van-col",{attrs:{span:"11"}},[t._v(t._s(t.$t("cuttingReport.scrap"))+"："+t._s(t.scrappedQuantity))])],1)],1),s("van-col",{attrs:{span:"14"}},[s("van-row",{staticClass:"topRow"},[s("van-col",{attrs:{span:"16"}},[t._v(t._s(t.$t("partReport.reportSelected"))+"："+t._s(t.gridDetails.length-t.scrapSelected))]),s("van-col",{attrs:{span:"8"}},[t._v(t._s(t.$t("cuttingReport.scrap"))+"："+t._s(t.scrapSelected))])],1)],1)],1),t._l(t.gridDetails,(function(a,r){return s("van-row",{key:a.id},[s("van-col",{attrs:{span:"3",offset:"1"}},[s("van-icon",{staticStyle:{"margin-top":"5px"},attrs:{name:e("ed60"),size:"30"}})],1),s("van-col",{attrs:{span:"13"}},[s("span",{staticClass:"textCol"},[t._v(t._s(a.partDetailRowcode))])]),s("van-col",{attrs:{span:"7"}},[s("span",{staticClass:"textBtn",style:{backgroundColor:0===a.partDetailScrapped?"#bbbbbb":"#61408D"},on:{click:function(e){return t.scrapFun(a)}}},[t._v("\n                "+t._s(t.$t("cuttingReport.scrap"))+"\n              ")]),s("span",{staticClass:"textBtn",on:{click:function(a){return t.deleteFun(r)}}},[t._v(t._s(t.$t("remStock.delete")))])])],1)}))],2)]},proxy:!0}])}),s("van-tabbar",{ref:"footer",model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},[s("van-tabbar-item",{attrs:{icon:"add-square"},on:{click:function(a){return t.tabbarClick(t.active)}}},[t._v("添加")]),s("van-tabbar-item",{attrs:{icon:"checked"},on:{click:function(a){return t.tabbarClick(t.active)}}},[t._v("确认")])],1)],1),t.showAddPopup?s("addUniqueCode",{attrs:{partId:t.partId,selectedRows:t.gridDetails},on:{close:function(a){t.showAddPopup=!1},closeAndFresh:t.closeAndFresh}}):t._e()],1)},C=[],b=e("2241"),_=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("van-popup",{style:{width:"100%",height:"100%",backgroundColor:"#F7F7F7"},attrs:{position:"left"},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[s("blankPage",{attrs:{title:t.title},on:{onClickLeft:t.close},scopedSlots:t._u([{key:"body",fn:function(){return[s("div",{staticStyle:{height:"100%","background-color":"#FFFFFF"}},[s("van-row",{staticClass:"topRow"},[s("van-col",{attrs:{span:"10"}},[s("van-row",{staticClass:"topRow"},[s("van-col",{attrs:{span:"11",offset:"2"}},[t._v(t._s(t.$t("partReport.selected"))+"："+t._s(t.selectedQuantity))]),s("van-col",{attrs:{span:"11"}},[t._v(t._s(t.$t("partReport.required"))+"："+t._s(t.requiredQuantity))])],1)],1),s("van-col",{attrs:{span:"14"}},[s("van-row",{staticClass:"topRow"},[s("van-col",{attrs:{span:"16"}},[t._v(t._s(t.$t("partReport.thisSelection"))+"："+t._s(t.choiceQuantity))]),s("van-col",{attrs:{span:"8"}},[t._v(t._s(t.$t("partReport.total"))+"："+t._s(t.totalQuantity))])],1)],1)],1),t._l(t.gridDetails,(function(a){return s("van-row",{key:a.id},[s("van-col",{attrs:{span:"3",offset:"1"}},[s("van-icon",{staticStyle:{"margin-top":"5px"},attrs:{name:e("ed60"),size:"30"}})],1),s("van-col",{attrs:{span:"13"}},[s("span",{staticClass:"textCol"},[t._v(t._s(a.id))])]),s("van-col",{attrs:{span:"7"}},[s("span",{staticClass:"textBtn",style:{backgroundColor:!1===a.selected?"#bbbbbb":"#61408D"},on:{click:function(e){return t.choiceFun(a)}}},[t._v("\n                "+t._s(t.$t("partReport.choice"))+"\n              ")])])],1)}))],2)]},proxy:!0}])}),s("van-tabbar",{ref:"footer"},[s("van-button",{staticClass:"submitBtn",on:{click:t.submit}},[t._v("确 定")])],1)],1)],1)},R=[],k={name:"addUniqueCode",components:{},props:{partId:{type:String,default:function(){return""}},selectedRows:{type:Array,default:function(){return[]}}},data:function(){return{title:"添加唯一码",show:!0,gridDetails:[],totalQuantity:0,requiredQuantity:0,selectedQuantity:0,choiceQuantity:0,selectedResult:[]}},methods:{choiceFun:function(t){var a=this;t&&(this.gridDetails.forEach((function(e){if(e.id==t.id)if(t.selected)a.choiceQuantity--,a.selectedQuantity--,a.requiredQuantity++,e.selected=!1;else{if(0===a.requiredQuantity)return void a.$toast.fail(a.$t("partReport.choiceWarning"));a.choiceQuantity++,a.selectedQuantity++,a.requiredQuantity--,e.selected=!0}})),this.gridDetails=JSON.parse(JSON.stringify(this.gridDetails)))},close:function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&(t.flag=!1),this.$emit("close",a)},loadGridDetail:function(){var t=this;this.selectedQuantity=this.selectedRows.length,this.partId&&this.$ajax("/nest/nestpartdetail/querypartdetail","",{id:this.partId},(function(a){var e=a.data.data;t.choiceQuantity=0,e&&(t.totalQuantity=e.select.length+e.selected.length,t.requiredQuantity=e.reportNum+e.scrappedNum-t.selectedQuantity,t.gridDetails=[],e.select.forEach((function(a){var e=!1;t.selectedRows.forEach((function(s){a==s.partDetailRowcode&&(e=!0,s.id||t.choiceQuantity++)})),t.gridDetails.splice(t.gridDetails.length,0,{id:a,selected:e})})))}))},submit:function(){var t=this;this.selectedResult=[],this.selectedRows.forEach((function(a){a.id&&t.selectedResult.splice(t.selectedResult.length-1,0,a)})),this.gridDetails.forEach((function(a){if(a.selected){var e=0;t.selectedRows.forEach((function(t){t.partDetailRowcode==a.id&&(e=t.partDetailScrapped)})),t.selectedResult.splice(t.selectedResult.length,0,{partDetailRowcode:a.id,partDetailScrapped:e})}})),this.$emit("closeAndFresh",this.selectedResult)}},created:function(){this.loadGridDetail()},watch:{}},S=k,P=(e("9029"),Object(v["a"])(S,_,R,!1,null,"00dc62a4",null)),x=P.exports,I={name:"showUniqueCode",components:{addUniqueCode:x},props:{partId:{type:String,default:function(){return""}}},data:function(){return{title:"唯一码",show:!0,gridDetails:[],active:1,reportedQuantity:0,scrappedQuantity:0,scrapSelected:0,showAddPopup:!1,changed:!1}},methods:{closeAndFresh:function(t){var a=this;this.changed=!0,this.showAddPopup=!1,this.gridDetails=t,this.scrapSelected=0,t.forEach((function(t){1===t.partDetailScrapped&&a.scrapSelected++}))},scrapFun:function(t){var a=this;t&&(this.changed=!0,this.gridDetails.forEach((function(e){e.partDetailRowcode==t.partDetailRowcode&&(0===t.partDetailScrapped?(a.scrapSelected++,e.partDetailScrapped=1):(a.scrapSelected--,e.partDetailScrapped=0))})),this.gridDetails=JSON.parse(JSON.stringify(this.gridDetails)))},deleteFun:function(t){this.changed=!0,this.gridDetails.splice(t,1)},close:function(t){var a=this,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&(t.flag=!1),this.changed?b["a"].confirm({width:"80%",message:this.$t("partReport.saveWarning")}).then((function(){a.$emit("close",e)})).catch((function(){})):this.$emit("close",e)},search:function(){var t=this;this.partId&&this.$ajax("/nest/nestpartdetail/querypartdetail","",{id:this.partId},(function(a){var e=a.data.data;e&&(t.reportedQuantity=e.reportNum,t.scrappedQuantity=e.scrappedNum,t.gridDetails=e.selected,t.scrapSelected=0,t.gridDetails.forEach((function(a){1===a.partDetailScrapped&&t.scrapSelected++})))}))},tabbarClick:function(t){0===t?this.showAddPopup=!0:1===t&&this.submit()},submit:function(){var t=this,a={nestPartDetails:this.gridDetails,pid:this.partId};this.$ajax("/nest/nestpartdetail/partdetailsave","",a,(function(a){t.$toast.success(t.$t("base.save")),t.$emit("close",!1)}))}},created:function(){this.search()},watch:{}},$=I,N=(e("bbe2"),Object(v["a"])($,w,C,!1,null,"aec39c76",null)),D=N.exports,q={name:"reportDetail",components:{showUniqueCode:D},props:{curPartId:{type:String,default:function(){return""}},programId:{type:String,default:function(){return""}}},data:function(){return{title:"报工明细",show:!0,equipmentName:"",partDrawCode:"",gridDetails:[],showUniqueCodePopup:!1,partDetailID:"",showReasonPopup:!1,reasonText:"",reasonColWidth:0}},methods:{openReasonPopup:function(t){t&&(this.reasonText=t,this.showReasonPopup=!0)},closeAndRefresh:function(){this.showUniqueCodePopup=!1,this.search()},splitTimeString:function(t){return t&&t.length>17?t.slice(0,16):t},getReportTypeText:function(t){return"1"==t?"首检":"2"==t?"中检":"3"==t?"末检":"-"},closePopup:function(t){t.flag=!1,this.showUniqueCodePopup=!1},close:function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&(t.flag=!1),this.$emit("close",a)},search:function(){var t=this,a=this;this.programId&&this.curPartId&&(this.gridDetails=[],this.$ajax("/nest/nestpartsreport/query","",{id:this.programId},(function(e){var s=e.data.data;s&&s.forEach((function(e){e.id==t.curPartId&&(a.partDrawCode=e.partDrawcode,a.gridDetails=e.children)}))})))},recallClick:function(t){var a=this;t&&0===t.partsReportInvStatus&&this.$ajax("/nest/nestpartsreport/revoke","",{id:t.id},(function(t){a.$toast.success(a.$t("partReport.revokeSuc")),a.search()}),(function(){a.search()}))},qrClick:function(t){t&&(this.partDetailID=t.id,this.showUniqueCodePopup=!0)}},created:function(){this.reasonColWidth=.9*window.innerWidth-70,this.search()},mounted:function(){},watch:{}},F=q,T=(e("374e"),Object(v["a"])(F,g,y,!1,null,"74de365e",null)),E=T.exports,B={name:"partReport",components:{splitAndReport:m,reportDetail:E},props:{programInfo:{type:Object,default:function(){return{}}}},data:function(){return{title:"零件报工",show:!0,myDrawName:"",partNum:0,gridDetails:[],reporting:!1,todoReportMap:{},partImgUrlMap:{},active:1,showNestJPG:!1,jpgUrl:"",filterZero:!1,loading:!1,defaultStack:{},showSplitPopup:!1,curPartInfo:{},partsReportPid:"",euipmentId:"",showDetailView:!1,curPartId:"",programId:""}},methods:{close:function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&(t.flag=!1),this.$emit("close",a)},closeAndFresh:function(){this.showSplitPopup=!1,this.showDetailView=!1,this.search()},showNestJpgFun:function(){var t=this;if(this.programInfo){var a={picFileBussid:this.programInfo.woProCode,picFileBusstype:"NESTFILE",picFileLast:1};this.$ajax("/nest/nestpicfile/getpicfileargs","",a,(function(a){if(a.data.data.length>0){var e=[];a.data.data.forEach((function(a){var s=t.getBaseUrl()+a.picFileUrl;e.push(s)})),Object(n["a"])(e)}else t.$toast.fail(t.$t("partReport.noNCFile"))}))}},tabbarClick:function(t){0===t?this.showNestJpgFun():1===t?(this.filterZero=!this.filterZero,this.search()):2===t?this.partOrdinaryCutter():3===t&&this.ordinaryCutter()},partOrdinaryCutter:function(){var t=this;this.loading=!0;var a={partsReportPid:this.programInfo.id,partsReportEquipment:this.programInfo.woEquipmentId,partsReportCuttingType:"1",storeId:this.defaultStack.stackStoreId,stackId:this.defaultStack.id};this.$ajax("/nest/nestpartsreport/partcut","",a,(function(a){t.$toast.success(t.$t("partReport.success")),t.loading=!1,t.search()}),(function(){t.loading=!1}))},ordinaryCutter:function(){var t=this;this.loading=!0;var a={partsReportPid:this.programInfo.id,partsReportEquipment:this.programInfo.woEquipmentId,partsReportCuttingType:"1",storeId:this.defaultStack.stackStoreId,stackId:this.defaultStack.id};this.$ajax("/nest/nestpartsreport/cut","",a,(function(a){t.$toast.success(t.$t("partReport.success")),t.loading=!1,t.search()}),(function(){t.loading=!1}))},search:function(){var t=this;this.gridDetails=[],this.programInfo&&this.programInfo.id&&this.$ajax("/nest/nestpartsreport/query","",{id:this.programInfo.id},(function(a){var e=a.data.data;e&&(e.forEach((function(a){t.filterZero&&0===parseInt(a.requiredQuantity)||t.myDrawName&&-1==a.partDrawcode.indexOf(t.myDrawName)||(t.gridDetails[t.gridDetails.length]=a,t.getPartImage(a))})),t.gridDetails=JSON.parse(JSON.stringify(t.gridDetails)),t.getTodoData(e))}))},getPartImage:function(t){var a=this;this.$ajax("/nest/nestmbom/getbyid","",{id:t.mbomId},(function(e){e.data.data&&(a.partImgUrlMap[t.id]=e.data.data.mbomSpicAddr,a.partImgUrlMap=JSON.parse(JSON.stringify(a.partImgUrlMap)))}))},getTodoData:function(t){var a=this;t.forEach((function(t){if(t)if(t.children){var e=0;t.children.forEach((function(t){t&&"0"==t.partsReportInvStatus&&(e+=1)})),a.todoReportMap[t.id]=e}else a.todoReportMap[t.id]=0})),this.todoReportMap=JSON.parse(JSON.stringify(this.todoReportMap))},report:function(t){!0!==this.reporting&&(this.reporting=!0,this.$toast.success(t.proName),this.reporting=!1)},showDetail:function(t){this.curPartId=t.id,this.programId=this.programInfo.id,this.showDetailView=!0},showSplit:function(t){t&&0==t.requiredQuantity?this.$toast(this.$t("partReport.splitFail")):(this.euipmentId=this.programInfo.woEquipmentId,this.partsReportPid=this.programInfo.id,this.curPartInfo=t,this.showSplitPopup=!0)},onBlur:function(){this.search()}},created:function(){var t=this;this.$ajax("/common/comequipment/getpartlinesidelibrarybyid","",{id:this.programInfo.woEquipmentId},(function(a){t.defaultStack=a.data.data})),this.search()},watch:{}},Q=B,M=(e("e595"),Object(v["a"])(Q,l,c,!1,null,"dfc904e2",null)),U=M.exports,j={name:"selectProgram",components:{partReport:U},props:{equipmentInfo:{type:Object,default:function(){return{}}}},data:function(){return{title:"选择程序",show:!0,equipmentName:"",proNum:0,gridDetails:[],curPro:{},showPartReport:!1,rateMap:{},showNestJPG:!1,jpgUrl:"",showNestDetail:!1,tableHeight:0,tableQueryUrl:[{key:"nestingPlate",paramName:"proMatCode",url:"/nest/nestprogrammat/autopageNew"},{key:"nestedPartsSummary",paramName:"partProCode",url:"/nest/nestparts/autopage"},{key:"nestingPartsDetails",paramName:"partlistProCode",url:"/nest/nestpartlist/autopage"},{key:"cutOffTheRemainder",paramName:"remProCode",url:"/nest/nestrem/autopage"}],detailTags:[{key:"nestingPlate",title:"套料板材"},{key:"nestedPartsSummary",title:"套料零件汇总"},{key:"nestingPartsDetails",title:"套料零件明细"},{key:"cutOffTheRemainder",title:"截取余料"}],tableHeader:{nestingPlate:[{key:"proMatName",title:"套料钢板名"},{key:"proMatSheettype",title:"材料类型"},{key:"remStatus",title:"余料状态"},{key:"proMatMaterial",title:"材质"},{key:"proMatThickness",title:"厚度"},{key:"proMatLength",title:"长度"},{key:"proMatWidth",title:"宽度"},{key:"proMatArea",title:"面积"},{key:"proMatWeight",title:"重量"},{key:"proMatField1",title:"数据1"},{key:"proMatField2",title:"数据2"},{key:"proMatField3",title:"数据3"},{key:"proMatField4",title:"数据4"}],nestedPartsSummary:[{key:"partField1",title:"项目号"},{key:"partGroupId",title:"套料序号"},{key:"partMbomCode",title:"物料编码"},{key:"partDrawcode",title:"图号"},{key:"partNestedsum",title:"套料数量"},{key:"partArea",title:"净面积"},{key:"partWeight",title:"净重量"},{key:"partPiercessum",title:"穿孔数"},{key:"partCutlength",title:"切割长度"},{key:"partCuttime",title:"切割时间"},{key:"partLength",title:"零件长度"},{key:"partWidth",title:"零件宽度"}],nestingPartsDetails:[{key:"partField1",title:"项目号"},{key:"nestedPartId",title:"套料序号"},{key:"partMbomCode",title:"物料编码"},{key:"partDrawcode",title:"图号"},{key:"partlistRowcode",title:"唯一码"},{key:"partlistCutrowid",title:"切割时序"},{key:"partlistNestedsum",title:"套料数量"},{key:"partArea",title:"净面积"},{key:"partWeight",title:"净重量"},{key:"partPiercessum",title:"穿孔数"},{key:"partCutlength",title:"切割长度"},{key:"partlistLength",title:"零件长度"},{key:"partlistWidth",title:"零件宽度"}],cutOffTheRemainder:[{key:"remName",title:"余料名称"},{key:"remMaterial",title:"材质"},{key:"remThickness",title:"厚度"},{key:"remLength",title:"长度"},{key:"remWidth",title:"宽度"},{key:"remArea",title:"面积"},{key:"remWeight",title:"重量"},{key:"remField1",title:"数据1"},{key:"remField2",title:"数据2"},{key:"remField3",title:"数据3"},{key:"remField4",title:"数据4"}]},tableData:{nestingPlate:[],nestedPartsSummary:[],nestingPartsDetails:[],cutOffTheRemainder:[]}}},methods:{closePopup:function(t){t.flag=!1,this.showNestDetail=!1},closePartPopup:function(){this.showPartReport=!1,this.search()},afterMounted:function(){var t=this.$refs.detailPage.bodyheight,a=document.getElementsByClassName("van-tabs__nav")[0].offsetHeight;this.tableHeight=t-a-15},close:function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&(t.flag=!1),this.$emit("close",a)},search:function(){var t=this,a=this;if(this.equipmentInfo.id){var e={current:1,rows:200,exp:{woEquipmentId:"=",woStatus:"in",woReportStatus:"in"},value:{woEquipmentId:this.equipmentInfo.id,woStatus:"20,30,40",woReportStatus:"0,10,20"},order:{},slaves:{}};localStorage.setItem("xsModuleId","manufacture_4001"),this.$ajax("/nest/cutworkorder/tobecutautopage","",e,(function(e){var s=e.data.data.records;s?(a.gridDetails=s,a.gridDetails.forEach((function(t){a.formatRate(t.proUsedraterem,t.id)}))):t.gridDetails=[],t.proNum=t.gridDetails.length,localStorage.setItem("xsModuleId","")}))}else this.gridDetails=[],this.proNum=0},formatRate:function(t,a){t&&(this.rateMap[a]=Math.round(100*t,2)/100)},report:function(t){this.curPro=t,this.showPartReport=!0},showNestJpgFun:function(t){var a=this,e={picFileBussid:t.woProCode,picFileBusstype:"NESTFILE",picFileLast:1};this.$ajax("/nest/nestpicfile/getpicfileargs","",e,(function(t){if(t.data.data.length>0){var e=[];t.data.data.forEach((function(t){var s=a.getBaseUrl()+t.picFileUrl;e.push(s)})),Object(n["a"])(e)}else a.$toast.fail(a.$t("partReport.noNCFile"))}))},showDetail:function(t){var a=this;this.tableQueryUrl.forEach((function(e){var s={};s[e.paramName]=t.woProCode;var r={};r[e.paramName]="=",a.$ajax(e.url,"",{current:1,rows:100,value:s,exp:r,order:{}},(function(t){var s=t.data.data.records;s.forEach((function(t){for(var e in a.numberCol)if(t.hasOwnProperty(e)){var s=a.numberCol[e];t[e]=Math.round(t[e]*Math.pow(10,s))/Math.pow(10,s)}})),a.tableData[e.key]=s}))})),this.showNestDetail=!0}},created:function(){this.search()},watch:{}},O=j,A=(e("7f7c"),Object(v["a"])(O,i,o,!1,null,"9a232dbc",null)),J=A.exports,L=(e("02df"),{name:"selectEquipment",components:{selectProgram:J},data:function(){return{title:"选择设备",current:1,size:8,pages:0,total:0,rowDatas:[],equipmentName:"",equipmentNum:0,curEquipment:{},showSelectPro:!1,myEquipmentId:""}},methods:{search:function(){var t=this,a=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],{current:1,rows:200,exp:{},value:{},order:{},slaves:{}});this.equipmentName&&(a.exp={equipmentName:"like"},a.value={equipmentName:this.equipmentName}),this.$ajax("/common/comequipment/cutReportEquipmentAutoPage","",a,(function(a){t.rowDatas=a.data.data.records,t.equipmentNum=a.data.data.total,t.myEquipmentId&&t.rowDatas.forEach((function(a){a.id==t.myEquipmentId&&(t.curEquipment=a,t.showSelectPro=!0)}))}))},closePopup:function(){this.showSelectPro=!1,this.myEquipmentId?this.$refs.baseNavigation.onClickLeft():this.search()},initSelect:function(){},onBlur:function(){this.search()},openView:function(t){this.curEquipment=t,this.showSelectPro=!0}},created:function(){this.myEquipmentId=this.$route.query.equipmentId,this.initSelect()},mounted:function(){this.search()},watch:{}}),W=L,z=(e("a017"),Object(v["a"])(W,s,r,!1,null,"0e3aca2a",null));a["default"]=z.exports},6571:function(t,a,e){},"7f7c":function(t,a,e){"use strict";var s=e("b81d"),r=e.n(s);r.a},9029:function(t,a,e){"use strict";var s=e("f1a3"),r=e.n(s);r.a},9871:function(t,a,e){},a017:function(t,a,e){"use strict";var s=e("bd90"),r=e.n(s);r.a},b81d:function(t,a,e){},bbe2:function(t,a,e){"use strict";var s=e("9871"),r=e.n(s);r.a},bd90:function(t,a,e){},d4dc:function(t,a,e){},e595:function(t,a,e){"use strict";var s=e("0eec"),r=e.n(s);r.a},f1a3:function(t,a,e){}}]);