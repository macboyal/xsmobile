(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49675f27"],{"03c8":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("basePage",{ref:"basePage",attrs:{title:t.$t("semiProductStorage.title"),buttons:t.buttons,footerText:t.footerText,draggable:!1,btnMethod:t.btnMethod,customFixedField3:!0,selectItems:t.selectItems,numberCol:t.numberCol},on:{buttonsClick:t.buttonsClick,aftercheck:t.aftercheck,aftercheckall:t.aftercheckall,afterquery:t.afterquery},scopedSlots:t._u([{key:"over",fn:function(){return[s("van-row",{staticClass:"sum"},[s("van-col",{attrs:{span:"4"}},[s("span",{staticClass:"smallfont"},[t._v(t._s(t.$t("rawMaterialStorage.store")))])]),s("van-col",{attrs:{span:"14"}},[s("menuselect",{staticStyle:{width:"100%"},attrs:{options:t.options,showFirstItem:""},model:{value:t.storeId,callback:function(e){t.storeId=e},expression:"storeId"}})],1),s("van-col",{attrs:{span:"6"}},[s("span",{staticClass:"smallfont",staticStyle:{float:"right","margin-right":"10px"}},[t._v("\n            "+t._s(t.$t("rawMaterialStorage.total")+":"+t.total)+"\n          ")])])],1)]},proxy:!0}])}),s("stackSelect",{ref:"stackSelect",attrs:{storeId:t.storeId,options:t.options,storeType:3,show:t.show,api:"/nest/nestwiplineparts/getpartstack"},on:{closeSelect:t.closeSelect,beforesearch:t.beforesearch,sure:t.sure}})],1)},o=[],r=(s("386d"),s("c5f6"),s("ac6a"),s("02df")),i={name:"semiProductStorage",data:function(){return{numberCol:{3:["partsReportReportNumber"]},storeId:"",options:[],total:0,buttons:[{key:"warehouse",name:this.$t("semiProductStorage.warehousing")}],footerText:[{key:"quantity",display:this.$t("semiProductStorage.quantity"),value:0},{key:"weight",display:this.$t("semiProductStorage.weight"),value:0}],btnMethod:{querymethod:"/nest/nestsemiorder/autopage"},show:!1,selectItems:{}}},methods:{initSelect:function(){var t=this;this.$ajax("/wms/wmsstore/list","",{storeType:3},(function(e){var s=[];e.data.data.forEach((function(t){var e={text:t.storeName,value:t.id};s.push(e)})),t.options=s})),this.$ajax("/common/comteam/list","",{},(function(e){var s=[];e.data.data.forEach((function(t){var e={id:t.id,name:t.teamName};s.push(e)})),t.selectItems.partsReportTeamId=s})),this.$ajax("/auth/dep/listdep","",{},(function(e){var s=[];e.data.data.forEach((function(t){var e={id:t.id,name:t.depName};s.push(e)})),t.selectItems.partsReportWorkshop=s})),this.$ajax("/common/comequipment/list","",{},(function(e){var s=[];e.data.data.forEach((function(t){var e={id:t.id,name:t.equipmentName};s.push(e)})),t.selectItems.partsReportEquipment=s})),this.$ajax("/auth/user/list","",{},(function(e){var s=[];e.data.data.forEach((function(t){var e={id:t.id,name:t.userRealname};s.push(e)})),t.selectItems.partsReportUserId=s})),this.selectItems["partsReportFeedback"]=r["a"].getDict("NEST_FEEDBACK_STATUS"),this.selectItems["isConsistent"]=r["a"].getDict("Is_Consistent"),this.selectItems["scanCodeStatus"]=r["a"].getDict("Scan_Code_Status")},buttonsClick:function(t){if("warehouse"===t){var e=this.$refs.basePage.ischeckall();if(e)this.show=!0;else{var s=this.$refs.basePage.getselected();s&&s.length>0?this.show=!0:this.$toast.fail(this.$t("base.noselect"))}}},closeSelect:function(t){t&&(t.flag=!1),this.show=!1},beforesearch:function(){},afterquery:function(t){this.total=t.extParams.totalNum||0},aftercheck:function(t){if(!1===this.$refs.basePage.checkAll){var e=this.$refs.basePage.getselected(),s=0,a=0;e.forEach((function(t){s+=Number(t.partsReportWeight)*Number(t.partsReportReportNumber),a+=Number(t.partsReportReportNumber)})),this.footerText[0].value=a,this.footerText[1].value=r["a"].numberFormat("4",s)+this.$t("oriStock.KG")}},aftercheckall:function(){if(!0===this.$refs.basePage.checkAll){this.footerText[0].value=this.$refs.basePage.extParams.totalNum;var t=this.$refs.basePage.extParams.totalWeight;this.footerText[1].value=r["a"].numberFormat("4",t)+this.$t("oriStock.KG")}else this.footerText[0].value=0,this.footerText[1].value=0},sure:function(t){var e=this.$refs.basePage.ischeckall();if(e)this.warehouseAll(t);else{var s=this.$refs.basePage.getselected();s&&s.length>0?this.warehouse(t.stackId):this.$toast.fail(this.$t("base.noselect"))}},warehouseAll:function(t){var e=this,s=this.$refs.basePage.getsearchJson(),a={autoConditionEntity:s,storeId:t.storeId,stackId:t.stackId},o=this;this.$toast.loading({forbidClick:!0,duration:0}),this.$ajax("/nest/nestsemiorder/warehousingall","",a,(function(t){e.show=!1,e.$toast.success(o.$t("semiProductStorage.success")),e.$refs.basePage.checkAll=!1,e.aftercheckall(),o.$refs.basePage.search()}))},warehouse:function(t){var e=this,s=this,a=this.$refs.basePage.getselected();this.$toast.loading({forbidClick:!0,duration:0});var o=a.map((function(t){return t.id})),r={ids:o,storeId:this.storeId,stackId:t};this.$ajax("/nest/nestsemiorder/warehousing","",r,(function(){s.show=!1,s.$toast.success(e.$t("semiProductStorage.success")),e.$refs.basePage.checkAll=!1,e.aftercheckall(),e.$refs.basePage.search()}))}},created:function(){this.initSelect()}},c=i,n=(s("1d66"),s("2877")),l=Object(n["a"])(c,a,o,!1,null,"e8f930b4",null);e["default"]=l.exports},"1d66":function(t,e,s){"use strict";var a=s("f90f"),o=s.n(a);o.a},f90f:function(t,e,s){}}]);