(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6248d878"],{"13f3":function(t,e,a){"use strict";var i=a("bdab"),s=a.n(i);s.a},"1d04":function(t,e){t.exports="data:image/png;base64,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"},"33ec":function(t,e,a){},3601:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAVFJREFUOE/VVK9Pw2AQfdeSBUWmMCgkqEmm+jWEEP4AMJhWYFhCyNoNQ8IMgv0iIUEhvhoUBocgZF/V9MwsCoVDkYX2yJZ1axsCadjEzt3l8u7Xu0eYsdGM8TABtERDaNC3GNidFuF3qZyDyLfEdV5DeMGgQqyRHiN49FRFDWMTQFu07gjYCBGex7uOEqeg9QJA+cgn1i5B6EvlHKUA2x1G4HuqUsuyBks0agTdkKpsLhigZTR3aAlv8sXtZxnZ3m5u8hfWPN99ToycBeS33NGVh1UQaLf/AtXD0nC6OA/H19UYCFOE/ymWLB+xY36fYpvNKof06vnOQ5bRLaO1Txqvy45bXzAe2mLWr2e0rkCoAjRSjbH1pCqfxnca/W5MkQQYdek7Z4kdHu7drOQ+B0VmLqbUJiEWltk+BgerE7Uh6g6Wc937p5OP+X1KFpr8lfsNKe+lFe3PHB8AAAAASUVORK5CYII="},5571:function(t,e,a){"use strict";var i=a("33ec"),s=a.n(i);s.a},5952:function(t,e,a){"use strict";var i=a("88a0"),s=a.n(i);s.a},"5cac":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card",style:{"background-color":t.data.color}},[i("van-row",{staticClass:"header",style:{borderBottom:t.data.color?"1px dashed #f7f7f7":"1px dashed #DCDCDC"}},[i("van-checkbox",{ref:"checkbox",staticStyle:{overflow:"auto",float:"bottom","font-size":"0.8rem"},attrs:{"checked-color":"rgb(251, 205, 5)","icon-size":"0.8rem"},on:{click:function(e){return t.checkboxclick(t.checked)}},scopedSlots:t._u([{key:"default",fn:function(){return[i("span",{staticClass:"fixed1"},[t._v("\n          程序名称\n        ")]),i("span",{staticClass:"fixed1text"},[t._v("\n         "+t._s(t.data["proName"])+"\n        ")]),i("span",{staticClass:"fixed2"},[t._v("\n            利用率: "+t._s(t.data["proUsedraterem"].toFixed(2))+"%\n        ")])]},proxy:!0}]),model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}})],1),i("div",{staticClass:"body"},[i("van-row",{staticStyle:{"vertical-align":"middle","align-items":"center",display:"flex"}},[i("van-col",{attrs:{span:"19"}},[i("van-row",{attrs:{align:"center"}},[i("van-col",{attrs:{span:"9"}},[i("span",{staticClass:"cardtitle"},[t._v("材质\n            ")])]),i("van-col",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis"},attrs:{span:"15"}},[i("span",{staticClass:"cardtext"},[t._v(" "+t._s(t.data.proMaterial)+"\n            ")])])],1),i("van-row",{attrs:{align:"center"}},[i("van-col",{attrs:{span:"9"}},[i("span",{staticClass:"cardtitle"},[t._v("规格")])]),i("van-col",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis"},attrs:{span:"15"}},[i("span",{staticClass:"cardtext"},[t._v(" "+t._s(t.data.proThickness)+"*"+t._s(t.data.proUsedwidth)+"*"+t._s(t.data.proUsedlength))])])],1),i("van-row",{attrs:{align:"center"}},[i("van-col",{attrs:{span:"9"}},[i("span",{staticClass:"cardtitle"},[t._v("工单状态")])]),i("van-col",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis"},attrs:{span:"15"}},["0"===t.data.woStatus?i("van-tag",{staticClass:"cardtext",attrs:{color:"#666666"}},[t._v("未切割")]):t._e(),"10"===t.data.woStatus?i("van-tag",{staticClass:"cardtext",attrs:{color:"#ffcc00"}},[t._v("待切割")]):t._e(),"20"===t.data.woStatus?i("van-tag",{staticClass:"cardtext",attrs:{color:"#009900"}},[t._v("切割中")]):t._e(),"30"===t.data.woStatus?i("van-tag",{staticClass:"cardtext",attrs:{color:"#6666cc"}},[t._v("暂停中")]):t._e(),"40"===t.data.woStatus?i("van-tag",{staticClass:"cardtext",attrs:{color:"#ff0000"}},[t._v("已切割")]):t._e(),"50"===t.data.woStatus?i("van-tag",{staticClass:"cardtext",attrs:{color:"#61408c"}},[t._v("已挂起")]):t._e()],1)],1),i("van-row",{attrs:{align:"center"}},[i("van-col",{attrs:{span:"9"}},[i("span",{staticClass:"cardtitle"},[t._v("是否备料")])]),i("van-col",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis"},attrs:{span:"15"}},[0===t.data.woPreStatus?i("van-tag",{staticClass:"cardtext",attrs:{color:"#ff0000"}},[t._v("未备料")]):t._e(),1===t.data.woPreStatus?i("van-tag",{staticClass:"cardtext",attrs:{color:"#ffcc00"}},[t._v("部分备料")]):t._e(),2===t.data.woPreStatus?i("van-tag",{staticClass:"cardtext",attrs:{color:"#009900"}},[t._v("已备料")]):t._e()],1)],1)],1),i("van-col",{attrs:{span:"5"}},[i("van-row",[i("van-button",{staticStyle:{width:"100%"},attrs:{color:"#fbce08",size:"mini"},on:{click:function(e){return t.buttonClick("image")}}},[t._v("套料图")])],1),i("van-row",[i("van-button",{staticStyle:{width:"100%"},attrs:{color:"#fbce08",size:"mini"},on:{click:function(e){return t.buttonClick("NC")}}},[t._v("NC")])],1),i("van-row",[i("van-button",{staticStyle:{width:"100%"},attrs:{color:"#fbce08",size:"mini"},on:{click:function(e){return t.buttonClick("detail")}}},[t._v("明细")])],1)],1)],1)],1),i("div",{staticClass:"foot",staticStyle:{"border-top":"1px solid  #ebebeb"}},[i("van-row",[i("van-col",{staticStyle:{"white-space":"nowrap"},attrs:{span:"4"}},[i("div",{staticClass:"fixed3"},[t._v("\n          计划完工时间:"+t._s(t.data["selEndtime"])+"\n        ")])]),i("van-col",{attrs:{span:"20"}},[i("van-button",{staticClass:"detailbutton",attrs:{size:"small",plain:""},on:{click:t.openDetail}},[t._v("\n        查看详情 >\n        ")]),i("van-icon",{staticStyle:{float:"right","margin-right":"20px"},attrs:{name:a("61c4"),size:"18"},on:{click:t.toTop}})],1)],1)],1)],1)},s=[],n=(a("7f7f"),a("456d"),a("ac6a"),a("7618")),o=a("02df"),r={name:"taskCard",props:{baseUrl:{type:String,default:function(){return""}},numberCol:{type:Object,default:function(){return{}}},primaryKeyValue:{type:String,default:function(){return""}},selectItems:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{}}},cardField:{type:Array,default:function(){return[]}}},data:function(){return{checked:!1}},methods:{buttonClick:function(t){this.$emit("buttonClick",t,this.data)},fomatFloat:function(t,e){if(void 0!==e&&""!==e&&null!==e){var a=2;return a=this.numberCol[t]?this.numberCol[t]:o["a"].getAccuracy("4"),"string"==typeof a?o["a"].formTime(a,e):Math.round(e*Math.pow(10,a))/Math.pow(10,a)}},footIconClick:function(){this.$emit("footIconClick",this.data)},getPrimaryKeyValue:function(){return this.primaryKeyValue},btnclick:function(t){this.$emit("cardbtnclick",t,this.data)},openDetail:function(){this.$emit("openDetail",this.data)},checkboxclick:function(t){this.$emit("checkboxclick",t,this.primaryKeyValue,this.data)},click:function(){this.$emit("click")},toTop:function(){this.$emit("toTop",this.data)}},computed:{tableKV:function(){var t=this,e={};return Object.keys(this.selectItems).forEach((function(a){if(t.selectItems[a]&&"object"==Object(n["a"])(t.selectItems[a])){var i={};t.selectItems[a].forEach((function(t){i[t.id]=t.name})),e[a]=i}})),e},tableKC:function(){var t=this,e={};return Object.keys(this.selectItems).forEach((function(a){if(t.selectItems[a]&&"object"==Object(n["a"])(t.selectItems[a])){var i={};t.selectItems[a].forEach((function(t){t.color&&(i[t.id]=t.color)})),e[a]=i}})),e}},created:function(){var t=this.data.checked;t&&(this.checked=!0)}},c=r,l=(a("5952"),a("2877")),u=Object(l["a"])(c,i,s,!1,null,"fac362dc",null);e["a"]=u.exports},6198:function(t,e,a){"use strict";var i=a("6361"),s=a.n(i);s.a},"61c4":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAALFJREFUOE/t1KENwkAYBtBXyypIPDNgwBImQGEJOIZAgAWFRYJlALaBXHJHGmh7FQ2qNW3S3ruvX/+00PFRdOypAk+YttzojFn52b8krAoXEg9wzCVvkzBgoYYndjk0ByZsG5MtsG5Cm8CEhdKHEbzgihUOVa9fB87jggkCsomLw3mEG5bYf6N14Atj3EtQuExwQB/8jl2uwxSgnLDxQ/dgbT19h/WT03Zscj+Zz/3OwTf1fh4V5TmbXgAAAABJRU5ErkJggg=="},6361:function(t,e,a){},"690e":function(t,e,a){"use strict";var i=a("c623"),s=a.n(i);s.a},"73dc":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAA2VJREFUWEfNlztoFFEUhv9zZwsjQcFCZ+7sgCJaaCM+UBIQBUVQUQtfCBJBCxG0stLCWGhj4eK78I0gRhEExVehoIiCgiLaSBB2M3N3FZuQWM3MkRtm1911HpkYiQMhy9w593znec8lTPBDefVXKpUVhmGsBjADgBnJVwHUgiB46jjO8zx7jgqgWq3OCoKgRwixmZnnpykgok8AbhPRddM0v2bBpAIopeYB2MvMPQCmZG3Wtj5IRNcAXLAs63OSbCJApLwvy+IsqMgjW5MgYgHGS3kdLg3iD4DxVp4F0QLwr5SnQbQDnGLm/VlxzVonoltEVAKwJAzDU83fE9Fpy7IONKDqP3SphWH4fgzZ3rz/CwAlKeVd/VIptY+Zz7ZXhxBiQb1EGx5wXbeXiI5kWZew3k9EJy3LGlGmlNJZ3+d53jMAK9pliKjXsqyj+n0DwPO8twAW5QT4qS3W7rYs67vruguJ6AYRndHNiJm/Jez3Tkq5uAFQqVSWGobxOo9yZr7KzKVisfihv79/akdHh246GwH8MAxjaRiGa2Lc31ARBMEyx3HejHjA87xjAA6NEuBxFOdH+nvXdU8Q0cEm2RtSyp2e5z0BoM+MpOe4lPJwHeAigN1pAMz8USu2bftyBL0XwPkYmZ1E9DjF/XWRS1LKPXWA+wDWJQD8AHBSCFEyTXO4Vqut9n3/KhHJmO+HiWgWgC1p7o/kHkgp16cCENE53/dLjuN8KZfLswuFgrZ+eYqnrkspe1zXvUdEGzJC2gIQF4LnUsqVepNardbl+343EXUB0H/T4zZn5k1CiFfMXAYwKQOgJQSxScjMfQBeMPPLYrGom5RO2MnM3A1AAzX6BhH5Q0NDnZ2dnTuYeSRPMp7fSTjKMtSDhu50L/V/KWVZKXWFmXdpRRrWtu1tSqmbzLw9S3tLGUaW5WpEhUJhThAEPjPrbjeTmY8KIfT8oCGnZQC0NqKonvO24odSyrUDAwO7hBBXsixuXtewtm336neNVjyWw0gIccA0zdPNoRgFyGDsYaQFlVK5j+P2UGQBJB7HEYAeQvPOgSOhqFar+9vP/naYuNFsXEYyZj4HYBURzU3yQNJc+P8NpXULxms+HNNY3gYxMReT5ljmvZqFYXjHMIxrf301i0uoCbmcZtX236z/AlpH0TAU0u+4AAAAAElFTkSuQmCC"},"7d32":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("basePage",{ref:"basePage",attrs:{title:"程序派发设备",onePage:"",selectItems:t.selectItems,btnMethod:t.btnMethod,footerText:t.footerText,buttons:t.buttons,extIcon:a("73dc"),tableCondition:t.tableCondition,fixedQueryConditions:t.fixedQueryConditions,defualtConditions:t.defualtConditions,cascadeItems:t.cascadeItems},on:{extClick:t.extClick,afterquery:t.afterquery,beforecheckall:t.beforecheckall,buttonsClick:t.buttonsClick,afterDataInit:t.afterDataInit},scopedSlots:t._u([{key:"card",fn:function(e){var a=e.slotProps;return[i("card",{attrs:{data:a.data,cardField:a.cardField,selectItems:a.selectItems},on:{openDetail:a.openDetail,checkboxclick:t.choice,buttonClick:t.carButtonClick}})]}},{key:"over",fn:function(){return[i("van-row",{staticStyle:{background:"white",height:"100%"},attrs:{type:"flex"}},[i("van-col",{attrs:{span:"16"}},[i("van-search",{staticStyle:{"font-size":"12px"},attrs:{shape:"round",placeholder:"请输入程序号检索"},on:{search:t.searchProName},scopedSlots:t._u([{key:"right-icon",fn:function(){return[i("van-icon",{attrs:{name:a("3601"),size:"20"},on:{click:t.scan}})]},proxy:!0}]),model:{value:t.proName,callback:function(e){t.proName=e},expression:"proName"}})],1),i("van-col",{staticStyle:{"text-align":"right",height:"100%",display:"flex","justify-content":"flex-end",margin:"auto","font-size":"16px",color:"#666666","padding-right":"5px"},attrs:{span:"8"}},[t._v("\n          总数量："+t._s(t.totalNum)+"\n        ")])],1)]},proxy:!0}])}),i("van-popup",{staticClass:"baseDetail",style:{width:"100%",height:"100%",backgroundColor:"#F7F7F7"},attrs:{position:"right",transition:"van-fade",duration:"0.3"},model:{value:t.showNC,callback:function(e){t.showNC=e},expression:"showNC"}},[i("blankPage",{ref:"nestNCPage",attrs:{title:"查看NC"},on:{onClickLeft:t.closePopup},scopedSlots:t._u([{key:"body",fn:function(){return[i("div",[i("van-swipe",{style:{backgroundColor:"#F7F7F7"}},t._l(t.nestNCList,(function(e,a){return i("van-swipe-item",{key:a},[i("p",{staticStyle:{"white-space":"pre-wrap",overflow:"auto",padding:"0 10px"},style:{height:t.NCHeight+"px"}},[t._v(t._s(e))])])})),1)],1)]},proxy:!0}])})],1),i("van-popup",{staticClass:"baseDetail",style:{width:"100%",height:"100%",backgroundColor:"#F7F7F7"},attrs:{position:"right",transition:"van-fade",duration:"0.3"},model:{value:t.showNestDetail,callback:function(e){t.showNestDetail=e},expression:"showNestDetail"}},[t.showNestDetail?i("blankPage",{ref:"detailPage",attrs:{title:"查看明细"},on:{onClickLeft:t.closePopup,afterMounted:t.afterMounted},scopedSlots:t._u([{key:"body",fn:function(){return[i("div",{staticClass:"tablePage",staticStyle:{height:"100%"}},[i("van-tabs",{attrs:{"title-active-color":"rgb(97,64,141)"}},t._l(t.detailTags,(function(e){return i("van-tab",{key:e.key,attrs:{title:e.title}},[i("div",{staticStyle:{padding:"10px"}},[i("baseTable",{ref:"baseTable",refInFor:!0,attrs:{columns:t.tableHeader[e.key],data:t.tableData[e.key],height:t.tableHeight}})],1)])})),1)],1)]},proxy:!0}],null,!1,784278871)}):t._e()],1),i("van-popup",{staticClass:"baseDetail",style:{width:"100%",height:"100%",backgroundColor:"#F7F7F7"},attrs:{position:"right",transition:"van-fade",duration:"0.3"},model:{value:t.showChoiceEquipmentSingle,callback:function(e){t.showChoiceEquipmentSingle=e},expression:"showChoiceEquipmentSingle"}},[t.showChoiceEquipmentSingle?i("choiceEquipmentSingle",{attrs:{showFooter:!1},on:{onClickLeft:t.closePopup}}):t._e()],1),i("van-popup",{staticClass:"baseDetail",style:{width:"100%",height:"100%",backgroundColor:"#F7F7F7"},attrs:{position:"right",transition:"van-fade",duration:"0.3"},model:{value:t.showChoiceEquipment,callback:function(e){t.showChoiceEquipment=e},expression:"showChoiceEquipment"}},[t.showChoiceEquipment?i("choiceEquipmentSingle",{attrs:{"defualt-team-id":t.chooseTeamId,chooseable:!0,showFooter:!0},on:{onClickLeft:t.closePopup,sure:t.sure}}):t._e()],1)],1)},s=[],n=(a("5df3"),a("4f7f"),a("386d"),a("ac6a"),a("75fc")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("basePage",{ref:"basePage",attrs:{title:"选择设备",rightIcon:"",pcmoduleid:"equipment_2001",onePage:"",buttons:t.buttons,order:{equipmentName:"asc"},immediateQuery:!1,showFooter:t.showFooter,selectItems:t.selectItems,btnMethod:t.btnMethod,defualtConditions:t.defualtConditions,checkallable:!1},on:{buttonsClick:t.buttonsClick,onClickLeft:t.onClickLeft,afterquery:t.afterquery},scopedSlots:t._u([{key:"card",fn:function(e){var i=e.slotProps;return[a("equipmentCard",{attrs:{data:i.data,cardField:i.cardField,chooseable:t.chooseable},on:{openDetail:i.openDetail,checkboxclick:t.checkboxclick,jump:t.jump}})]}},{key:"over",fn:function(){return[a("van-row",{staticStyle:{background:"white",height:"100%"},attrs:{type:"flex"}},[a("van-col",{attrs:{span:"16"}},[a("van-dropdown-menu",{staticClass:"van-dropdown-menu-xs",attrs:{"active-color":"#61408d"}},[a("van-dropdown-item",{attrs:{options:t.teamOptions},model:{value:t.teamId,callback:function(e){t.teamId=e},expression:"teamId"}})],1)],1),a("van-col",{staticStyle:{"text-align":"right",height:"100%",display:"flex","justify-content":"flex-end",margin:"auto","font-size":"16px",color:"#666666","padding-right":"5px"},attrs:{span:"8"}},[t._v("\n          设备数： "+t._s(t.totalNum)+"\n        ")])],1)]},proxy:!0}])}),a("van-popup",{staticClass:"baseDetail",style:{width:"100%",height:"100%",backgroundColor:"#F7F7F7"},attrs:{position:"right",transition:"van-fade",duration:"0.3"},model:{value:t.showTaskToBeCut,callback:function(e){t.showTaskToBeCut=e},expression:"showTaskToBeCut"}},[t.showTaskToBeCut?a("taskToBeCut",{attrs:{equipmentId:t.equipmentId,equipmentName:t.equipmentName},on:{onClickLeft:t.closePopup}}):t._e()],1)],1)},r=[],c=a("02df"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card",style:{"background-color":t.data.color}},[i("van-row",{staticClass:"header",style:{borderBottom:t.data.color?"1px dashed #f7f7f7":"1px dashed #DCDCDC"}},[t.chooseable?i("van-checkbox",{ref:"checkbox",staticStyle:{overflow:"auto",float:"bottom","font-size":"0.8rem"},attrs:{"checked-color":"rgb(251, 205, 5)","icon-size":"0.8rem"},on:{click:function(e){return t.checkboxclick(t.checked)}},scopedSlots:t._u([{key:"default",fn:function(){return[i("span",{staticClass:"fixed1"},[t._v("\n          设备名称\n        ")]),i("span",{staticClass:"fixed1text"},[t._v("\n         "+t._s(t.data.equipmentName)+"\n        ")]),i("div",{staticClass:"fixed2"},[1==t.equipmentStatus?i("span",{staticStyle:{background:"#66cc66",padding:"0px 8px"}},[t._v("\n            运行\n          ")]):t._e(),2==t.equipmentStatus?i("span",{staticStyle:{background:"#fbcd05",padding:"0px 8px"}},[t._v("\n            空闲\n          ")]):t._e()])]},proxy:!0}],null,!1,2420624938),model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}}):i("div",{staticStyle:{"margin-left":"1.3rem"}},[i("span",{staticClass:"fixed1"},[t._v("\n          设备名称\n        ")]),i("span",{staticClass:"fixed1text"},[t._v("\n         "+t._s(t.data.equipmentName)+"\n        ")]),i("div",{staticClass:"fixed2"},[1==t.equipmentStatus?i("span",{staticStyle:{background:"#66cc66",padding:"4px 8px"}},[t._v("\n            运行\n        ")]):t._e(),2==t.equipmentStatus?i("span",{staticStyle:{background:"#fbcd05",padding:"4px 8px"}},[t._v("\n            空闲\n        ")]):t._e()])])],1),i("div",{staticClass:"body"},[i("van-row",{staticStyle:{"vertical-align":"middle","align-items":"center",display:"flex"}},[i("van-col",{attrs:{span:"18"}},[i("van-row",{attrs:{align:"center"}},[i("van-col",{attrs:{span:"9"}},[i("span",{staticClass:"cardtitle"},[t._v("待开工数量\n            ")])]),i("van-col",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis"},attrs:{span:"15"}},[i("span",{staticClass:"cardtext"},[t._v(" "+t._s(t.data.collectCutTask&&t.data.collectCutTask.taskNum?t.data.collectCutTask.taskNum:"0")+"\n                "),i("van-icon",{staticStyle:{"margin-left":"18px"},attrs:{name:"eye",size:18,color:"#63428e"},on:{click:t.jump}})],1)])],1),i("van-row",{attrs:{align:"center"}},[i("van-col",{attrs:{span:"9"}},[i("span",{staticClass:"cardtitle"},[t._v("待切割时长")])]),i("van-col",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis"},attrs:{span:"15"}},[i("span",{staticClass:"cardtext"},[t._v(" "+t._s(t.data.collectCutTask&&t.data.collectCutTask.taskTime?t.data.collectCutTask.taskTime:"0m"))])])],1),i("van-row",{attrs:{align:"center"}},[i("van-col",{attrs:{span:"9"}},[i("span",{staticClass:"cardtitle"},[t._v("当前任务")])]),i("van-col",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis"},attrs:{span:"15"}},[i("span",{staticClass:"cardtext"},[t._v(" "+t._s(t.data.collectCutTask&&t.data.collectCutTask.curTask?t.data.collectCutTask.curTask:"-"))])])],1),i("van-row",{attrs:{align:"center"}},[i("van-col",{attrs:{span:"9"}},[i("span",{staticClass:"cardtitle"},[t._v("预计完成时间")])]),i("van-col",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis"},attrs:{span:"15"}},[i("span",{staticClass:"cardtext"},[t._v(t._s(t.data.collectCutTask&&t.data.collectCutTask.predictOvertime?t.data.collectCutTask.predictOvertime:"-"))])])],1)],1),i("van-col",{directives:[{name:"show",rawName:"v-show",value:t.monitorId,expression:"monitorId"}],attrs:{span:"6"}},[i("van-icon",{attrs:{name:a("1d04"),size:"50"},on:{click:t.openMonitor}})],1)],1)],1),i("div",{staticClass:"foot",staticStyle:{"border-top":"1px solid  #ebebeb"}},[i("van-row",[i("van-col",{staticStyle:{"white-space":"nowrap"},attrs:{span:"4"}},[i("div",{staticClass:"fixed3"},[t._v("\n          割嘴数量:"+t._s(t.data.equipmentNozzle)+"\n        ")])]),i("van-col",{attrs:{span:"20"}},[i("van-button",{staticClass:"detailbutton",attrs:{size:"small",plain:""},on:{click:t.openDetail}},[t._v("查看详情 >\n        ")])],1)],1)],1),i("transition",{attrs:{name:"van-fade"}},[t.showMonitor?i("base-video",{ref:"video",attrs:{monitorId:t.monitorId,width:t.width},on:{close:t.closeMonitor}}):t._e()],1)],1)},u=[],d={name:"equipmentCard",props:{data:{type:Object,default:function(){return{}}},chooseable:{type:Boolean,default:function(){return!0}}},data:function(){return{width:0,monitorId:"",showMonitor:!1,checked:!1,equipmentStatus:0}},methods:{closeMonitor:function(){console.log(123),this.showMonitor=!1},openMonitor:function(){this.showMonitor=!0;var t=this;this.$nextTick((function(){t.$refs.video.load()}))},openDetail:function(){this.$emit("openDetail",this.data)},checkboxclick:function(t){this.$emit("checkboxclick",t,this.data)},click:function(){this.$emit("click")},jump:function(){this.$emit("jump",this.data.id,this.data.equipmentName)}},watch:{"data.collectCutTask":{handler:function(t){t&&t.curTask?this.equipmentStatus=1:this.equipmentStatus=2},immediate:!0,deep:!0}},created:function(){var t=this;this.$ajax("/common/commonitor/findmonitor","",{equipmentCode:this.data.equipmentCode,monitorPosition:"下"},(function(e){var a=e.data.data;t.monitorId=a.id}))},mounted:function(){this.width=this.$el.clientWidth}},p=d,h=(a("690e"),a("2877")),m=Object(h["a"])(p,l,u,!1,null,"58236bab",null),f=m.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("basePage",{ref:"basePage",attrs:{title:"待切割任务",pcmoduleid:"manufacture_4001",onePage:"",draggable:!0,cascadeItems:t.cascadeItems,buttons:t.buttons,footerText:t.footerText,immediateQuery:!1,selectItems:t.selectItems,btnMethod:t.btnMethod,defualtConditions:t.defualtConditions},on:{cardsort:t.cardsort,buttonsClick:t.buttonsClick,onClickLeft:t.onClickLeft,afterquery:t.afterquery,afterDataInit:t.afterDataInit,beforecheckall:t.beforecheckall},scopedSlots:t._u([{key:"card",fn:function(e){var i=e.slotProps;return[a("taskCard",{attrs:{data:i.data},on:{openDetail:i.openDetail,buttonClick:t.carButtonClick,checkboxclick:t.choice,toTop:t.toTop}})]}},{key:"over",fn:function(){return[a("van-row",{staticStyle:{background:"white",height:"100%"},attrs:{type:"flex"}},[a("van-col",{attrs:{span:"16"}},[a("div",{staticClass:"equipmentBox"},[a("span",{staticClass:"equipmentTitle"},[t._v("设备名称 : ")]),a("span",{staticClass:"equipmentName"},[t._v(t._s(t.localEquipmentName))])])]),a("van-col",{staticStyle:{"text-align":"right",height:"100%",display:"flex","justify-content":"flex-end",margin:"auto","font-size":"16px",color:"#666666","padding-right":"5px"},attrs:{span:"8"}},[t._v("\n          总数量： "+t._s(t.totalNum)+"\n        ")])],1)]},proxy:!0}])}),a("van-popup",{staticClass:"baseDetail",style:{width:"100%",height:"100%",backgroundColor:"#F7F7F7"},attrs:{position:"right",transition:"van-fade",duration:"0.3"},model:{value:t.showNC,callback:function(e){t.showNC=e},expression:"showNC"}},[a("blankPage",{ref:"nestNCPage",attrs:{title:"查看NC"},on:{onClickLeft:t.closePopup},scopedSlots:t._u([{key:"body",fn:function(){return[a("div",[a("van-swipe",{style:{backgroundColor:"#F7F7F7"}},t._l(t.nestNCList,(function(e,i){return a("van-swipe-item",{key:i},[a("p",{staticStyle:{"white-space":"pre-wrap",overflow:"auto",padding:"0 10px"},style:{height:t.NCHeight+"px"}},[t._v(t._s(e))])])})),1)],1)]},proxy:!0}])})],1),a("van-popup",{staticClass:"baseDetail",style:{width:"100%",height:"100%",backgroundColor:"#F7F7F7"},attrs:{position:"right",transition:"van-fade",duration:"0.3"},model:{value:t.showNestDetail,callback:function(e){t.showNestDetail=e},expression:"showNestDetail"}},[t.showNestDetail?a("blankPage",{ref:"detailPage",attrs:{title:"查看明细"},on:{onClickLeft:t.closePopup,afterMounted:t.afterMounted},scopedSlots:t._u([{key:"body",fn:function(){return[a("div",{staticClass:"tablePage",staticStyle:{height:"100%"}},[a("van-tabs",{attrs:{"title-active-color":"rgb(97,64,141)"}},t._l(t.detailTags,(function(e){return a("van-tab",{key:e.key,attrs:{title:e.title}},[a("div",{staticStyle:{padding:"10px"}},[a("baseTable",{ref:"baseTable",refInFor:!0,attrs:{columns:t.tableHeader[e.key],data:t.tableData[e.key],height:t.tableHeight}})],1)])})),1)],1)]},proxy:!0}],null,!1,784278871)}):t._e()],1)],1)},k=[],v=(a("7f7f"),a("d399")),g=a("28a2"),b=a("5cac"),C={name:"taskToBeCut",components:{taskCard:b["a"]},props:{showFooter:{type:Boolean,default:function(){return!1}},equipmentId:{type:String,default:function(){return""}},equipmentName:{type:String,default:function(){return""}}},data:function(){return{localEquipmentName:"",NCHeight:0,numberCol:{ovdThickness:c["a"].getAccuracy("2"),partCuttime:c["a"].getAccuracy("4"),proMatWeight:c["a"].getAccuracy("4"),partArea:c["a"].getAccuracy("4"),partWeight:c["a"].getAccuracy("4"),partCutlength:c["a"].getAccuracy("4"),partlistLength:c["a"].getAccuracy("4"),partlistWidth:c["a"].getAccuracy("4"),remThickness:c["a"].getAccuracy("2"),remLength:c["a"].getAccuracy("4"),remWidth:c["a"].getAccuracy("4"),remArea:c["a"].getAccuracy("4"),remWeight:c["a"].getAccuracy("4")},detailTags:[{key:"nestingPlate",title:"套料板材"},{key:"nestedPartsSummary",title:"套料零件汇总"},{key:"nestingPartsDetails",title:"套料零件明细"},{key:"cutOffTheRemainder",title:"截取余料"}],tableQueryUrl:[{key:"nestingPlate",paramName:"proMatCode",url:"/nest/nestprogrammat/autopageNew"},{key:"nestedPartsSummary",paramName:"partProCode",url:"/nest/nestparts/autopage"},{key:"nestingPartsDetails",paramName:"partlistProCode",url:"/nest/nestpartlist/autopage"},{key:"cutOffTheRemainder",paramName:"remProCode",url:"/nest/nestrem/autopage"}],tableData:{nestingPlate:[],nestedPartsSummary:[],nestingPartsDetails:[],cutOffTheRemainder:[]},tableHeader:{nestingPlate:[{key:"proMatName",title:"套料钢板名"},{key:"proMatSheettype",title:"材料类型"},{key:"remStatus",title:"余料状态"},{key:"proMatMaterial",title:"材质"},{key:"proMatThickness",title:"厚度"},{key:"proMatLength",title:"长度"},{key:"proMatWidth",title:"宽度"},{key:"proMatArea",title:"面积"},{key:"proMatWeight",title:"重量"},{key:"proMatField1",title:"数据1"},{key:"proMatField2",title:"数据2"},{key:"proMatField3",title:"数据3"},{key:"proMatField4",title:"数据4"}],nestedPartsSummary:[{key:"partField1",title:"项目号"},{key:"partGroupId",title:"套料序号"},{key:"partMbomCode",title:"物料编码"},{key:"partDrawcode",title:"图号"},{key:"partNestedsum",title:"套料数量"},{key:"partArea",title:"净面积"},{key:"partWeight",title:"净重量"},{key:"partPiercessum",title:"穿孔数"},{key:"partCutlength",title:"切割长度"},{key:"partCuttime",title:"切割时间"},{key:"partLength",title:"零件长度"},{key:"partWidth",title:"零件宽度"}],nestingPartsDetails:[{key:"partField1",title:"项目号"},{key:"nestedPartId",title:"套料序号"},{key:"partMbomCode",title:"物料编码"},{key:"partDrawcode",title:"图号"},{key:"partlistRowcode",title:"唯一码"},{key:"partlistCutrowid",title:"切割时序"},{key:"partlistNestedsum",title:"套料数量"},{key:"partArea",title:"净面积"},{key:"partWeight",title:"净重量"},{key:"partPiercessum",title:"穿孔数"},{key:"partCutlength",title:"切割长度"},{key:"partlistLength",title:"零件长度"},{key:"partlistWidth",title:"零件宽度"}],cutOffTheRemainder:[{key:"remName",title:"余料名称"},{key:"remMaterial",title:"材质"},{key:"remThickness",title:"厚度"},{key:"remLength",title:"长度"},{key:"remWidth",title:"宽度"},{key:"remArea",title:"面积"},{key:"remWeight",title:"重量"},{key:"remField1",title:"数据1"},{key:"remField2",title:"数据2"},{key:"remField3",title:"数据3"},{key:"remField4",title:"数据4"}]},tableHeight:0,showNC:!1,showNestDetail:!1,buttons:[{key:"release",name:"释放"}],footerText:[{key:"num",display:"数量",value:0},{key:"time",display:"预计时长",value:"0m"}],totalNum:0,teamOptions:[],selectItems:{woStatus:[],woTeamId:[],woEquipmentId:[],isPreparation:[{id:0,name:"未配送"},{id:1,name:"部分配送"},{id:2,name:"已配送"}],overdueFlag:[{id:1,name:"未超期"},{id:0,name:"超期"}],proMattype:[],woPreStatus:[{id:0,name:"未备料"},{id:1,name:"部分备料"},{id:2,name:"已备料"}]},cascadeItems:{woTeamId:[]},btnMethod:{querymethod:"/nest/cutworkorder/tobecutautopage"},defualtConditions:[{key:"woEquipmentId",value:"",exp:"="}]}},methods:{afterMounted:function(){var t=this.$refs.detailPage.bodyheight,e=document.getElementsByClassName("van-tabs__nav")[0].offsetHeight;this.tableHeight=t-e-15},onClickLeft:function(t){this.$emit("onClickLeft",t)},afterquery:function(t,e){this.totalNum=t.total,e.value.woEquipmentId&&(this.localEquipmentName=this.selectItems.woEquipmentId.filter((function(t){return t.id===e.value.woEquipmentId}))[0].name)},afterDataInit:function(t){var e=t.records;if(this.$refs.basePage.ischeckall()){var a=0;e.forEach((function(t){a+=t.proCuttime})),this.footerText=[{key:"num",display:"数量",value:e.length},{key:"time",display:"预计时长",value:c["a"].formTime("Hm",a)}]}else this.footerText=[{key:"num",display:"数量",value:0},{key:"time",display:"预计时长",value:"0m"}]},initSelect:function(){var t=this;this.$ajax("/common/comteam/treelistgroupbydep","",{teamType:0},(function(e){var a,i=[],s={id:"N/A",name:"未派发",checkable:!0};i.push(s),i.push.apply(i,Object(n["a"])(t.cascadehandler(e.data.data))),(a=t.cascadeItems.woTeamId).push.apply(a,i)})),this.selectItems.woStatus=c["a"].getDict("CUT_STATUS"),this.selectItems.proMattype=c["a"].getDict("WMS_MAT_TYPE"),this.$ajax("/common/comequipment/getequipmentbycuruser","",{},(function(e){var a=[],i={id:"N/A",name:"未派发"};a.push(i);var s=e.data.data;s.forEach((function(t){var e={id:t.id,name:t.equipmentName};a.push(e)})),t.selectItems.woEquipmentId=a})),this.$ajax("/common/comteam/getteambytype","",{teamType:0},(function(e){var a=[],i={id:"N/A",name:"未派发"};a.push(i);var s=e.data.data;s.forEach((function(t){var e={id:t.id,name:t.teamName};a.push(e)})),t.selectItems.woTeamId=a}))},cascadehandler:function(t){var e=this,a=[];return t.forEach((function(t){var i={checkable:!0,id:t.value,name:t.label};t.children&&(i.children=e.cascadehandler(t.children)),a.push(i)})),a},buttonsClick:function(t){var e=this;if("release"===t){var a=this.$refs.basePage.$refs.baseList.$refs.list.$children[0].$children,i=[];if(i=a.filter((function(t){return t.$refs.checkbox.checked})).map((function(t){return{id:t.data.id}})),0===i.length)return void v["a"].fail("未选中数据!");v["a"].loading({forbidClick:!0,duration:0}),this.$ajax("/nest/cutworkorder/releaseequipment","",i,(function(t){v["a"].success("成功"),e.$refs.basePage.search()}),(function(){}))}},cardsort:function(t){var e=this;console.log(t);var a=t.newIndex,i=t.oldIndex;if(a-i===0)return!1;var s={oriId:this.$refs.basePage.datas[i].id,afterId:this.$refs.basePage.datas[a].id,equipmentId:this.equipmentId};this.$ajax("/nest/cutworkorder/dropupdate","",s,(function(){return e.$refs.basePage.search()}))},carButtonClick:function(t,e){var a=this;"image"===t?this.$ajax("/nest/nestpicfile/getpicfileargs","",{picFileBussid:e.woProCode,picFileBusstype:"NESTFILE"},(function(t){var e=t.data.data,i=[];e.forEach((function(t){var e=a.getBaseUrl()+t.picFileUrl;i.push(e)})),Object(g["a"])(i)})):"NC"===t?this.getNC(e.woProCode):"detail"===t&&(this.tableQueryUrl.forEach((function(t){var i={};i[t.paramName]=e.woProCode;var s={};s[t.paramName]="=",a.$ajax(t.url,"",{current:1,rows:100,value:i,exp:s,order:{}},(function(e){var i=e.data.data.records;i.forEach((function(t){for(var e in a.numberCol)if(t.hasOwnProperty(e)){var i=a.numberCol[e];t[e]=Math.round(t[e]*Math.pow(10,i))/Math.pow(10,i)}})),a.tableData[t.key]=i}))})),this.showNestDetail=!0)},getNC:function(t){var e=this;this.$ajax("/nest/nestpicfile/getpicfileargs","",{picFileBussid:t,picFileBusstype:"NCFILE",picFileLast:1},(function(t){var a=t.data.data,i=[];a.forEach((function(t){var a=t.picFileUrl;i.push(e.$getRequest(a))})),Promise.all(i).then((function(t){var a=[];t.forEach((function(t){var e=t.data;a.push(e)})),e.nestNCList=a,e.nestNCList.length>0&&(e.showNC=!0)}))}))},choice:function(t){!t&&this.$refs.basePage.ischeckall()&&(this.$refs.basePage.checkAll=!1);var e=this.$refs.basePage.$refs.baseList.$refs.list.$children[0].$children;e=e.filter((function(t){return!0===t.checked}));var a=0;e.forEach((function(t){a+=t.data.proCuttime})),this.footerText=[{key:"num",display:"数量",value:e.length},{key:"time",display:"预计时长",value:c["a"].formTime("Hm",a)}]},toTop:function(t){var e=this;this.$ajax("/nest/cutworkorder/toporder","",{oriId:t.id,equipmentId:this.equipmentId},(function(){return e.$refs.basePage.search()}))},beforecheckall:function(t){t.flag=!1;var e=this.$refs.basePage.$refs.baseList.$refs.list.$children[0].$children;if(this.$refs.basePage.ischeckall()){e.forEach((function(t){t.checked=!0}));var a=0;e.forEach((function(t){a+=t.data.proCuttime})),this.footerText=[{key:"num",display:"数量",value:this.$refs.basePage.total},{key:"time",display:"预计时长",value:c["a"].formTime("Hm",a)}]}else e.forEach((function(t){t.checked=!1})),this.footerText=[{key:"num",display:"数量",value:0},{key:"time",display:"预计时长",value:"0m"}]},closePopup:function(t){t.flag=!1,this.showNC=!1,this.showNestDetail=!1,this.$refs.basePage.search()}},created:function(){this.initSelect()},mounted:function(){this.equipmentId&&(this.localEquipmentName=this.equipmentName,this.$set(this.defualtConditions[0],"value",this.equipmentId),this.$refs.basePage.search()),this.NCHeight=window.innerHeight-this.$refs.basePage.baseNavigationh,Object(v["a"])("可以通过拖动进行排序切割顺序优先级")}},w=C,A=(a("13f3"),Object(h["a"])(w,y,k,!1,null,"60d83010",null)),x=A.exports,N={name:"choiceEquipmentSingle",components:{equipmentCard:f,taskToBeCut:x},props:{defualtTeamId:{type:String,default:function(){return"N/A"}},showFooter:{type:Boolean,default:function(){return!1}},chooseable:{type:Boolean,default:function(){return!1}}},data:function(){return{teamId:"",equipmentId:"",equipmentName:"",showTaskToBeCut:!1,buttons:[{key:"sure",name:"确定"}],totalNum:0,teamOptions:[],selectItems:{equipmentType:[],equipmentEnable:[{id:0,name:"停用"},{id:1,name:"启用"}],equipmentStoreid:[],equipmentProcessedStoreid:[],equipmentPerson:[],equipmentStackid:[],equipmentProcessedStackid:[],equipmentTeam:[]},btnMethod:{querymethod:"/common/comequipment/cutWorkEquipmentAutoPage"},defualtConditions:[{key:"equipmentTeam",value:"",exp:"="}]}},methods:{onClickLeft:function(t){this.$emit("onClickLeft",t)},afterquery:function(t){this.totalNum=t.total},initSelect:function(){var t=this;this.$ajax("/common/comteam/teamsbycurrentuser","",{},(function(e){if(1e7==e.data.errorCode){var a=e.data.data;a.reverse(),t.teamOptions=e.data.data.map((function(t){return{text:t.teamName,value:t.id}})),t.selectItems.equipmentTeam=e.data.data.map((function(t){return{name:t.teamName,id:t.id}})),"N/A"===t.defualtTeamId?t.teamId=t.teamOptions[0].value:(t.teamOptions=t.teamOptions.filter((function(e){return e.value===t.defualtTeamId})),t.teamId=t.defualtTeamId)}})),this.selectItems.equipmentType=c["a"].getDict("EQUIPMENT_TYPE"),this.$ajax("/wms/wmsstore/list","",{},(function(e){var a=[];e.data.data.forEach((function(t){var e={id:t.id,name:t.storeName};a.push(e)})),t.selectItems.equipmentStoreid=a,t.selectItems.equipmentProcessedStoreid=a})),this.$ajax("/auth/user/list","",{},(function(e){var a=[];e.data.data.forEach((function(t){var e={id:t.id,name:t.userRealname};a.push(e)})),t.selectItems.equipmentPerson=a})),this.$ajax("/wms/wmsstack/list","",{},(function(e){var a=[];e.data.data.forEach((function(t){var e={id:t.id,name:t.stackName};a.push(e)})),t.selectItems.equipmentStackid=a,t.selectItems.equipmentProcessedStackid=a}))},buttonsClick:function(t){if("sure"===t){var e=this.$refs.basePage.$refs.baseList.$refs.list.$children[0].$children;e=e.filter((function(t){return!0===t.checked})),this.$emit("sure",e[0].data.id)}},jump:function(t,e){this.equipmentId=t,this.equipmentName=e,this.showTaskToBeCut=!0},checkboxclick:function(t,e){if(t){var a=this.$refs.basePage.$refs.baseList.$refs.list.$children[0].$children;a.forEach((function(t){t.data.id!=e.id&&(t.checked=!1)}))}},closePopup:function(t){t.flag=!1,this.showTaskToBeCut=!1,this.$refs.basePage.search()}},created:function(){this.initSelect()},watch:{teamId:function(t){t&&(this.$set(this.defualtConditions[0],"value",t),this.$refs.basePage.search())},immediate:!0}},I=N,S=(a("6198"),Object(h["a"])(I,o,r,!1,null,"5e68669c",null)),T=S.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card",style:{"background-color":t.data.color}},[a("van-row",{staticClass:"header",style:{borderBottom:t.data.color?"1px dashed #f7f7f7":"1px dashed #DCDCDC"}},[a("van-checkbox",{ref:"checkbox",staticStyle:{overflow:"auto",float:"bottom","font-size":"0.8rem"},attrs:{"checked-color":"rgb(251, 205, 5)","icon-size":"0.8rem"},on:{click:function(e){return t.checkboxclick(t.checked)}},scopedSlots:t._u([{key:"default",fn:function(){return[a("span",{staticClass:"fixed1"},[t._v("\n          程序名称\n        ")]),a("span",{staticClass:"fixed1text"},[t._v("\n         "+t._s(t.data["proName"])+"\n        ")]),a("span",{staticClass:"fixed2"},[t._v("\n            利用率: "+t._s(t.data["proUsedraterem"].toFixed(2))+"%\n        ")])]},proxy:!0}]),model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}})],1),a("div",{staticClass:"body"},[a("van-row",{staticStyle:{"vertical-align":"middle","align-items":"center",display:"flex"}},[a("van-col",{attrs:{span:"19"}},t._l(t.cardField,(function(e){return a("van-row",{key:e.key,attrs:{align:"center"}},[a("van-col",{attrs:{span:"9"}},[a("span",{staticClass:"cardtitle"},[t._v(t._s(e.name))])]),a("van-col",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis"},attrs:{span:"15"}},["input"===e.type?a("span",{staticClass:"cardtext"},[t._v(" "+t._s(t.data[e.key]))]):"number"===e.type?a("span",{staticClass:"cardtext"},[t._v(" "+t._s(t.fomatFloat(e.key,t.data[e.key])))]):"cascader"===e.type?a("span",{staticClass:"cardtext"},[t._v("  "+t._s(t.tableKV[e.key]?t.tableKV[e.key][t.data[e.key]]:t.data[e.key]))]):"select"!==e.type||t.tableKC[e.key][t.data[e.key]]?"select"===e.type&&t.tableKC[e.key][t.data[e.key]]?[a("van-tag",{staticClass:"cardtext",attrs:{color:t.tableKC[e.key][t.data[e.key]]}},[t._v(" "+t._s(t.tableKV[e.key]?t.tableKV[e.key][t.data[e.key]]:t.data[e.key])+"\n              ")])]:a("span",{staticClass:"cardtext"},[t._v(" "+t._s(t.data[e.key]))]):[a("span",{staticClass:"cardtext"},[t._v("\n                "+t._s(t.tableKV[e.key]?t.tableKV[e.key][t.data[e.key]]:t.data[e.key])+"\n              ")])]],2)],1)})),1),a("van-col",{attrs:{span:"5"}},[a("van-row",[a("van-button",{staticStyle:{width:"100%"},attrs:{color:"#fbce08",size:"mini"},on:{click:function(e){return t.buttonClick("image")}}},[t._v("套料图")])],1),a("van-row",[a("van-button",{staticStyle:{width:"100%"},attrs:{color:"#fbce08",size:"mini"},on:{click:function(e){return t.buttonClick("NC")}}},[t._v("NC")])],1),a("van-row",[a("van-button",{staticStyle:{width:"100%"},attrs:{color:"#fbce08",size:"mini"},on:{click:function(e){return t.buttonClick("detail")}}},[t._v("明细")])],1)],1)],1)],1),a("div",{staticClass:"foot",staticStyle:{"border-top":"1px solid  #ebebeb"}},[a("van-row",[a("van-col",{staticStyle:{"white-space":"nowrap"},attrs:{span:"4"}},[a("div",{staticClass:"fixed3"},[t._v("\n          计划完工时间:"+t._s(t.data["selEndtime"])+"\n        ")])]),a("van-col",{attrs:{span:"20"}},[a("van-button",{staticClass:"detailbutton",attrs:{size:"small",plain:""},on:{click:t.openDetail}},[t._v("查看详情 >\n        ")])],1)],1)],1)],1)},P=[],F=(a("456d"),a("7618")),q={name:"card",props:{baseUrl:{type:String,default:function(){return""}},numberCol:{type:Object,default:function(){return{}}},primaryKeyValue:{type:String,default:function(){return""}},selectItems:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{}}},cardField:{type:Array,default:function(){return[]}}},data:function(){return{checked:!1}},methods:{buttonClick:function(t){this.$emit("buttonClick",t,this.data)},fomatFloat:function(t,e){if(void 0!==e&&""!==e&&null!==e){var a=2;return a=this.numberCol[t]?this.numberCol[t]:c["a"].getAccuracy("4"),"string"==typeof a?c["a"].formTime(a,e):Math.round(e*Math.pow(10,a))/Math.pow(10,a)}},footIconClick:function(){this.$emit("footIconClick",this.data)},getPrimaryKeyValue:function(){return this.primaryKeyValue},btnclick:function(t){this.$emit("cardbtnclick",t,this.data)},openDetail:function(){this.$emit("openDetail",this.data)},checkboxclick:function(t){this.$emit("checkboxclick",t,this.primaryKeyValue,this.data)},click:function(){this.$emit("click")}},computed:{tableKV:function(){var t=this,e={};return Object.keys(this.selectItems).forEach((function(a){if(t.selectItems[a]&&"object"==Object(F["a"])(t.selectItems[a])){var i={};t.selectItems[a].forEach((function(t){i[t.id]=t.name})),e[a]=i}})),e},tableKC:function(){var t=this,e={};return Object.keys(this.selectItems).forEach((function(a){if(t.selectItems[a]&&"object"==Object(F["a"])(t.selectItems[a])){var i={};t.selectItems[a].forEach((function(t){t.color&&(i[t.id]=t.color)})),e[a]=i}})),e}},created:function(){var t=this.data.checked;t&&(this.checked=!0)}},_=q,M=(a("5571"),Object(h["a"])(_,E,P,!1,null,"67caedd3",null)),$=M.exports,j={name:"devicearrange",components:{Card:$,choiceEquipmentSingle:T},data:function(){return{chooseTeamId:"",proName:"",tableHeight:0,showChoiceEquipmentSingle:!1,showChoiceEquipment:!1,numberCol:{ovdThickness:c["a"].getAccuracy("2"),partCuttime:c["a"].getAccuracy("4"),proMatWeight:c["a"].getAccuracy("4"),partArea:c["a"].getAccuracy("4"),partWeight:c["a"].getAccuracy("4"),partCutlength:c["a"].getAccuracy("4"),partlistLength:c["a"].getAccuracy("4"),partlistWidth:c["a"].getAccuracy("4"),remThickness:c["a"].getAccuracy("2"),remLength:c["a"].getAccuracy("4"),remWidth:c["a"].getAccuracy("4"),remArea:c["a"].getAccuracy("4"),remWeight:c["a"].getAccuracy("4")},showNC:!1,showNestDetail:!1,NCHeight:0,nestNCList:[],detailTags:[{key:"nestingPlate",title:"套料板材"},{key:"nestedPartsSummary",title:"套料零件汇总"},{key:"nestingPartsDetails",title:"套料零件明细"},{key:"cutOffTheRemainder",title:"截取余料"}],tableQueryUrl:[{key:"nestingPlate",paramName:"proMatCode",url:"/nest/nestprogrammat/autopageNew"},{key:"nestedPartsSummary",paramName:"partProCode",url:"/nest/nestparts/autopage"},{key:"nestingPartsDetails",paramName:"partlistProCode",url:"/nest/nestpartlist/autopage"},{key:"cutOffTheRemainder",paramName:"remProCode",url:"/nest/nestrem/autopage"}],tableData:{nestingPlate:[],nestedPartsSummary:[],nestingPartsDetails:[],cutOffTheRemainder:[]},tableHeader:{nestingPlate:[{key:"proMatName",title:"套料钢板名"},{key:"proMatSheettype",title:"材料类型"},{key:"remStatus",title:"余料状态"},{key:"proMatMaterial",title:"材质"},{key:"proMatThickness",title:"厚度"},{key:"proMatLength",title:"长度"},{key:"proMatWidth",title:"宽度"},{key:"proMatArea",title:"面积"},{key:"proMatWeight",title:"重量"},{key:"proMatField1",title:"数据1"},{key:"proMatField2",title:"数据2"},{key:"proMatField3",title:"数据3"},{key:"proMatField4",title:"数据4"}],nestedPartsSummary:[{key:"partField1",title:"项目号"},{key:"partGroupId",title:"套料序号"},{key:"partMbomCode",title:"物料编码"},{key:"partDrawcode",title:"图号"},{key:"partNestedsum",title:"套料数量"},{key:"partArea",title:"净面积"},{key:"partWeight",title:"净重量"},{key:"partPiercessum",title:"穿孔数"},{key:"partCutlength",title:"切割长度"},{key:"partCuttime",title:"切割时间"},{key:"partLength",title:"零件长度"},{key:"partWidth",title:"零件宽度"}],nestingPartsDetails:[{key:"partField1",title:"项目号"},{key:"nestedPartId",title:"套料序号"},{key:"partMbomCode",title:"物料编码"},{key:"partDrawcode",title:"图号"},{key:"partlistRowcode",title:"唯一码"},{key:"partlistCutrowid",title:"切割时序"},{key:"partlistNestedsum",title:"套料数量"},{key:"partArea",title:"净面积"},{key:"partWeight",title:"净重量"},{key:"partPiercessum",title:"穿孔数"},{key:"partCutlength",title:"切割长度"},{key:"partlistLength",title:"零件长度"},{key:"partlistWidth",title:"零件宽度"}],cutOffTheRemainder:[{key:"remName",title:"余料名称"},{key:"remMaterial",title:"材质"},{key:"remThickness",title:"厚度"},{key:"remLength",title:"长度"},{key:"remWidth",title:"宽度"},{key:"remArea",title:"面积"},{key:"remWeight",title:"重量"},{key:"remField1",title:"数据1"},{key:"remField2",title:"数据2"},{key:"remField3",title:"数据3"},{key:"remField4",title:"数据4"}]},selectItems:{npCreateId:[],woEquipmentId:[],materialReady:[{id:0,name:"未备料",color:"red"},{id:1,name:"部分备料",color:"yellow"},{id:2,name:"已备料",color:"green"}],overdue:[{id:0,name:"未超期",color:"green"},{id:1,name:"超期",color:"red"}],proMattype:[],woStatus:[],woTeamId:[]},cascadeItems:{woTeamId:[]},btnMethod:{querymethod:"/nest/cutworkorder/autopage"},fixedQueryConditions:[{key:"woAbortStatus",exp:"=",value:"0"}],footerText:[{key:"num",display:"数量",value:0},{key:"time",display:"预计时长",value:"0m"}],defualtConditions:[{key:"woTeamId",value:"N/A",exp:"<>"}],tableCondition:[{col:"matPublicStatus",value:"0"},{col:"woEquipmentId",value:"N/A"}],buttons:[{key:"distribute",name:"派发"}],totalNum:0}},methods:{scan:function(){var t=localStorage.getItem("equipmentType");t&&"XUESI2"==t?sc.scanUTStart(this.scanning):sc.scanStart(this.scanning)},scanning:function(t){var e=localStorage.getItem("equipmentType");e&&"XUESI2"==e?sc.initUTScan(void 0):sc.initScan(void 0),this.proName=t.data,t.data?this.searchProName():this.$toast.fail("还未扫码")},initSelect:function(){var t=this;this.$ajax("/common/comequipment/getequipmentbycuruser","",{},(function(e){var a=[],i={id:"N/A",name:"未派发"};a.push(i);var s=e.data.data;s.forEach((function(t){var e={id:t.id,name:t.equipmentName};a.push(e)})),t.selectItems.woEquipmentId=a})),this.$ajax("/auth/user/listuser","",{},(function(e){var a=[],i=e.data.data;i.forEach((function(t){var e={id:t.id,name:t.userRealname};a.push(e)})),t.selectItems.npCreateId=a})),this.selectItems.woStatus=c["a"].getDict("CUT_STATUS"),this.selectItems.proMattype=c["a"].getDict("WMS_MAT_TYPE"),this.$ajax("/common/comteam/treelistgroupbydep","",{teamType:0},(function(e){var a,i=[],s={id:"N/A",name:"未派发",checkable:!0};i.push(s),i.push.apply(i,Object(n["a"])(t.cascadehandler(e.data.data))),(a=t.cascadeItems.woTeamId).push.apply(a,i)})),this.$ajax("/common/comteam/getteambytype","",{teamType:0},(function(e){var a=[],i={id:"N/A",name:"未派发"};a.push(i);var s=e.data.data;s.forEach((function(t){var e={id:t.id,name:t.teamName};a.push(e)})),t.selectItems.woTeamId=a}))},cascadehandler:function(t){var e=this,a=[];return t.forEach((function(t){var i={checkable:!0,id:t.value,name:t.label};t.children&&(i.children=e.cascadehandler(t.children)),a.push(i)})),a},extClick:function(){this.showChoiceEquipmentSingle=!0},afterDataInit:function(t){var e=t.records;if(this.$refs.basePage.ischeckall()){var a=0;e.forEach((function(t){a+=t.proCuttime})),this.footerText=[{key:"num",display:"数量",value:e.length},{key:"time",display:"预计时长",value:c["a"].formTime("Hm",a)}]}else this.footerText=[{key:"num",display:"数量",value:0},{key:"time",display:"预计时长",value:"0m"}]},afterquery:function(t,e){t.records.forEach((function(t){t.zhzd=t.proThickness+"*"+t.proWidth+"*"+t.proLength})),this.totalNum=t.total,void 0!=e.value.proName&&(this.proName=e.value.proName)},choice:function(t){!t&&this.$refs.basePage.ischeckall()&&(this.$refs.basePage.checkAll=!1);var e=this.$refs.basePage.$refs.baseList.$refs.list.$children[0].$children;e=e.filter((function(t){return!0===t.checked}));var a=0;e.forEach((function(t){a+=t.data.proCuttime})),this.footerText=[{key:"num",display:"数量",value:e.length},{key:"time",display:"预计时长",value:c["a"].formTime("Hm",a)}]},beforecheckall:function(t){t.flag=!1;var e=this.$refs.basePage.$refs.baseList.$refs.list.$children[0].$children;if(this.$refs.basePage.ischeckall()){e.forEach((function(t){t.checked=!0}));var a=0;e.forEach((function(t){a+=t.data.proCuttime})),this.footerText=[{key:"num",display:"数量",value:this.$refs.basePage.total},{key:"time",display:"预计时长",value:c["a"].formTime("Hm",a)}]}else e.forEach((function(t){t.checked=!1})),this.footerText=[{key:"num",display:"数量",value:0},{key:"time",display:"预计时长",value:"0m"}]},searchProName:function(){var t=this.$refs.basePage.$refs.baseQueryConditions.conVals;this.proName?this.$set(t,"proName",this.proName):this.$delete(t,"proName"),this.$refs.basePage.search()},buttonsClick:function(t){if("distribute"===t){var e=this.$refs.basePage.$refs.baseList.$refs.list.$children[0].$children,a=[];if(a=e.filter((function(t){return t.$refs.checkbox.checked})).map((function(t){return t.data})),0===a.length)return void v["a"].fail("未选中数据!");var i=new Set;a.forEach((function(t){t.woTeamId&&"N/A"!=t.woTeamId&&i.add(t.woTeamId)})),i.size<=1?(this.chooseTeamId=a[0].woTeamId,this.showChoiceEquipment=!0):v["a"].fail("勾选班组不一致!")}},carButtonClick:function(t,e){var a=this;"image"===t?this.$ajax("/nest/nestpicfile/getpicfileargs","",{picFileBussid:e.proCode,picFileBusstype:"NESTFILE"},(function(t){var e=t.data.data,i=[];e.forEach((function(t){var e=a.getBaseUrl()+t.picFileUrl;i.push(e)})),Object(g["a"])(i)})):"NC"===t?this.getNC(e.proCode):"detail"===t&&(this.tableQueryUrl.forEach((function(t){var i={};i[t.paramName]=e.proCode;var s={};s[t.paramName]="=",a.$ajax(t.url,"",{current:1,rows:100,value:i,exp:s,order:{}},(function(e){var i=e.data.data.records;i.forEach((function(t){for(var e in a.numberCol)if(t.hasOwnProperty(e)){var i=a.numberCol[e];t[e]=Math.round(t[e]*Math.pow(10,i))/Math.pow(10,i)}})),a.tableData[t.key]=i}))})),this.showNestDetail=!0)},afterMounted:function(){var t=this.$refs.detailPage.bodyheight,e=document.getElementsByClassName("van-tabs__nav")[0].offsetHeight;this.tableHeight=t-e-15},getNC:function(t){var e=this;this.$ajax("/nest/nestpicfile/getpicfileargs","",{picFileBussid:t,picFileBusstype:"NCFILE",picFileLast:1},(function(t){var a=t.data.data,i=[];a.forEach((function(t){var a=t.picFileUrl;i.push(e.$getRequest(a))})),Promise.all(i).then((function(t){var a=[];t.forEach((function(t){var e=t.data;a.push(e)})),e.nestNCList=a,e.nestNCList.length>0&&(e.showNC=!0)}))}))},closePopup:function(t){t.flag=!1,this.showNC=!1,this.showNestDetail=!1,this.showChoiceEquipmentSingle=!1,this.showChoiceEquipment=!1,this.$refs.basePage.search()},sure:function(t){var e=this,a=this.$refs.basePage.$refs.baseList.$refs.list.$children[0].$children,i=[];i=a.filter((function(t){return t.$refs.checkbox.checked})).map((function(t){return t.data.id}));var s={equipmentId:t,ids:i};v["a"].loading({forbidClick:!0,duration:0}),this.$ajax("/nest/cutworkorder/updateequipment","",s,(function(){v["a"].success("成功"),e.$refs.basePage.search(),e.showChoiceEquipment=!1}))}},created:function(){this.initSelect()},mounted:function(){this.NCHeight=window.innerHeight-this.$refs.basePage.baseNavigationh}},B=j,D=(a("a5d1"),Object(h["a"])(B,i,s,!1,null,"3a2bc247",null));e["default"]=D.exports},"88a0":function(t,e,a){},a5d1:function(t,e,a){"use strict";var i=a("ac0b"),s=a.n(i);s.a},ac0b:function(t,e,a){},bdab:function(t,e,a){},c623:function(t,e,a){}}]);